<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Container Logistics Inc - Premium Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        *{box-sizing:border-box}
        body{margin:0;padding:0;font-family:'Inter','Segoe UI',sans-serif;height:100vh;display:flex;flex-direction:column;background:#05050a;color:white;overflow:hidden;user-select:none}
        
        .bg-layer{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(0,0,0,.85),rgba(0,0,0,.92)),url('https://images.unsplash.com/photo-1578575437130-527eed3abbec?w=1920');background-size:cover;background-position:center;z-index:-2;transition:opacity .5s}
        .bg-particles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;pointer-events:none}
        .particle{position:absolute;width:4px;height:4px;background:rgba(156,39,176,.3);border-radius:50%;animation:floatParticle 15s infinite linear}
        @keyframes floatParticle{0%{transform:translateY(100vh) rotate(0deg);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100vh) rotate(720deg);opacity:0}}
        .hidden{display:none!important}

        .login-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0a0618 0%,#1a0a2e 30%,#0d1b3c 60%,#0a1628 100%);z-index:1000;overflow:hidden}
        .login-wrapper::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(ellipse at 20% 20%,rgba(156,39,176,.15),transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(33,150,243,.1),transparent 50%)}
        
        .logo-container{width:160px;height:160px;background:linear-gradient(145deg,#1a1a2e,#0d0d1a);border-radius:40px;display:flex;align-items:center;justify-content:center;margin-bottom:40px;box-shadow:0 25px 80px rgba(0,0,0,.6),inset 0 1px 0 rgba(255,255,255,.05);position:relative;z-index:1}
        .logo-container::before{content:'';position:absolute;inset:-3px;border-radius:43px;background:linear-gradient(135deg,#9C27B0,#2196F3,#FFD700,#9C27B0);z-index:-1;opacity:.6;filter:blur(15px);animation:logoPulse 3s ease-in-out infinite}
        .logo-container::after{content:'';position:absolute;inset:-2px;border-radius:42px;background:linear-gradient(135deg,#9C27B0,#2196F3);z-index:-1}
        @keyframes logoPulse{0%,100%{opacity:.4;transform:scale(1)}50%{opacity:.7;transform:scale(1.02)}}
        .logo-text{font-size:56px;font-weight:900;background:linear-gradient(135deg,#E1BEE7,#CE93D8,#BA68C8);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        
        .login-card{background:rgba(12,12,20,.85);padding:50px;border-radius:32px;width:380px;text-align:center;position:relative;z-index:1;box-shadow:0 30px 80px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.05);backdrop-filter:blur(30px)}
        .login-card label{font-size:11px;color:#666;letter-spacing:1.5px;font-weight:700;text-transform:uppercase;display:block;text-align:left;margin-left:5%;margin-bottom:8px}
        .login-card input{width:90%;padding:16px 20px;margin-bottom:25px;border-radius:16px;border:2px solid rgba(255,255,255,.06);text-align:center;font-size:16px;background:rgba(255,255,255,.03);color:white;transition:.3s;font-family:'Inter'}
        .login-card input:focus{outline:none;border-color:rgba(156,39,176,.5);background:rgba(156,39,176,.05);box-shadow:0 0 30px rgba(156,39,176,.1)}
        .login-card input::placeholder{color:#444}
        .login-error{color:#EF5350;font-size:13px;min-height:24px;margin-bottom:15px;font-weight:600}
        .login-mode-toggle{color:#777;font-size:13px;margin-top:20px;cursor:pointer;transition:.3s;font-weight:500}
        .login-mode-toggle:hover{color:#CE93D8}
        
        .btn{padding:16px 40px;border-radius:16px;border:none;font-size:16px;font-weight:700;cursor:pointer;transition:.3s;color:white;font-family:'Inter';letter-spacing:.5px}
        .btn-green{background:linear-gradient(135deg,#4CAF50,#2E7D32);box-shadow:0 10px 30px rgba(76,175,80,.3)}
        .btn-green:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(76,175,80,.4)}
        .btn-purple{background:linear-gradient(135deg,#9C27B0,#6A1B9A);box-shadow:0 10px 30px rgba(156,39,176,.3)}
        .btn-purple:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(156,39,176,.4)}

        #game-ui{display:none;width:100%;height:100%;flex-direction:column;position:relative;z-index:10}
        
        .header-stats{height:80px;display:flex;justify-content:space-between;align-items:center;padding:0 40px;background:linear-gradient(180deg,rgba(8,8,15,.98),rgba(8,8,15,.95));border-bottom:1px solid rgba(255,255,255,.04);box-shadow:0 4px 40px rgba(0,0,0,.5);flex-shrink:0;backdrop-filter:blur(20px)}
        
        .user-info{display:flex;align-items:center;gap:16px}
        .user-avatar-mini{width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,#9C27B0,#7B1FA2);display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:800;overflow:hidden}
        .user-avatar-mini img{width:100%;height:100%;object-fit:cover}
        .user-details{display:flex;flex-direction:column}
        .user-name{font-size:17px;font-weight:700}
        .user-meta{font-size:11px;color:#555;display:flex;gap:12px;margin-top:3px}
        
        .balance-box{display:flex;align-items:center;gap:25px}
        .income-badge{background:linear-gradient(135deg,rgba(76,175,80,.15),rgba(76,175,80,.05));border:1px solid rgba(76,175,80,.25);padding:10px 18px;border-radius:14px;font-size:13px;color:#4CAF50;font-weight:700}
        .balance-main{text-align:right}
        .balance-amount{font-size:28px;font-weight:900;color:#CE93D8}
        .balance-sub{font-size:10px;color:#444;margin-top:4px}

        .nav-tabs{display:flex;justify-content:center;gap:10px;padding:15px 25px;flex-shrink:0;background:rgba(8,8,15,.8);border-bottom:1px solid rgba(255,255,255,.03)}
        .nav-btn{background:rgba(255,255,255,.02);padding:12px 32px;border-radius:14px;cursor:pointer;transition:.3s;border:1px solid rgba(255,255,255,.04);color:#555;font-size:14px;font-weight:600}
        .nav-btn:hover{background:rgba(255,255,255,.05);color:#999}
        .nav-btn.active{background:linear-gradient(135deg,rgba(156,39,176,.2),rgba(156,39,176,.08));color:#CE93D8;border-color:rgba(156,39,176,.4)}

        .tab-content{flex:1;display:none;flex-direction:column;align-items:center;overflow-y:auto;padding-bottom:40px;width:100%}
        .tab-content.active{display:flex!important}
        .tab-content::-webkit-scrollbar{width:6px}
        .tab-content::-webkit-scrollbar-thumb{background:rgba(156,39,176,.3);border-radius:3px}

        .roulette-section{display:flex;flex-direction:column;align-items:center;margin:25px 0 20px 0;width:100%}
        .roulette-frame{position:relative;width:940px}
        .roulette-pointer{position:absolute;top:-5px;left:50%;transform:translateX(-50%);z-index:30;filter:drop-shadow(0 6px 20px rgba(156,39,176,.6))}
        .roulette-viewport{width:940px;height:270px;background:linear-gradient(180deg,#08080f,#0f0f18 50%,#08080f);border:2px solid rgba(255,255,255,.05);border-radius:24px;position:relative;overflow:hidden;box-shadow:inset 0 0 120px rgba(0,0,0,.9)}
        .roulette-viewport::before,.roulette-viewport::after{content:'';position:absolute;top:0;bottom:0;width:160px;z-index:15;pointer-events:none}
        .roulette-viewport::before{left:0;background:linear-gradient(to right,#08080f,transparent)}
        .roulette-viewport::after{right:0;background:linear-gradient(to left,#08080f,transparent)}
        .roulette-center-line{position:absolute;left:50%;top:0;bottom:0;width:3px;background:linear-gradient(180deg,transparent,rgba(156,39,176,.6) 20%,rgba(156,39,176,.6) 80%,transparent);z-index:12;transform:translateX(-50%)}
        .roulette-track{display:flex;height:100%;align-items:center;position:absolute;left:0;will-change:transform}

        .car-card{width:180px;height:220px;margin:0 6px;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;flex-shrink:0;padding:14px;position:relative;overflow:hidden}
        .car-card.rarity-yellow{background:linear-gradient(180deg,#1e1c14,#14130e);border:2px solid rgba(255,215,0,.2)}
        .car-card.rarity-green{background:linear-gradient(180deg,#141e14,#0e140e);border:2px solid rgba(76,175,80,.2)}
        .car-card.rarity-blue{background:linear-gradient(180deg,#14141e,#0e0e1a);border:2px solid rgba(33,150,243,.2)}
        .car-card.rarity-red{background:linear-gradient(180deg,#1e1414,#1a0e0e);border:2px solid rgba(244,67,54,.2)}
        .car-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
        .car-card.rarity-yellow::before{background:linear-gradient(to right,transparent,#FFD700,transparent)}
        .car-card.rarity-green::before{background:linear-gradient(to right,transparent,#4CAF50,transparent)}
        .car-card.rarity-blue::before{background:linear-gradient(to right,transparent,#2196F3,transparent)}
        .car-card.rarity-red::before{background:linear-gradient(to right,transparent,#F44336,transparent)}
        .car-card img{width:100%;height:115px;object-fit:cover;border-radius:12px;background:#000}
        .car-name{font-size:13px;font-weight:600;margin-top:8px;color:#bbb;text-align:center}
        .car-rarity-label{font-size:9px;text-transform:uppercase;letter-spacing:2px;font-weight:800}
        .car-rarity-label.yellow{color:#FFD700}.car-rarity-label.green{color:#4CAF50}.car-rarity-label.blue{color:#2196F3}.car-rarity-label.red{color:#F44336}
        .car-price{font-size:16px;font-weight:800}
        .car-price.yellow{color:#FFD700}.car-price.green{color:#4CAF50}.car-price.blue{color:#2196F3}.car-price.red{color:#F44336}
        @keyframes winPulse{0%,100%{box-shadow:0 0 0 rgba(156,39,176,0)}50%{box-shadow:0 0 60px rgba(156,39,176,.5)}}
        @keyframes winScale{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
        .car-card.winner{animation:winPulse 1s ease infinite,winScale 1s ease infinite;z-index:20}
        
        #win-message{font-size:22px;font-weight:800;height:40px;margin-top:18px;text-align:center}
        @keyframes winText{0%{opacity:0;transform:translateY(15px) scale(.9)}100%{opacity:1;transform:translateY(0) scale(1)}}
        .win-animated{animation:winText .5s ease forwards}

        .container-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;max-width:920px;padding:0 25px}
        .container-item{background:linear-gradient(145deg,rgba(20,20,28,.9),rgba(15,15,22,.9));padding:25px 18px;border-radius:20px;text-align:center;cursor:pointer;transition:.4s;position:relative;border:1px solid rgba(255,255,255,.04)}
        .container-item:hover{transform:translateY(-8px);border-color:rgba(156,39,176,.2);box-shadow:0 20px 50px rgba(0,0,0,.4)}
        .container-item .c-icon{font-size:50px;margin-bottom:12px}
        .container-item .c-tier{font-size:14px;font-weight:800;letter-spacing:2px}
        .container-price{font-size:18px;font-weight:800;color:#CE93D8;margin-top:10px}
        .locked-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);border-radius:20px;backdrop-filter:blur(4px);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888;font-size:12px;gap:6px;font-weight:600;text-align:center;padding:15px}

        /* Profile */
        #tab-profile{background:linear-gradient(180deg,#05050a,#08080f);padding-top:30px}
        
        .profile-hero{width:100%;max-width:700px;position:relative;margin-bottom:30px}
        .profile-hero-bg{position:absolute;top:0;left:0;right:0;height:180px;background:linear-gradient(135deg,#1a0a2e,#0d1b3c);border-radius:28px 28px 0 0;overflow:hidden}
        .profile-hero-bg::after{content:'';position:absolute;bottom:0;left:0;right:0;height:80px;background:linear-gradient(transparent,rgba(5,5,10,.95))}
        
        .profile-hero-content{position:relative;padding:60px 40px 30px;text-align:center}
        
        .profile-avatar-wrapper{position:relative;width:140px;height:140px;margin:0 auto 20px}
        .profile-avatar-ring{position:absolute;inset:-8px;border-radius:50%;background:conic-gradient(from 0deg,#9C27B0,#E91E63,#FF5722,#FFC107,#4CAF50,#2196F3,#9C27B0);animation:avatarRing 4s linear infinite;opacity:.6}
        @keyframes avatarRing{to{transform:rotate(360deg)}}
        .profile-avatar-ring-inner{position:absolute;inset:-4px;border-radius:50%;background:#0a0a12}
        .profile-avatar{width:140px;height:140px;border-radius:50%;background:linear-gradient(145deg,#1a1a2e,#0f0f1a);display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}
        .profile-avatar img{width:100%;height:100%;object-fit:cover}
        .profile-avatar-placeholder{color:rgba(255,255,255,.3);font-size:12px;text-align:center;font-weight:600}
        .profile-avatar-edit{position:absolute;bottom:5px;right:5px;width:36px;height:36px;background:linear-gradient(135deg,#9C27B0,#7B1FA2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;z-index:5;border:3px solid #0a0a12}
        .profile-level-badge{position:absolute;top:0;right:0;background:linear-gradient(135deg,#FFD700,#FFA000);color:#000;font-size:12px;font-weight:900;padding:6px 12px;border-radius:20px;z-index:5}
        
        .profile-name{font-size:32px;font-weight:900;margin-bottom:8px;color:#fff}
        .profile-title{font-size:13px;color:#666;letter-spacing:2px;text-transform:uppercase;font-weight:600;margin-bottom:20px}
        
        .profile-level-section{background:rgba(15,15,25,.8);border-radius:20px;padding:20px 30px;border:1px solid rgba(255,255,255,.04);margin:0 20px}
        .profile-level-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .profile-level-text{font-size:20px;font-weight:800;color:#FFD700}
        .profile-level-xp{font-size:13px;color:#666;font-weight:600}
        .profile-level-bar{height:12px;background:rgba(255,255,255,.05);border-radius:6px;overflow:hidden}
        .profile-level-fill{height:100%;background:linear-gradient(90deg,#c9d060,#a0b030);border-radius:6px;transition:width .8s ease}

        .daily-card{width:100%;max-width:700px;background:linear-gradient(145deg,rgba(18,18,28,.9),rgba(12,12,20,.9));border:1px solid rgba(255,255,255,.05);border-radius:24px;padding:30px;margin-bottom:25px}
        .daily-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#FFD700,#FFA000)}
        .daily-header{display:flex;align-items:center;gap:15px;margin-bottom:20px}
        .daily-icon{width:50px;height:50px;background:linear-gradient(135deg,#FFD700,#FFA000);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:26px}
        .daily-title{font-size:18px;font-weight:800;color:#FFD700}
        .daily-subtitle{font-size:12px;color:#666;margin-top:2px}
        
        .daily-days{display:flex;gap:10px;justify-content:center;margin-bottom:25px;flex-wrap:wrap}
        .daily-day{width:75px;height:85px;border-radius:16px;background:rgba(255,255,255,.02);border:2px solid rgba(255,255,255,.05);display:flex;flex-direction:column;align-items:center;justify-content:center;transition:.3s}
        .daily-day-num{font-size:10px;font-weight:800;color:#555;letter-spacing:1px;margin-bottom:4px}
        .daily-day-icon{font-size:24px;margin-bottom:2px}
        .daily-day-amount{font-size:11px;font-weight:700;color:#666}
        .daily-day.claimed{background:rgba(76,175,80,.1);border-color:rgba(76,175,80,.3)}
        .daily-day.claimed .daily-day-num{color:#4CAF50}
        .daily-day.current{background:linear-gradient(145deg,rgba(255,215,0,.1),rgba(255,170,0,.05));border-color:rgba(255,215,0,.4);transform:scale(1.05)}
        .daily-day.current .daily-day-num,.daily-day.current .daily-day-amount{color:#FFD700}
        .daily-day.locked{opacity:.3}
        
        .daily-btn{padding:14px 50px;border-radius:16px;border:none;font-size:16px;font-weight:800;cursor:pointer;transition:.3s;font-family:'Inter'}
        .daily-btn.available{background:linear-gradient(135deg,#FFD700,#FFA000);color:#000}
        .daily-btn.available:hover{transform:translateY(-3px)}
        .daily-btn.claimed-btn{background:rgba(255,255,255,.03);color:#444;cursor:not-allowed}

        .time-card{width:100%;max-width:700px;background:linear-gradient(145deg,rgba(18,18,28,.9),rgba(12,12,20,.9));border:1px solid rgba(255,255,255,.05);border-radius:24px;padding:25px 35px;margin-bottom:25px;display:flex;justify-content:space-between;align-items:center}
        .time-main{display:flex;align-items:center;gap:18px}
        .time-icon{width:55px;height:55px;background:linear-gradient(135deg,rgba(66,165,245,.2),rgba(66,165,245,.05));border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:28px}
        .time-label{font-size:11px;color:#666;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
        .time-value{font-size:32px;font-weight:900;color:#42A5F5}
        .time-session{text-align:right}
        .time-session-label{font-size:10px;color:#555;margin-bottom:2px}
        .time-session-value{font-size:18px;font-weight:700;color:#64B5F6}

        .stats-section{width:100%;max-width:700px;margin-bottom:25px}
        .stats-header{font-size:12px;color:#555;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:15px;margin-left:5px}
        .stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:15px}
        .stat-card{background:linear-gradient(145deg,rgba(18,18,28,.9),rgba(12,12,20,.9));border:1px solid rgba(255,255,255,.04);border-radius:20px;padding:22px;text-align:center}
        .stat-icon{font-size:28px;margin-bottom:10px}
        .stat-value{font-size:24px;font-weight:900;margin-bottom:4px}
        .stat-label{font-size:11px;color:#555;font-weight:600;text-transform:uppercase}
        .stat-card.gold .stat-value{color:#FFD700}
        .stat-card.green .stat-value{color:#4CAF50}
        .stat-card.blue .stat-value{color:#42A5F5}
        .stat-card.purple .stat-value{color:#CE93D8}

        .settings-btn-new{background:linear-gradient(145deg,rgba(25,25,35,.9),rgba(18,18,28,.9));border:1px solid rgba(255,255,255,.06);color:#888;padding:16px 45px;border-radius:18px;font-size:15px;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:12px;font-weight:600;font-family:'Inter';margin-top:10px}
        .settings-btn-new:hover{background:rgba(35,35,50,.9);color:#bbb;border-color:rgba(156,39,176,.3)}

        /* Monopoly - –æ–Ω–æ–≤–ª–µ–Ω–æ */
        #tab-monopoly{background:linear-gradient(180deg,#05050a,#08080f);padding-top:30px}
        .monopoly-header{text-align:center;margin-bottom:30px}
        .monopoly-header h1{font-size:38px;margin:0;font-weight:900;color:#FFD700}
        .monopoly-header p{color:#555;font-size:14px;margin-top:8px}
        
        .monopoly-tabs{display:flex;gap:12px;margin-bottom:30px;justify-content:center}
        .monopoly-tab-btn{padding:14px 35px;border-radius:16px;border:1px solid rgba(255,255,255,.05);background:rgba(255,255,255,.02);color:#555;font-size:15px;font-weight:700;cursor:pointer;transition:.3s}
        .monopoly-tab-btn:hover{border-color:rgba(156,39,176,.3);color:#999}
        .monopoly-tab-btn.active{background:linear-gradient(135deg,rgba(156,39,176,.2),rgba(156,39,176,.08));border-color:rgba(156,39,176,.4);color:#CE93D8}
        
        .monopoly-section{display:none;width:100%;max-width:1100px}
        .monopoly-section.active{display:block}
        .my-biz-empty{text-align:center;padding:80px 25px;color:#444}
        .my-biz-empty-icon{font-size:80px;margin-bottom:20px;opacity:.15}
        .biz-total-income{text-align:center;background:rgba(76,175,80,.08);border:1px solid rgba(76,175,80,.15);border-radius:20px;padding:20px;margin:0 auto 25px auto;max-width:500px}
        .biz-total-income-label{font-size:11px;color:#4CAF50;margin-bottom:6px;letter-spacing:1px;font-weight:700}
        .biz-total-income-value{font-size:28px;font-weight:900;color:#4CAF50}
        
        .my-biz-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:18px;padding:0 25px}
        .my-biz-card{background:rgba(18,18,28,.9);border:1px solid rgba(255,255,255,.04);border-radius:22px;overflow:hidden;cursor:pointer;transition:.4s}
        .my-biz-card:hover{border-color:rgba(156,39,176,.25);transform:translateY(-5px)}
        .my-biz-card-header{display:flex;align-items:center;gap:16px;padding:22px;border-bottom:1px solid rgba(255,255,255,.03)}
        .my-biz-avatar{width:58px;height:58px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:30px}
        .my-biz-name{font-size:17px;font-weight:800}
        .my-biz-category{font-size:11px;color:#666;margin-top:3px}
        .my-biz-card-body{padding:18px 22px}
        .my-biz-stat-row{display:flex;justify-content:space-between;margin-bottom:10px;font-size:13px}
        .my-biz-stat-label{color:#555}
        .my-biz-stat-value{color:#4CAF50;font-weight:700}
        .my-biz-stat-value.gold{color:#FFD700}
        .my-biz-income-bar{width:100%;height:4px;background:rgba(255,255,255,.03);border-radius:2px;margin-top:12px;overflow:hidden}
        .my-biz-income-fill{height:100%;background:linear-gradient(90deg,#4CAF50,#81C784);border-radius:2px}
        
        .biz-catalog-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;padding:0 25px}
        .biz-catalog-card{background:rgba(18,18,28,.9);border:1px solid rgba(255,255,255,.04);border-radius:22px;padding:28px;text-align:center;transition:.4s;position:relative}
        .biz-catalog-card:hover{border-color:rgba(255,255,255,.1);transform:translateY(-5px)}
        .biz-catalog-card.locked{opacity:.4}
        .biz-catalog-icon{font-size:50px;margin-bottom:15px}
        .biz-catalog-name{font-size:20px;font-weight:800;margin-bottom:6px}
        .biz-catalog-desc{font-size:12px;color:#666;margin-bottom:18px;min-height:32px}
        .biz-catalog-stats{background:rgba(0,0,0,.3);border-radius:16px;padding:14px;margin-bottom:18px}
        .biz-catalog-stat{display:flex;justify-content:space-between;font-size:13px;margin-bottom:6px}
        .biz-catalog-stat:last-child{margin-bottom:0}
        .biz-catalog-stat-label{color:#555}
        .biz-catalog-stat-value{color:#4CAF50;font-weight:700}
        .biz-catalog-stat-value.req{color:#FFD700}
        .biz-catalog-buy-btn{width:100%;padding:14px;border-radius:16px;border:none;font-size:15px;font-weight:800;cursor:pointer;background:linear-gradient(135deg,#9C27B0,#7B1FA2);color:white;transition:.3s;font-family:'Inter'}
        .biz-catalog-buy-btn:hover:not(:disabled){transform:translateY(-2px)}
        .biz-catalog-buy-btn:disabled{background:rgba(255,255,255,.03);color:#444;cursor:not-allowed}
        .biz-catalog-badge{position:absolute;top:16px;right:16px;padding:5px 12px;border-radius:10px;font-size:11px;font-weight:800}
        .biz-catalog-badge.lock{background:rgba(244,67,54,.15);color:#EF5350}
        .biz-catalog-badge.owned{background:rgba(76,175,80,.15);color:#66BB6A}
        .biz-catalog-lvl-badge{position:absolute;top:16px;left:16px;background:rgba(156,39,176,.15);color:#CE93D8;padding:5px 12px;border-radius:10px;font-size:11px;font-weight:800}

        /* Modal */
        .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);z-index:9998;display:none;justify-content:center;align-items:center;backdrop-filter:blur(15px)}
        .modal-overlay.open{display:flex!important}
        .modal-panel{background:#0c0c14;width:580px;max-height:90vh;border-radius:28px;border:1px solid rgba(255,255,255,.05);overflow-y:auto;box-shadow:0 40px 100px rgba(0,0,0,.7);animation:slideIn .4s ease}
        @keyframes slideIn{from{transform:translateY(40px);opacity:0}to{transform:translateY(0);opacity:1}}
        .modal-banner{height:120px;display:flex;align-items:center;justify-content:center;position:relative}
        .modal-banner-icon{font-size:55px}
        .modal-close{position:absolute;top:16px;right:16px;width:38px;height:38px;background:rgba(255,255,255,.06);border:none;border-radius:12px;color:#888;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .modal-close:hover{background:#EF5350;color:white}
        .modal-body{padding:25px 32px}
        .modal-title{font-size:26px;font-weight:900;margin-bottom:5px}
        .modal-subtitle{font-size:12px;color:#666;margin-bottom:22px}
        .modal-divider{height:1px;background:rgba(255,255,255,.05);margin:22px 0}
        .modal-stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:22px}
        .modal-stat{background:rgba(255,255,255,.02);padding:18px;border-radius:16px;text-align:center}
        .modal-stat-label{font-size:10px;color:#555;text-transform:uppercase;letter-spacing:1.5px;margin-bottom:6px;font-weight:700}
        .modal-stat-value{font-size:22px;font-weight:900}
        .modal-stat-value.green{color:#4CAF50}
        .modal-stat-value.gold{color:#FFD700}
        .modal-upgrade-title{font-size:13px;color:#666;margin-bottom:12px;font-weight:800}
        .modal-upgrade-btn{width:100%;padding:14px 18px;border-radius:14px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,.02);color:white;font-size:14px;cursor:pointer;transition:.3s;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;font-family:'Inter'}
        .modal-upgrade-btn:hover:not(:disabled){background:rgba(76,175,80,.08);border-color:rgba(76,175,80,.2)}
        .modal-upgrade-btn:disabled{opacity:.3;cursor:not-allowed}
        .upgrade-label{display:flex;align-items:center;gap:10px;font-weight:600}
        .upgrade-price{color:#4CAF50;font-weight:800}
        .modal-action-btn{width:100%;padding:16px;border-radius:16px;border:none;font-size:16px;font-weight:800;cursor:pointer;transition:.3s;margin-top:15px;font-family:'Inter'}
        .modal-action-btn.red{background:rgba(244,67,54,.08);color:#EF5350;border:1px solid rgba(244,67,54,.15)}

        /* City - –æ–Ω–æ–≤–ª–µ–Ω–æ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ */
        #tab-city{background:#040408;padding:0;overflow:hidden;position:relative}
        .city-hud{position:absolute;top:0;left:0;right:0;z-index:100;background:linear-gradient(180deg,rgba(4,4,8,.98),rgba(4,4,8,.85) 60%,transparent);padding:18px 30px 45px;display:flex;justify-content:space-between;align-items:flex-start;pointer-events:none}
        .city-hud>*{pointer-events:auto}
        .city-hud-left h2{margin:0;font-size:24px;font-weight:900}
        .city-hud-left h2 span{color:#FFD700}
        .city-hud-left p{margin:5px 0 0;font-size:12px;color:#555}
        .city-hud-right{display:flex;gap:12px}
        .city-hud-stat{background:rgba(255,255,255,.04);padding:12px 18px;border-radius:14px;text-align:center;min-width:85px}
        .city-hud-stat-label{font-size:9px;color:#555;font-weight:700;letter-spacing:1px}
        .city-hud-stat-value{font-size:18px;font-weight:900;margin-top:4px}
        .city-hud-stat-value.pop{color:#42A5F5}
        .city-hud-stat-value.happy{color:#FFD700}
        .city-hud-stat-value.tax{color:#4CAF50}

        .city-map-wrapper{width:100%;height:100%;overflow:auto;cursor:grab;position:relative}
        .city-map-wrapper:active{cursor:grabbing}
        .city-map{width:1800px;height:1800px;position:relative;background:linear-gradient(135deg,#1a3d12,#2a5a1a)}

        .road-h{position:absolute;background:#2a2a2a;border-top:1px dashed rgba(255,200,0,.3);border-bottom:1px dashed rgba(255,200,0,.3)}
        .road-v{position:absolute;background:#2a2a2a;border-left:1px dashed rgba(255,200,0,.3);border-right:1px dashed rgba(255,200,0,.3)}
        .quarter{position:absolute;border:2px dashed rgba(255,255,255,.06);border-radius:20px;pointer-events:none}
        .quarter-label{position:absolute;top:10px;left:15px;font-size:11px;font-weight:800;color:rgba(255,255,255,.12);letter-spacing:1.5px}

        .building{position:absolute;border-radius:10px;cursor:pointer;transition:.3s;display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 6px 25px rgba(0,0,0,.5)}
        .building:hover{transform:scale(1.12);z-index:50}
        .building-icon{font-size:26px}
        .building-name{font-size:8px;color:rgba(255,255,255,.9);text-align:center;margin-top:2px;font-weight:700;max-width:92%}
        .building-status{position:absolute;top:4px;right:4px;width:10px;height:10px;border-radius:50%}
        .building-status.owned{background:#4CAF50;box-shadow:0 0 12px #4CAF50}
        .building-status.rented{background:#FFA726;box-shadow:0 0 12px #FFA726}
        .building-status.available{background:#555}
        .building-status.locked{background:#EF5350}
        .building-level-badge{position:absolute;bottom:3px;right:3px;background:rgba(0,0,0,.8);color:#FFD700;font-size:8px;padding:2px 5px;border-radius:4px;font-weight:800}
        .building-income-float{position:absolute;top:-5px;left:50%;transform:translateX(-50%);color:#4CAF50;font-size:9px;font-weight:900;animation:floatUp 2.5s ease-in-out infinite}
        @keyframes floatUp{0%,100%{opacity:.4;transform:translateX(-50%) translateY(0)}50%{opacity:1;transform:translateX(-50%) translateY(-12px)}}

        .b-residential{background:linear-gradient(180deg,#3F51B5,#303F9F);border:2px solid rgba(63,81,181,.4)}
        .b-commercial{background:linear-gradient(180deg,#E64A19,#BF360C);border:2px solid rgba(230,74,25,.4)}
        .b-industrial{background:linear-gradient(180deg,#546E7A,#37474F);border:2px solid rgba(84,110,122,.4)}
        .b-entertainment{background:linear-gradient(180deg,#8E24AA,#6A1B9A);border:2px solid rgba(142,36,170,.4)}
        .b-government{background:linear-gradient(180deg,#00897B,#00695C);border:2px solid rgba(0,137,123,.4)}
        .b-special{background:linear-gradient(180deg,#F57C00,#E65100);border:2px solid rgba(245,124,0,.4)}
        .b-education{background:linear-gradient(180deg,#1E88E5,#1565C0);border:2px solid rgba(30,136,229,.4)}
        .b-medical{background:linear-gradient(180deg,#E53935,#C62828);border:2px solid rgba(229,57,53,.4)}
        .b-office{background:linear-gradient(180deg,#5C6BC0,#3949AB);border:2px solid rgba(92,107,192,.4)}

        .bm-header{padding:25px;display:flex;align-items:center;gap:20px;border-bottom:1px solid rgba(255,255,255,.04)}
        .bm-header-icon{width:68px;height:68px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:36px}
        .bm-header-name{font-size:22px;font-weight:900}
        .bm-header-type{font-size:12px;color:#666;margin-top:3px}
        .bm-header-status{font-size:11px;margin-top:6px;padding:4px 12px;border-radius:8px;display:inline-block;font-weight:700}
        .bm-body{padding:22px 25px}
        .bm-desc{font-size:13px;color:#888;margin-bottom:22px}
        .bm-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:22px}
        .bm-stat{background:rgba(255,255,255,.02);padding:14px;border-radius:14px;text-align:center}
        .bm-stat-label{font-size:9px;color:#555;text-transform:uppercase;letter-spacing:1.5px;font-weight:700}
        .bm-stat-value{font-size:18px;font-weight:900;margin-top:5px}
        .bm-actions{display:flex;flex-direction:column;gap:10px}
        .bm-action-btn{width:100%;padding:15px 20px;border-radius:14px;border:none;font-size:15px;font-weight:800;cursor:pointer;transition:.3s;display:flex;justify-content:space-between;align-items:center;font-family:'Inter'}
        .bm-action-btn:hover:not(:disabled){transform:scale(1.02)}
        .bm-action-btn:disabled{opacity:.3;cursor:not-allowed}
        .bm-action-btn.buy{background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white}
        .bm-action-btn.rent{background:linear-gradient(135deg,#FF9800,#E65100);color:white}
        .bm-action-btn.upgrade{background:linear-gradient(135deg,#9C27B0,#6A1B9A);color:white}
        .bm-action-btn.sell{background:rgba(244,67,54,.08);color:#EF5350;border:1px solid rgba(244,67,54,.12)}
        .bm-action-btn.collect{background:linear-gradient(135deg,#2196F3,#1565C0);color:white}
        .bm-action-price{font-size:14px}
        .bm-action-left{display:flex;align-items:center;gap:10px}
        .bm-office-bonus{background:rgba(92,107,192,.08);border:1px solid rgba(92,107,192,.2);border-radius:16px;padding:15px;margin-bottom:18px;text-align:center}
        .bm-office-bonus-label{font-size:10px;color:#7986CB}
        .bm-office-bonus-value{font-size:15px;font-weight:700;color:#9FA8DA;margin-top:5px}

        /* Settings */
        .settings-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);z-index:9999;display:none;justify-content:center;align-items:center;backdrop-filter:blur(15px)}
        .settings-overlay.open{display:flex!important}
        .settings-panel{background:#0c0c14;width:480px;max-height:85vh;border-radius:28px;border:1px solid rgba(255,255,255,.05);display:flex;flex-direction:column;overflow:hidden}
        .settings-header{display:flex;justify-content:space-between;align-items:center;padding:25px 30px;border-bottom:1px solid rgba(255,255,255,.04)}
        .settings-header h2{margin:0;font-size:22px;font-weight:900}
        .settings-close{width:38px;height:38px;background:rgba(255,255,255,.05);border:none;border-radius:12px;color:#888;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .settings-close:hover{background:#EF5350;color:white}
        .settings-body{padding:25px 30px;overflow-y:auto;flex:1}
        .settings-section{margin-bottom:28px}
        .settings-section-title{font-size:11px;color:#555;text-transform:uppercase;letter-spacing:2px;margin-bottom:14px;font-weight:800}
        .settings-row{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:rgba(255,255,255,.02);border-radius:14px;margin-bottom:8px}
        .settings-row-label{font-size:15px;color:#ccc;font-weight:600}
        .toggle-switch{position:relative;width:50px;height:28px;background:rgba(255,255,255,.1);border-radius:14px;cursor:pointer;transition:.3s}
        .toggle-switch.active{background:#9C27B0}
        .toggle-switch::after{content:'';position:absolute;top:3px;left:3px;width:22px;height:22px;background:white;border-radius:50%;transition:.3s}
        .toggle-switch.active::after{left:25px}
        .settings-action-btn{width:100%;padding:14px;border-radius:14px;border:none;font-size:15px;font-weight:700;cursor:pointer;margin-bottom:8px;font-family:'Inter'}
        .btn-reset{background:rgba(244,67,54,.08);color:#EF5350;border:1px solid rgba(244,67,54,.12)}
        .btn-logout-s{background:rgba(255,255,255,.03);color:#888;border:1px solid rgba(255,255,255,.05)}
        
        .dev-mode-trigger{margin-top:30px;padding-top:22px;border-top:1px solid rgba(255,255,255,.03);text-align:center}
        .dev-mode-btn{background:none;border:none;color:#222;font-size:10px;cursor:pointer;font-family:'Inter'}
        
        .dev-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);z-index:10001;display:none;justify-content:center;align-items:center}
        .dev-overlay.open{display:flex!important}
        .dev-password-card{background:#0a0a10;padding:40px;border-radius:24px;border:1px solid rgba(244,67,54,.2);text-align:center;width:320px}
        .dev-password-card h3{color:#EF5350;font-weight:900;font-size:28px;margin:0 0 5px}
        .dev-password-card p{color:#555;font-size:12px;margin-bottom:22px}
        .dev-password-card input{width:85%;padding:14px;border-radius:12px;border:2px solid rgba(255,255,255,.05);background:rgba(255,255,255,.02);color:white;font-size:18px;letter-spacing:8px;margin-bottom:15px;font-family:'Inter';text-align:center}
        .dev-password-card input:focus{outline:none;border-color:rgba(244,67,54,.3)}
        .dev-enter-btn{background:linear-gradient(135deg,#EF5350,#C62828);color:white;border:none;padding:12px 40px;border-radius:12px;font-weight:800;cursor:pointer;margin-right:10px;font-family:'Inter'}
        .dev-cancel-btn{background:rgba(255,255,255,.05);color:#888;border:none;padding:12px 28px;border-radius:12px;cursor:pointer;font-family:'Inter'}
        .dev-error{color:#EF5350;font-size:12px;margin-top:10px;height:18px;font-weight:600}
        
        .dev-console-panel{background:#0a0a10;width:500px;border-radius:24px;border:1px solid rgba(244,67,54,.2);overflow:hidden}
        .dev-console-header{background:linear-gradient(135deg,#EF5350,#C62828);padding:20px 25px;display:flex;justify-content:space-between;align-items:center}
        .dev-console-header h2{margin:0;font-size:18px;font-weight:900}
        .dev-console-body{padding:25px}
        .dev-console-section{margin-bottom:22px}
        .dev-console-section-title{font-size:10px;color:#EF5350;text-transform:uppercase;letter-spacing:2px;margin-bottom:12px;font-weight:800}
        .dev-btn{width:100%;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,.02);color:white;font-size:14px;font-weight:700;cursor:pointer;margin-bottom:8px;font-family:'Inter';display:flex;align-items:center;gap:10px;justify-content:center}
        .dev-btn:hover{background:rgba(255,255,255,.05)}
        .dev-input-row{display:flex;gap:10px;margin-bottom:8px}
        .dev-input-row input{flex:1;padding:13px;border-radius:12px;border:1px solid rgba(255,255,255,.05);background:rgba(255,255,255,.02);color:white;font-size:14px;font-family:'Inter'}
        .dev-input-row button{padding:13px 20px;border-radius:12px;border:none;background:#4CAF50;color:white;font-weight:800;cursor:pointer;font-family:'Inter'}
        .dev-status{text-align:center;color:#4CAF50;font-size:13px;height:20px;margin-top:8px;font-weight:600}
        .dev-footer{padding:15px 25px;border-top:1px solid rgba(255,255,255,.03);text-align:center}
        .dev-footer-text{color:#222;font-size:10px}

        .toast-container{position:fixed;top:100px;right:25px;z-index:9997;display:flex;flex-direction:column;gap:10px}
        .toast{background:rgba(12,12,20,.98);border:1px solid rgba(255,255,255,.05);border-radius:18px;padding:18px 22px;min-width:280px;max-width:380px;box-shadow:0 15px 50px rgba(0,0,0,.6);animation:toastIn .4s ease,toastOut .4s ease 2.6s forwards;display:flex;align-items:center;gap:14px}
        .toast-icon{font-size:26px}
        .toast-text{font-size:14px;color:#ccc;font-weight:500}
        .toast-text strong{color:#4CAF50;font-weight:700}
        @keyframes toastIn{from{transform:translateX(100px);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes toastOut{from{opacity:1}to{opacity:0;transform:translateX(50px)}}
    </style>
</head>
<body>
    <div class="bg-layer" id="main-bg"></div>
    <div class="bg-particles" id="particles"></div>
    <div class="toast-container" id="toast-container"></div>

    <div class="login-wrapper" id="login-screen">
        <div class="logo-container"><div class="logo-text">CL</div></div>
        <div class="login-card">
            <div id="login-title" style="font-size:24px;font-weight:900;margin-bottom:30px;color:#CE93D8">–í–•–Ü–î</div>
            <label>–ù–Ü–ö–ù–ï–ô–ú</label><input type="text" id="nickname" autocomplete="off" placeholder="–í–∞—à –Ω—ñ–∫...">
            <label>–ü–ê–†–û–õ–¨</label><input type="password" id="password" autocomplete="off" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <div class="login-error" id="login-error"></div>
            <button class="btn btn-green" id="login-btn" style="display:none" onclick="doLogin()">–£–≤—ñ–π—Ç–∏</button>
            <button class="btn btn-purple" id="register-btn" style="display:none" onclick="doRegister()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <div class="login-mode-toggle" id="login-toggle" onclick="toggleLoginMode()"></div>
        </div>
    </div>

    <div class="settings-overlay" id="settings-overlay"><div class="settings-panel">
        <div class="settings-header"><h2>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2><button class="settings-close" onclick="closeSettings()">‚úï</button></div>
        <div class="settings-body">
            <div class="settings-section"><div class="settings-section-title">–ó–≤—É–∫</div>
                <div class="settings-row"><div class="settings-row-label">üîä –ó–≤—É–∫–∏ –≥—Ä–∏</div><div class="toggle-switch active" onclick="this.classList.toggle('active')"></div></div>
            </div>
            <div class="settings-section"><div class="settings-section-title">–ê–∫–∞—É–Ω—Ç</div>
                <button class="settings-action-btn btn-reset" onclick="if(confirm('–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å?')){resetProgress()}">üóëÔ∏è –°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
                <button class="settings-action-btn btn-logout-s" onclick="logoutAcc()">üö™ –í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</button>
            </div>
            <div class="dev-mode-trigger"><button class="dev-mode-btn" onclick="closeSettings();$('dev-auth').classList.add('open');$('dev-pw').value='';$('dev-err').innerText=''">Developer Mode</button></div>
        </div>
    </div></div>
    
    <div class="dev-overlay" id="dev-auth"><div class="dev-password-card"><h3>üîê</h3><p>Developer Access</p><input type="password" id="dev-pw" maxlength="10" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><div class="dev-error" id="dev-err"></div><div style="margin-top:15px"><button class="dev-enter-btn" onclick="chkDev()">Enter</button><button class="dev-cancel-btn" onclick="$('dev-auth').classList.remove('open')">‚úï</button></div></div></div>
    <div class="dev-overlay" id="dev-con"><div class="dev-console-panel">
        <div class="dev-console-header"><h2>üõ†Ô∏è Dev Console</h2><button class="settings-close" onclick="$('dev-con').classList.remove('open')">‚úï</button></div>
        <div class="dev-console-body">
            <div class="dev-console-section"><div class="dev-console-section-title">üí∞ Balance</div>
                <div class="dev-input-row"><input type="number" id="dev-money" placeholder="LGX"><button onclick="let a=parseInt($('dev-money').value);if(a>0){P.balance+=a;save();dS('‚úÖ +'+a)}">Add</button></div>
                <button class="dev-btn" onclick="P.balance+=999999999;save();dS('‚úÖ +999M')">üíé +999,999,999</button>
            </div>
            <div class="dev-console-section"><div class="dev-console-section-title">‚≠ê Level</div>
                <button class="dev-btn" onclick="P.level=99;P.xp=0;save();dS('‚úÖ LVL 99')">üèÜ LVL 99</button>
            </div>
            <div class="dev-status" id="dev-st"></div>
        </div><div class="dev-footer"><div class="dev-footer-text">CLI Dev v5.0</div></div>
    </div></div>

    <div class="modal-overlay" id="biz-modal"><div class="modal-panel" id="biz-modal-c"></div></div>
    <div class="modal-overlay" id="bld-modal"><div class="modal-panel" id="bld-modal-c"></div></div>

    <div id="game-ui">
        <div class="header-stats">
            <div class="user-info">
                <div class="user-avatar-mini" id="ui-av">C</div>
                <div class="user-details">
                    <div class="user-name" id="ui-nick">Player</div>
                    <div class="user-meta"><span>‚≠ê LVL <b id="ui-lvl">1</b></span><span>üè¢ <b id="ui-biz">0</b></span><span>üèôÔ∏è <b id="ui-bld">0</b></span></div>
                </div>
            </div>
            <div class="balance-box">
                <div class="income-badge">üìà +<span id="ui-inc">0</span>/10—Å</div>
                <div class="balance-main"><div class="balance-amount">üíé <span id="ui-bal">0</span> LGX</div><div class="balance-sub">Premium Currency</div></div>
            </div>
        </div>
        <div class="nav-tabs">
            <div class="nav-btn active" onclick="switchTab('auction')">üé∞ –ê—É–∫—Ü—ñ–æ–Ω</div>
            <div class="nav-btn" onclick="switchTab('monopoly')">üè¢ –ú–æ–Ω–æ–ø–æ–ª—ñ—è</div>
            <div class="nav-btn" onclick="switchTab('city')">üèôÔ∏è –†—ñ–≤–Ω–µ</div>
            <div class="nav-btn" onclick="switchTab('profile')">üë§ –ü—Ä–æ—Ñ—ñ–ª—å</div>
        </div>

        <div id="tab-auction" class="tab-content active">
            <div class="roulette-section"><div class="roulette-frame">
                <div class="roulette-pointer"><svg width="44" height="32" viewBox="0 0 44 32"><defs><linearGradient id="pg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" style="stop-color:#E1BEE7"/><stop offset="100%" style="stop-color:#9C27B0"/></linearGradient></defs><polygon points="22,32 0,0 44,0" fill="url(#pg)"/></svg></div>
                <div class="roulette-viewport"><div class="roulette-center-line"></div><div class="roulette-track" id="track"></div></div>
            </div></div>
            <div id="win-message"></div>
            <h3 style="color:#555;font-weight:700;margin:20px 0;font-size:13px;letter-spacing:2px">üéÅ –ö–û–ù–¢–ï–ô–ù–ï–†–ò</h3>
            <div class="container-grid">
                <div class="container-item" onclick="spin('yellow',100)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#FFD700">BASIC</div><div class="container-price">100 LGX</div></div>
                <div class="container-item" onclick="spin('green',1500)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#4CAF50">STANDARD</div><div class="container-price">1,500 LGX</div></div>
                <div class="container-item" onclick="spin('blue',7000)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#2196F3">PREMIUM</div><div class="container-price">7,000 LGX</div><div class="locked-overlay" id="lock-blue">üîí<br>LVL 3</div></div>
                <div class="container-item" onclick="spin('red',30000)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#EF5350">ELITE</div><div class="container-price">30,000 LGX</div><div class="locked-overlay" id="lock-red">üè¢ 3 –æ—Ñ—ñ—Å–∏</div></div>
            </div>
        </div>

        <div id="tab-monopoly" class="tab-content">
            <div class="monopoly-header"><h1>üè¢ –ú–û–ù–û–ü–û–õ–Ü–Ø</h1><p>–ü–æ–±—É–¥—É–π –±—ñ–∑–Ω–µ—Å-—ñ–º–ø–µ—Ä—ñ—é</p></div>
            <div class="monopoly-tabs">
                <div class="monopoly-tab-btn active" onclick="switchMT('my')">üè¢ –ú–æ—ó –ë—ñ–∑–Ω–µ—Å–∏</div>
                <div class="monopoly-tab-btn" onclick="switchMT('open')">‚ûï –í—ñ–¥–∫—Ä–∏—Ç–∏</div>
            </div>
            <div class="monopoly-section active" id="m-my">
                <div class="biz-total-income" id="biz-total" style="display:none"><div class="biz-total-income-label">üí∞ –î–û–•–Ü–î</div><div class="biz-total-income-value" id="biz-total-v">0</div></div>
                <div id="my-biz-c"><div class="my-biz-empty"><div class="my-biz-empty-icon">üèóÔ∏è</div><div style="font-size:20px;font-weight:700">–ù–µ–º–∞—î –±—ñ–∑–Ω–µ—Å—ñ–≤</div></div></div>
            </div>
            <div class="monopoly-section" id="m-open"><div class="biz-catalog-grid" id="biz-cat"></div></div>
        </div>

        <div id="tab-city" class="tab-content">
            <div class="city-hud">
                <div class="city-hud-left"><h2>üèôÔ∏è <span>–†–Ü–í–ù–ï</span></h2><p>–†–æ–∑–≤–∏–≤–∞–π –º—ñ—Å—Ç–æ —Ç–∞ –æ—Ç—Ä–∏–º—É–π –ø—Ä–∏–±—É—Ç–æ–∫</p></div>
                <div class="city-hud-right">
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–ù–ê–°–ï–õ–ï–ù–ù–Ø</div><div class="city-hud-stat-value pop" id="city-pop">0</div></div>
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–©–ê–°–¢–Ø</div><div class="city-hud-stat-value happy" id="city-happy">0%</div></div>
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–û–§–Ü–°–ò</div><div class="city-hud-stat-value" style="color:#7986CB" id="city-offices">0/3</div></div>
                </div>
            </div>
            <div class="city-map-wrapper" id="cmw"><div class="city-map" id="cmap"></div></div>
        </div>

        <div id="tab-profile" class="tab-content">
            <div class="profile-hero">
                <div class="profile-hero-bg"></div>
                <div class="profile-hero-content">
                    <input type="file" id="av-in" accept="image/*" style="display:none">
                    <div class="profile-avatar-wrapper" onclick="$('av-in').click()">
                        <div class="profile-avatar-ring"></div>
                        <div class="profile-avatar-ring-inner"></div>
                        <div class="profile-avatar">
                            <img id="av-img" src="" style="display:none">
                            <div id="av-ph" class="profile-avatar-placeholder">üì∑<br>–§–û–¢–û</div>
                        </div>
                        <div class="profile-avatar-edit">‚úèÔ∏è</div>
                        <div class="profile-level-badge">LVL <span id="p-lvl-badge">1</span></div>
                    </div>
                    <div class="profile-name" id="p-nick">Player</div>
                    <div class="profile-title">üéÆ Container Tycoon</div>
                    
                    <div class="profile-level-section">
                        <div class="profile-level-header">
                            <div class="profile-level-text">‚≠ê –†—ñ–≤–µ–Ω—å <span id="p-lvl">1</span></div>
                            <div class="profile-level-xp"><span id="p-xp-current">0</span>/<span id="p-xp-max">1000</span> XP</div>
                        </div>
                        <div class="profile-level-bar"><div class="profile-level-fill" id="p-xp"></div></div>
                    </div>
                </div>
            </div>

            <div class="daily-card">
                <div class="daily-header">
                    <div class="daily-icon">üéÅ</div>
                    <div><div class="daily-title">–©–û–î–ï–ù–ù–ê –ù–ê–ì–û–†–û–î–ê</div><div class="daily-subtitle">–ó–∞—Ö–æ–¥—å –∫–æ–∂–µ–Ω –¥–µ–Ω—å!</div></div>
                </div>
                <div class="daily-days" id="daily-streak"></div>
                <button class="daily-btn" id="daily-btn" onclick="claimDaily()">–ó–∞–±—Ä–∞—Ç–∏</button>
            </div>

            <div class="time-card">
                <div class="time-main">
                    <div class="time-icon">‚è±Ô∏è</div>
                    <div><div class="time-label">–ß–∞—Å —É –≥—Ä—ñ</div><div class="time-value" id="time-total">00:00:00</div></div>
                </div>
                <div class="time-session"><div class="time-session-label">–°–µ—Å—ñ—è</div><div class="time-session-value" id="time-session">00:00</div></div>
            </div>

            <div class="stats-section">
                <div class="stats-header">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="stats-grid">
                    <div class="stat-card gold"><div class="stat-icon">üí∞</div><div class="stat-value" id="s-bal">0</div><div class="stat-label">–ë–∞–ª–∞–Ω—Å</div></div>
                    <div class="stat-card purple"><div class="stat-icon">üì¶</div><div class="stat-value" id="s-opened">0</div><div class="stat-label">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤</div></div>
                    <div class="stat-card green"><div class="stat-icon">üè¢</div><div class="stat-value" id="s-biz">0</div><div class="stat-label">–ë—ñ–∑–Ω–µ—Å—ñ–≤</div></div>
                    <div class="stat-card blue"><div class="stat-icon">üèóÔ∏è</div><div class="stat-value" id="s-bld">0</div><div class="stat-label">–ë—É–¥—ñ–≤–ª—ñ</div></div>
                    <div class="stat-card blue"><div class="stat-icon">üë•</div><div class="stat-value" id="s-pop">0</div><div class="stat-label">–ù–∞—Å–µ–ª–µ–Ω–Ω—è</div></div>
                    <div class="stat-card green"><div class="stat-icon">üìà</div><div class="stat-value" id="s-inc">0</div><div class="stat-label">–î–æ—Ö—ñ–¥/10—Å</div></div>
                </div>
            </div>

            <button class="settings-btn-new" onclick="openSettings()"><span>‚öôÔ∏è</span> –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
        </div>
    </div>

<script>
// –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
const $ = id => document.getElementById(id);

// ========== –°–ò–°–¢–ï–ú–ê –ß–ê–°–¢–ò–ù–û–ö ==========
function createParticles() {
    const c = $('particles');
    if (!c) return;
    c.innerHTML = '';
    for (let i = 0; i < 20; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random() * 100 + '%';
        p.style.animationDelay = Math.random() * 15 + 's';
        p.style.animationDuration = (10 + Math.random() * 15) + 's';
        c.appendChild(p);
    }
}
createParticles();

// ========== –ê–£–î–Ü–û ==========
let audioCtx = null;
function initAudio() {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
}
function playTick(f = 800, d = 0.03) {
    if (!audioCtx) return;
    try {
        const o = audioCtx.createOscillator(), g = audioCtx.createGain();
        o.connect(g); g.connect(audioCtx.destination);
        o.frequency.value = f;
        o.type = 'sine';
        g.gain.setValueAtTime(0.05, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + d);
        o.start(); o.stop(audioCtx.currentTime + d);
    } catch (e) {}
}
function playWin() {
    if (!audioCtx) return;
    [0, 0.1, 0.2, 0.35].forEach((d, i) => {
        const o = audioCtx.createOscillator(), g = audioCtx.createGain();
        o.connect(g); g.connect(audioCtx.destination);
        o.frequency.value = [523, 659, 784, 1047][i];
        o.type = 'sine';
        g.gain.setValueAtTime(0.08, audioCtx.currentTime + d);
        g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + d + 0.3);
        o.start(audioCtx.currentTime + d);
        o.stop(audioCtx.currentTime + d + 0.3);
    });
}
function playCash() {
    if (!audioCtx) return;
    const o = audioCtx.createOscillator(), g = audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    o.frequency.value = 1200;
    o.type = 'sine';
    g.gain.setValueAtTime(0.06, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.15);
    o.start(); o.stop(audioCtx.currentTime + 0.15);
}

// ========== –ë–ê–ó–ê –î–ê–ù–ò–• –ê–í–¢–û ==========
const carDB = {
    yellow: [
        { name: "Lada 2107", price: 150, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Golf_II_jaslo.jpg/330px-Golf_II_jaslo.jpg" },
        { name: "Daewoo Lanos", price: 200, img: "https://upload.wikimedia.org/wikipedia/commons/e/ec/Daewoo_Lanos_front_20080110.jpg" },
        { name: "VW Golf 2", price: 250, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Golf_II_jaslo.jpg/330px-Golf_II_jaslo.jpg" },
        { name: "Audi 80", price: 300, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Audi80-1992.JPG/330px-Audi80-1992.JPG" },
        { name: "Opel Astra", price: 350, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Opel_Astra_F_front_20071019.jpg/250px-Opel_Astra_F_front_20071019.jpg" }
    ],
    green: [
        { name: "Skoda Octavia", price: 1800, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Skoda_Octavia_I_front_20080213.jpg/250px-Skoda_Octavia_I_front_20080213.jpg" },
        { name: "Toyota Camry", price: 2500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/2010_Toyota_Camry_base_--_11-25-2009.jpg/250px-2010_Toyota_Camry_base_--_11-25-2009.jpg" },
        { name: "VW Passat", price: 2200, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG/250px-VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG" },
        { name: "Mazda 6", price: 2100, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg/330px-2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg" },
        { name: "Honda Accord", price: 2300, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Honda_Accord_%282008%29_front.JPG/250px-Honda_Accord_%282008%29_front.JPG" }
    ],
    blue: [
        { name: "BMW M5", price: 11000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/2021_BMW_M5_CS_F90.jpg/330px-2021_BMW_M5_CS_F90.jpg" },
        { name: "Mercedes G", price: 15000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Mercedes-Benz_W465_450_d_DSC_0679.jpg/250px-Mercedes-Benz_W465_450_d_DSC_0679.jpg" },
        { name: "Porsche 911", price: 12500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg/250px-GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg" },
        { name: "Tesla S", price: 9000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg/330px-2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg" },
        { name: "Range Rover", price: 13000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg/330px-Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg" }
    ],
    red: [
        { name: "Bugatti", price: 350000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/2016-03-01_Geneva_Motor_Show_0853.JPG/960px-2016-03-01_Geneva_Motor_Show_0853.JPG" },
        { name: "Lamborghini", price: 50000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Lamborghini_Aventador_Front_View.jpg/320px-Lamborghini_Aventador_Front_View.jpg" },
        { name: "Ferrari", price: 300000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/LaFerrari_in_Schenzhen.JPG/320px-LaFerrari_in_Schenzhen.JPG" },
        { name: "McLaren P1", price: 150000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/McLaren_P1.jpg/320px-McLaren_P1.jpg" },
        { name: "Rolls-Royce", price: 80000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Rolls-Royce_Phantom_VIII_IMG_4576.jpg/320px-Rolls-Royce_Phantom_VIII_IMG_4576.jpg" }
    ]
};

// ========== –ë–Ü–ó–ù–ï–°–ò –î–õ–Ø –ú–û–ù–û–ü–û–õ–Ü–á (–†–û–ó–®–ò–†–ï–ù–û) ==========
const bizCat = [
    { id: 'kiosk', name: '–ì–∞–∑–µ—Ç–Ω–∏–π –∫—ñ–æ—Å–∫', icon: 'üì∞', cat: '–¢–æ—Ä–≥—ñ–≤–ª—è', desc: '–ì–∞–∑–µ—Ç–∏ —Ç–∞ —Å–Ω–µ–∫–∏', cost: 500, baseInc: 10, reqLvl: 5, color: '#FFD700', bg: 'linear-gradient(135deg,#2a2520,#1a1815)' },
    { id: 'cafe', name: '–ö–∞—Ñ–µ', icon: '‚òï', cat: '–•–∞—Ä—á—É–≤–∞–Ω–Ω—è', desc: '–ö–∞–≤–∞ —Ç–∞ –≤–∏–ø—ñ—á–∫–∞', cost: 3000, baseInc: 50, reqLvl: 10, color: '#8D6E63', bg: 'linear-gradient(135deg,#2a2018,#1a1510)' },
    { id: 'carwash', name: '–ê–≤—Ç–æ–º–∏–π–∫–∞', icon: 'üöó', cat: '–°–µ—Ä–≤—ñ—Å', desc: '–ú–∏–π–∫–∞ –∞–≤—Ç–æ', cost: 15000, baseInc: 200, reqLvl: 15, color: '#42A5F5', bg: 'linear-gradient(135deg,#1a2030,#101828)' },
    { id: 'rest', name: '–†–µ—Å—Ç–æ—Ä–∞–Ω', icon: 'üçΩÔ∏è', cat: '–•–∞—Ä—á—É–≤–∞–Ω–Ω—è', desc: '–ï–ª—ñ—Ç–Ω–∞ –∫—É—Ö–Ω—è', cost: 75000, baseInc: 800, reqLvl: 25, color: '#AB47BC', bg: 'linear-gradient(135deg,#2a1a30,#1a1020)' },
    { id: 'hotel', name: '–ì–æ—Ç–µ–ª—å', icon: 'üè®', cat: '–ù–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å', desc: '5 –∑—ñ—Ä–æ–∫', cost: 500000, baseInc: 5000, reqLvl: 40, color: '#FFA726', bg: 'linear-gradient(135deg,#302a18,#201a10)' },
    { id: 'tech', name: 'TechCorp', icon: 'üè≠', cat: 'IT', desc: '–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó', cost: 2000000, baseInc: 25000, reqLvl: 60, color: '#EF5350', bg: 'linear-gradient(135deg,#301818,#201010)' },
    // –ù–û–í–Ü –ë–Ü–ó–ù–ï–°–ò
    { id: 'bakery', name: '–ü–µ–∫–∞—Ä–Ω—è', icon: 'ü•ê', cat: '–•–∞—Ä—á—É–≤–∞–Ω–Ω—è', desc: '–°–≤—ñ–∂–∞ –≤–∏–ø—ñ—á–∫–∞', cost: 12000, baseInc: 150, reqLvl: 12, color: '#FFB74D', bg: 'linear-gradient(135deg,#332a1a,#221a10)' },
    { id: 'gym', name: '–°–ø–æ—Ä—Ç–∑–∞–ª', icon: 'üèãÔ∏è', cat: '–°–ø–æ—Ä—Ç', desc: '–§—ñ—Ç–Ω–µ—Å —Ü–µ–Ω—Ç—Ä', cost: 45000, baseInc: 600, reqLvl: 22, color: '#4FC3F7', bg: 'linear-gradient(135deg,#1a2a33,#101a22)' },
    { id: 'bar', name: '–ë–∞—Ä', icon: 'üç∫', cat: '–†–æ–∑–≤–∞–≥–∏', desc: '–ù—ñ—á–Ω–µ –∂–∏—Ç—Ç—è', cost: 25000, baseInc: 350, reqLvl: 18, color: '#FF8A65', bg: 'linear-gradient(135deg,#332a1a,#221a10)' },
    { id: 'pharmacy', name: '–ê–ø—Ç–µ–∫–∞', icon: 'üíä', cat: '–ú–µ–¥–∏—Ü–∏–Ω–∞', desc: '–õ—ñ–∫–∏ —Ç–∞ –∑–¥–æ—Ä–æ–≤\'—è', cost: 35000, baseInc: 450, reqLvl: 20, color: '#4DB6AC', bg: 'linear-gradient(135deg,#1a332a,#10221a)' },
    { id: 'clinic', name: '–ö–ª—ñ–Ω—ñ–∫–∞', icon: 'üè•', cat: '–ú–µ–¥–∏—Ü–∏–Ω–∞', desc: '–ü—Ä–∏–≤–∞—Ç–Ω–∞ –∫–ª—ñ–Ω—ñ–∫–∞', cost: 180000, baseInc: 2200, reqLvl: 35, color: '#4DD0E1', bg: 'linear-gradient(135deg,#1a3333,#102222)' },
    { id: 'university', name: '–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç', icon: 'üéì', cat: '–û—Å–≤—ñ—Ç–∞', desc: '–í–∏—â–∞ –æ—Å–≤—ñ—Ç–∞', cost: 800000, baseInc: 9000, reqLvl: 50, color: '#FFB74D', bg: 'linear-gradient(135deg,#33331a,#222210)' },
    { id: 'bank', name: '–ë–∞–Ω–∫', icon: 'üè¶', cat: '–§—ñ–Ω–∞–Ω—Å–∏', desc: '–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ—Å–ª—É–≥–∏', cost: 3500000, baseInc: 40000, reqLvl: 70, color: '#4FC3F7', bg: 'linear-gradient(135deg,#1a2a40,#101a30)' },
    { id: 'airport', name: '–ê–µ—Ä–æ–ø–æ—Ä—Ç', icon: '‚úàÔ∏è', cat: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', desc: '–ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–π', cost: 10000000, baseInc: 120000, reqLvl: 90, color: '#FF8A80', bg: 'linear-gradient(135deg,#403030,#302020)' },
    { id: 'casino', name: '–ö–∞–∑–∏–Ω–æ', icon: 'üé∞', cat: '–†–æ–∑–≤–∞–≥–∏', desc: '–ì—Ä–∞–ª—å–Ω–∏–π –±—ñ–∑–Ω–µ—Å', cost: 5000000, baseInc: 70000, reqLvl: 80, color: '#FFD54F', bg: 'linear-gradient(135deg,#403020,#302010)' }
];

const bizUp = {
    wb: { name: '–°–∞–π—Ç', icon: 'üåê', price: 100, bonus: 0.1, desc: '+10%' },
    ad: { name: '–†–µ–∫–ª–∞–º–∞', icon: 'üì¢', price: 500, bonus: 0.15, desc: '+15%' },
    mg: { name: '–ú–µ–Ω–µ–¥–∂–µ—Ä', icon: 'üëî', price: 2000, bonus: 0.2, desc: '+20%' },
    lo: { name: '–ü—Ä–µ–º—ñ—É–º', icon: 'üìç', price: 10000, bonus: 0.5, desc: '+50%' }
};

// ========== –ë–£–î–Ü–í–õ–Ü –î–õ–Ø –ú–Ü–°–¢–ê (–†–û–ó–®–ò–†–ï–ù–û) ==========
const CB = [
    // –ñ–∏—Ç–ª–æ
    { id: 'h1', name: '–ñ–∏–ª–∏–π –±—É–¥–∏–Ω–æ–∫', icon: 'üè†', type: 'residential', cls: 'b-residential', desc: '20 –º–µ—à–∫–∞–Ω—Ü—ñ–≤', x: 120, y: 220, w: 75, h: 75, buyCost: 2000, rentCost: 200, income: 30, pop: 20, happy: 5, reqLvl: 1 },
    { id: 'h2', name: '–ë–∞–≥–∞—Ç–æ–ø–æ–≤–µ—Ä—Ö—ñ–≤–∫–∞', icon: 'üè¢', type: 'residential', cls: 'b-residential', desc: '150 –º–µ—à–∫–∞–Ω—Ü—ñ–≤', x: 230, y: 220, w: 85, h: 95, buyCost: 25000, rentCost: 2500, income: 300, pop: 150, happy: 3, reqLvl: 8 },
    { id: 'h3', name: '–ñ–∏—Ç–ª–æ–≤–∏–π –∫–æ–º–ø–ª–µ–∫—Å', icon: 'üèòÔ∏è', type: 'residential', cls: 'b-residential', desc: '500 –º–µ—à–∫–∞–Ω—Ü—ñ–≤', x: 350, y: 220, w: 120, h: 110, buyCost: 150000, rentCost: 15000, income: 1800, pop: 500, happy: 10, reqLvl: 20 },
    
    // –ö–æ–º–µ—Ä—Ü—ñ—è
    { id: 'shop1', name: '–ü—Ä–æ–¥—É–∫—Ç–æ–≤–∏–π', icon: 'üè™', type: 'commercial', cls: 'b-commercial', desc: '–ú–∞–≥–∞–∑–∏–Ω', x: 500, y: 230, w: 70, h: 70, buyCost: 5000, rentCost: 500, income: 80, pop: 5, happy: 8, reqLvl: 3 },
    { id: 'shop2', name: '–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç', icon: 'üõí', type: 'commercial', cls: 'b-commercial', desc: '–í–µ–ª–∏–∫–∏–π –º–∞–≥–∞–∑–∏–Ω', x: 600, y: 230, w: 100, h: 90, buyCost: 35000, rentCost: 3500, income: 500, pop: 15, happy: 12, reqLvl: 12 },
    { id: 'mall', name: '–¢–†–¶', icon: 'üõçÔ∏è', type: 'commercial', cls: 'b-commercial', desc: '–¢–†–¶', x: 120, y: 450, w: 120, h: 105, buyCost: 200000, rentCost: 20000, income: 3000, pop: 30, happy: 15, reqLvl: 15 },
    { id: 'market', name: '–†–∏–Ω–æ–∫', icon: 'üè¨', type: 'commercial', cls: 'b-commercial', desc: '–ö—Ä–∏—Ç–∏–π —Ä–∏–Ω–æ–∫', x: 270, y: 450, w: 100, h: 95, buyCost: 80000, rentCost: 8000, income: 1200, pop: 20, happy: 8, reqLvl: 18 },
    
    // –û—Ñ—ñ—Å–∏
    { id: 'office1', name: '–û—Ñ—ñ—Å –¶–µ–Ω—Ç—Ä', icon: 'üèõÔ∏è', type: 'office', cls: 'b-office', desc: 'Elite (1/3)', x: 750, y: 220, w: 90, h: 85, buyCost: 50000, rentCost: 0, income: 500, pop: 25, happy: 5, reqLvl: 10, isOffice: true },
    { id: 'office2', name: '–ë—ñ–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä', icon: 'üè¢', type: 'office', cls: 'b-office', desc: 'Elite (2/3)', x: 550, y: 460, w: 95, h: 90, buyCost: 100000, rentCost: 0, income: 1000, pop: 40, happy: 3, reqLvl: 18, isOffice: true },
    { id: 'office3', name: '–û—Ñ—ñ—Å –î–µ—Ä–∂', icon: 'üèóÔ∏è', type: 'office', cls: 'b-office', desc: 'Elite (3/3)', x: 380, y: 1430, w: 90, h: 85, buyCost: 200000, rentCost: 0, income: 2000, pop: 50, happy: 5, reqLvl: 30, isOffice: true },
    { id: 'office4', name: '–•–º–∞—Ä–æ—á–æ—Å', icon: 'üèôÔ∏è', type: 'office', cls: 'b-office', desc: '–ë—ñ–∑–Ω–µ—Å —Ü–µ–Ω—Ç—Ä', x: 700, y: 500, w: 110, h: 150, buyCost: 500000, rentCost: 50000, income: 6000, pop: 100, happy: 8, reqLvl: 40, isOffice: false },
    
    // –†–æ–∑–≤–∞–≥–∏
    { id: 'cinema', name: '–ö—ñ–Ω–æ—Ç–µ–∞—Ç—Ä', icon: 'üé¨', type: 'entertainment', cls: 'b-entertainment', desc: '6 –∑–∞–ª—ñ–≤', x: 120, y: 700, w: 85, h: 75, buyCost: 30000, rentCost: 3000, income: 500, pop: 10, happy: 20, reqLvl: 7 },
    { id: 'stadium', name: '–°—Ç–∞–¥—ñ–æ–Ω', icon: 'üèüÔ∏è', type: 'entertainment', cls: 'b-entertainment', desc: '15000 –º—ñ—Å—Ü—å', x: 240, y: 680, w: 130, h: 120, buyCost: 500000, rentCost: 50000, income: 8000, pop: 50, happy: 30, reqLvl: 25 },
    { id: 'bowling', name: '–ë–æ—É–ª—ñ–Ω–≥', icon: 'üé≥', type: 'entertainment', cls: 'b-entertainment', desc: '–†–æ–∑–≤–∞–≥–∏', x: 400, y: 700, w: 80, h: 80, buyCost: 45000, rentCost: 4500, income: 700, pop: 8, happy: 18, reqLvl: 14 },
    { id: 'park', name: '–ü–∞—Ä–∫', icon: 'üå≥', type: 'entertainment', cls: 'b-entertainment', desc: '–ú—ñ—Å—å–∫–∏–π –ø–∞—Ä–∫', x: 550, y: 700, w: 120, h: 100, buyCost: 60000, rentCost: 6000, income: 400, pop: 0, happy: 25, reqLvl: 10 },
    
    // –û—Å–≤—ñ—Ç–∞
    { id: 'school', name: '–®–∫–æ–ª–∞', icon: 'üè´', type: 'education', cls: 'b-education', desc: '–®–∫–æ–ª–∞', x: 120, y: 950, w: 85, h: 75, buyCost: 25000, rentCost: 2500, income: 300, pop: 30, happy: 12, reqLvl: 5 },
    { id: 'college', name: '–ö–æ–ª–µ–¥–∂', icon: 'üéì', type: 'education', cls: 'b-education', desc: '–°–µ—Ä–µ–¥–Ω—è –æ—Å–≤—ñ—Ç–∞', x: 240, y: 950, w: 90, h: 85, buyCost: 80000, rentCost: 8000, income: 1000, pop: 50, happy: 15, reqLvl: 20 },
    { id: 'library', name: '–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞', icon: 'üìö', type: 'education', cls: 'b-education', desc: '–ö–Ω–∏–≥–æ—Å—Ö–æ–≤–∏—â–µ', x: 360, y: 950, w: 80, h: 80, buyCost: 15000, rentCost: 1500, income: 200, pop: 5, happy: 18, reqLvl: 8 },
    
    // –ú–µ–¥–∏—Ü–∏–Ω–∞
    { id: 'hospital', name: '–õ—ñ–∫–∞—Ä–Ω—è', icon: 'üè•', type: 'medical', cls: 'b-medical', desc: '–õ—ñ–∫–∞—Ä–Ω—è', x: 400, y: 940, w: 100, h: 95, buyCost: 150000, rentCost: 15000, income: 2000, pop: 50, happy: 20, reqLvl: 15 },
    { id: 'clinic_small', name: '–ö–ª—ñ–Ω—ñ–∫–∞', icon: 'üíä', type: 'medical', cls: 'b-medical', desc: '–ú–µ–¥–∏—á–Ω–∏–π —Ü–µ–Ω—Ç—Ä', x: 530, y: 950, w: 80, h: 80, buyCost: 40000, rentCost: 4000, income: 600, pop: 20, happy: 12, reqLvl: 12 },
    
    // –ü—Ä–æ–º–∏—Å–ª–æ–≤—ñ—Å—Ç—å
    { id: 'factory', name: '–ó–∞–≤–æ–¥', icon: 'üè≠', type: 'industrial', cls: 'b-industrial', desc: '–ó–∞–≤–æ–¥', x: 120, y: 1200, w: 100, h: 85, buyCost: 80000, rentCost: 8000, income: 1500, pop: 40, happy: -5, reqLvl: 12 },
    { id: 'warehouse', name: '–°–∫–ª–∞–¥', icon: 'üì¶', type: 'industrial', cls: 'b-industrial', desc: '–õ–æ–≥—ñ—Å—Ç–∏–∫–∞', x: 250, y: 1200, w: 90, h: 80, buyCost: 35000, rentCost: 3500, income: 600, pop: 15, happy: 0, reqLvl: 10 },
    { id: 'powerplant', name: '–ï–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ—è', icon: '‚ö°', type: 'industrial', cls: 'b-industrial', desc: '–ï–Ω–µ—Ä–≥—ñ—è', x: 380, y: 1200, w: 110, h: 100, buyCost: 300000, rentCost: 30000, income: 5000, pop: 30, happy: -10, reqLvl: 35 },
    
    // –î–µ—Ä–∂–∞–≤–Ω—ñ
    { id: 'police', name: '–ü–æ–ª—ñ—Ü—ñ—è', icon: 'üëÆ', type: 'government', cls: 'b-government', desc: '–ë–µ–∑–ø–µ–∫–∞', x: 550, y: 1200, w: 80, h: 80, buyCost: 60000, rentCost: 6000, income: 400, pop: 10, happy: 15, reqLvl: 14 },
    { id: 'fire', name: '–ü–æ–∂–µ–∂–Ω–∞', icon: 'üöí', type: 'government', cls: 'b-government', desc: '–†—è—Ç—É–≤–∞–ª—å–Ω–∏–∫–∏', x: 660, y: 1200, w: 80, h: 80, buyCost: 55000, rentCost: 5500, income: 350, pop: 8, happy: 15, reqLvl: 13 },
    { id: 'admin', name: '–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—è', icon: 'üèõÔ∏è', type: 'government', cls: 'b-government', desc: '–ú–µ—Ä—ñ—è', x: 770, y: 1200, w: 100, h: 90, buyCost: 200000, rentCost: 20000, income: 1500, pop: 20, happy: 10, reqLvl: 28 },
    
    // –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ
    { id: 'church', name: '–¶–µ—Ä–∫–≤–∞', icon: '‚õ™', type: 'special', cls: 'b-special', desc: '–î—É—Ö–æ–≤–Ω–∏–π —Ü–µ–Ω—Ç—Ä', x: 900, y: 220, w: 80, h: 100, buyCost: 100000, rentCost: 10000, income: 500, pop: 0, happy: 25, reqLvl: 16 },
    { id: 'museum', name: '–ú—É–∑–µ–π', icon: 'üèõÔ∏è', type: 'special', cls: 'b-special', desc: '–Ü—Å—Ç–æ—Ä—ñ—è', x: 1000, y: 220, w: 100, h: 80, buyCost: 120000, rentCost: 12000, income: 800, pop: 5, happy: 22, reqLvl: 22 }
];

// –ö–≤–∞—Ä—Ç–∞–ª–∏
const quarters = [
    { id: 'center', name: '–¶–ï–ù–¢–†', x: 80, y: 180, w: 900, h: 200, color: 'rgba(255,215,0,.06)' },
    { id: 'trade', name: '–¢–û–†–ì–û–í–ò–ô', x: 80, y: 410, w: 700, h: 180, color: 'rgba(230,74,25,.05)' },
    { id: 'fun', name: '–†–û–ó–í–ê–ì–ò', x: 80, y: 650, w: 650, h: 200, color: 'rgba(142,36,170,.05)' },
    { id: 'edu', name: '–û–°–í–Ü–¢–ê', x: 80, y: 900, w: 650, h: 180, color: 'rgba(30,136,229,.05)' },
    { id: 'ind', name: '–ü–†–û–ú–ó–û–ù–ê', x: 80, y: 1160, w: 800, h: 200, color: 'rgba(84,110,122,.05)' },
    { id: 'gov', name: '–£–†–Ø–î', x: 500, y: 1160, w: 500, h: 180, color: 'rgba(0,137,123,.05)' }
];

// ========== –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø ==========
const ACC_KEY = 'cli_accounts';
const SESS_KEY = 'cli_session';

function getAccounts() { return JSON.parse(localStorage.getItem(ACC_KEY) || '{}'); }
function saveAccounts(acc) { localStorage.setItem(ACC_KEY, JSON.stringify(acc)); }
function getSession() { return JSON.parse(localStorage.getItem(SESS_KEY) || 'null'); }
function saveSession(s) { localStorage.setItem(SESS_KEY, JSON.stringify(s)); }

// ========== –õ–û–ì–Ü–ù ==========
let loginMode = 'login';
let sessionStart = Date.now();

function updateLoginUI() {
    const accs = getAccounts();
    const hasAny = Object.keys(accs).length > 0;
    if (hasAny) {
        loginMode = 'login';
        $('login-title').innerText = '–í–•–Ü–î';
        $('login-btn').style.display = 'none';
        $('register-btn').style.display = 'none';
        $('login-toggle').innerText = '–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É? –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è';
        $('login-toggle').style.display = 'block';
    } else {
        loginMode = 'register';
        $('login-title').innerText = '–†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø';
        $('login-btn').style.display = 'none';
        $('register-btn').style.display = 'none';
        $('login-toggle').style.display = 'none';
    }
    chkLogin();
}

function toggleLoginMode() {
    loginMode = loginMode === 'login' ? 'register' : 'login';
    $('login-title').innerText = loginMode === 'login' ? '–í–•–Ü–î' : '–†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø';
    $('login-toggle').innerText = loginMode === 'login' ? '–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É? –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è' : '–Ñ –∞–∫–∞—É–Ω—Ç? –£–≤—ñ–π—Ç–∏';
    $('login-error').innerText = '';
    chkLogin();
}

function chkLogin() {
    const n = $('nickname').value.trim();
    const p = $('password').value.trim();
    const ok = n && p;
    if (loginMode === 'login') {
        $('login-btn').style.display = ok ? 'inline-block' : 'none';
        $('register-btn').style.display = 'none';
    } else {
        $('register-btn').style.display = ok ? 'inline-block' : 'none';
        $('login-btn').style.display = 'none';
    }
}

$('nickname').addEventListener('input', () => { $('login-error').innerText = ''; chkLogin(); });
$('password').addEventListener('input', () => { $('login-error').innerText = ''; chkLogin(); });

function doLogin() {
    const nick = $('nickname').value.trim();
    const pw = $('password').value;
    const accs = getAccounts();
    if (!accs[nick]) { $('login-error').innerText = '‚ùå –ê–∫–∞—É–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'; return; }
    if (accs[nick].password !== pw) { $('login-error').innerText = '‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å'; return; }
    P = { ...defaultPlayer(), ...accs[nick].data, nick };
    if (!P.businesses) P.businesses = [];
    if (!P.cb) P.cb = {};
    if (!P.daily) P.daily = { streak: 0, lastClaim: 0 };
    if (!P.totalTime) P.totalTime = 0;
    saveSession({ nick, loginTime: Date.now() });
    sessionStart = Date.now();
    go();
}

function doRegister() {
    const nick = $('nickname').value.trim();
    const pw = $('password').value;
    if (nick.length < 2) { $('login-error').innerText = '‚ùå –ù—ñ–∫ –º—ñ–Ω. 2 —Å–∏–º–≤–æ–ª–∏'; return; }
    if (pw.length < 3) { $('login-error').innerText = '‚ùå –ü–∞—Ä–æ–ª—å –º—ñ–Ω. 3 —Å–∏–º–≤–æ–ª–∏'; return; }
    const accs = getAccounts();
    if (accs[nick]) { $('login-error').innerText = '‚ùå –¢–∞–∫–∏–π –Ω—ñ–∫ –∑–∞–π–Ω—è—Ç–∏–π'; return; }
    P = defaultPlayer();
    P.nick = nick;
    accs[nick] = { password: pw, data: { ...P } };
    saveAccounts(accs);
    saveSession({ nick, loginTime: Date.now() });
    sessionStart = Date.now();
    toast('üéâ', `–ê–∫–∞—É–Ω—Ç <strong>${nick}</strong> —Å—Ç–≤–æ—Ä–µ–Ω–æ!`);
    go();
}

function defaultPlayer() {
    return {
        nick: 'Player',
        balance: 5000,
        level: 1,
        xp: 0,
        hasLicense: false,
        opened: 0,
        avatarData: null,
        businesses: [],
        cb: {},
        daily: { streak: 0, lastClaim: 0 },
        totalTime: 0
    };
}

function logoutAcc() {
    closeSettings();
    P.totalTime = (P.totalTime || 0) + Math.floor((Date.now() - sessionStart) / 1000);
    savePlayerData();
    localStorage.removeItem(SESS_KEY);
    location.reload();
}

function resetProgress() {
    const accs = getAccounts();
    const nick = P.nick;
    const pw = accs[nick]?.password;
    P = defaultPlayer();
    P.nick = nick;
    accs[nick] = { password: pw, data: { ...P } };
    saveAccounts(accs);
    location.reload();
}

let P = defaultPlayer();
let spinning = false;

function savePlayerData() {
    const accs = getAccounts();
    if (accs[P.nick]) {
        accs[P.nick].data = { ...P };
        saveAccounts(accs);
    }
}

function save() {
    savePlayerData();
    updateUI();
}

window.onload = () => {
    updateLoginUI();
    const sess = getSession();
    if (sess) {
        const accs = getAccounts();
        if (accs[sess.nick]) {
            P = { ...defaultPlayer(), ...accs[sess.nick].data, nick: sess.nick };
            if (!P.businesses) P.businesses = [];
            if (!P.cb) P.cb = {};
            if (!P.daily) P.daily = { streak: 0, lastClaim: 0 };
            if (!P.totalTime) P.totalTime = 0;
            sessionStart = Date.now();
            go();
        }
    }
};

window.addEventListener('beforeunload', () => {
    P.totalTime = (P.totalTime || 0) + Math.floor((Date.now() - sessionStart) / 1000);
    savePlayerData();
});

function go() {
    $('login-screen').classList.add('hidden');
    $('game-ui').style.display = 'flex';
    initAudio();
    buildIdle();
    updateUI();
    renderCat();
    renderMyBiz();
    buildCity();
    startLoops();
    updateDaily();
    startTimeTracker();
}

// ========== –Ü–ì–†–û–í–Ü –§–£–ù–ö–¶–Ü–á ==========
function buildIdle() {
    const t = $('track');
    t.innerHTML = '';
    const a = [...carDB.yellow, ...carDB.green];
    for (let i = 0; i < 10; i++) {
        const c = a[~~(Math.random() * a.length)];
        t.innerHTML += cardH(c, carDB.yellow.includes(c) ? 'yellow' : 'green');
    }
    t.style.transition = 'none';
    t.style.transform = `translateX(${460 - 192 * 2}px)`;
}

function getOwnedOffices() {
    return CB.filter(b => b.isOffice && P.cb[b.id] && P.cb[b.id].type === 'own').length;
}

function hasEliteAccess() {
    return getOwnedOffices() >= 3;
}

function updateUI() {
    $('ui-nick').innerText = P.nick;
    $('ui-bal').innerText = P.balance.toLocaleString();
    $('ui-lvl').innerText = P.level;
    $('ui-biz').innerText = P.businesses.length;
    let bc = Object.keys(P.cb).length;
    $('ui-bld').innerText = bc;
    $('p-nick').innerText = P.nick;
    $('p-lvl').innerText = P.level;
    $('p-lvl-badge').innerText = P.level;
    $('s-bal').innerText = P.balance.toLocaleString();
    $('s-opened').innerText = P.opened;
    
    const xpNeeded = P.level * 1000;
    $('p-xp').style.width = Math.min((P.xp / xpNeeded) * 100, 100) + '%';
    $('p-xp-current').innerText = P.xp;
    $('p-xp-max').innerText = xpNeeded;
    
    const ai = $('av-img'), ap = $('av-ph');
    if (P.avatarData) {
        ai.src = P.avatarData;
        ai.style.display = 'block';
        ap.style.display = 'none';
        $('ui-av').innerHTML = `<img src="${P.avatarData}" style="width:100%;height:100%;object-fit:cover">`;
    } else {
        ai.style.display = 'none';
        ap.style.display = 'block';
        $('ui-av').innerText = P.nick.charAt(0).toUpperCase();
    }
    
    $('lock-blue').style.display = (P.level >= 3 || P.hasLicense) ? 'none' : 'flex';
    $('lock-red').style.display = hasEliteAccess() ? 'none' : 'flex';
    
    const ti = getTotalInc();
    $('ui-inc').innerText = ti.toLocaleString();
    $('s-biz').innerText = P.businesses.length;
    $('s-inc').innerText = ti.toLocaleString();
    
    let pop = 0, hap = 0;
    Object.entries(P.cb).forEach(([id, d]) => {
        const b = CB.find(x => x.id === id);
        if (!b) return;
        pop += b.pop * (d.level || 1);
        hap += b.happy * (d.level || 1);
    });
    $('city-pop').innerText = pop.toLocaleString();
    $('city-happy').innerText = Math.max(0, Math.min(100, 50 + hap)) + '%';
    $('s-bld').innerText = bc;
    $('s-pop').innerText = pop.toLocaleString();
    $('city-offices').innerText = getOwnedOffices() + '/3';
}

$('av-in').addEventListener('change', e => {
    const f = e.target.files[0];
    if (f) {
        const r = new FileReader();
        r.onload = e => { P.avatarData = e.target.result; save(); };
        r.readAsDataURL(f);
    }
});

function switchTab(t) {
    document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(e => e.classList.remove('active'));
    $('tab-' + t).classList.add('active');
    const m = { auction: 0, monopoly: 1, city: 2, profile: 3 };
    document.querySelectorAll('.nav-btn')[m[t]].classList.add('active');
    $('main-bg').style.opacity = t === 'auction' ? '1' : '0';
    if (t === 'monopoly') { renderMyBiz(); renderCat(); }
    if (t === 'city') { buildCity(); }
    if (t === 'profile') updateDaily();
}

// ========== –©–û–î–ï–ù–ù–Ü –ù–ê–ì–û–†–û–î–ò ==========
const dailyRewards = [
    { day: 1, icon: 'ü™ô', amount: 100 },
    { day: 2, icon: 'üí∞', amount: 250 },
    { day: 3, icon: 'üíé', amount: 500 },
    { day: 4, icon: 'üéÅ', amount: 1000 },
    { day: 5, icon: 'üëë', amount: 2500 },
    { day: 6, icon: 'üèÜ', amount: 5000 },
    { day: 7, icon: 'üåü', amount: 10000 }
];

function updateDaily() {
    if (!P.daily) P.daily = { streak: 0, lastClaim: 0 };
    const now = new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
    const lastClaim = P.daily.lastClaim || 0;
    const lastDay = new Date(lastClaim);
    const lastDayStart = new Date(lastDay.getFullYear(), lastDay.getMonth(), lastDay.getDate()).getTime();
    const diff = (today - lastDayStart) / (1000 * 60 * 60 * 24);
    
    if (diff > 1 && P.daily.streak > 0) { P.daily.streak = 0; save(); }
    
    const canClaim = diff >= 1 || lastClaim === 0;
    const streak = P.daily.streak || 0;
    
    let html = '';
    for (let i = 0; i < 7; i++) {
        const r = dailyRewards[i];
        let cls = 'locked';
        if (i < streak) cls = 'claimed';
        else if (i === streak && canClaim) cls = 'current';
        html += `<div class="daily-day ${cls}"><div class="daily-day-num">–î–ï–ù–¨ ${r.day}</div><div class="daily-day-icon">${r.icon}</div><div class="daily-day-amount">${r.amount}</div></div>`;
    }
    $('daily-streak').innerHTML = html;
    
    if (canClaim && streak < 7) {
        $('daily-btn').className = 'daily-btn available';
        $('daily-btn').innerText = `üéÅ –ó–∞–±—Ä–∞—Ç–∏ ${dailyRewards[streak].amount} LGX`;
        $('daily-btn').disabled = false;
    } else {
        $('daily-btn').className = 'daily-btn claimed-btn';
        $('daily-btn').innerText = streak >= 7 ? '‚úÖ –í—Å—ñ –∑—ñ–±—Ä–∞–Ω–æ' : '‚úÖ –ó–∞–±—Ä–∞–Ω–æ';
        $('daily-btn').disabled = true;
    }
}

function claimDaily() {
    if (!P.daily) P.daily = { streak: 0, lastClaim: 0 };
    const streak = P.daily.streak || 0;
    if (streak >= 7) return;
    const reward = dailyRewards[streak];
    P.balance += reward.amount;
    P.daily.streak = streak + 1;
    P.daily.lastClaim = Date.now();
    save();
    playCash();
    toast('üéÅ', `+${reward.amount} LGX`);
    updateDaily();
}

function startTimeTracker() {
    setInterval(() => {
        const totalSec = (P.totalTime || 0) + Math.floor((Date.now() - sessionStart) / 1000);
        const h = Math.floor(totalSec / 3600);
        const m = Math.floor((totalSec % 3600) / 60);
        const s = totalSec % 60;
        $('time-total').innerText = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        
        const sessSec = Math.floor((Date.now() - sessionStart) / 1000);
        const sm = Math.floor(sessSec / 60);
        const ss = sessSec % 60;
        $('time-session').innerText = `${String(sm).padStart(2, '0')}:${String(ss).padStart(2, '0')}`;
    }, 1000);
}

// ========== –ú–û–ù–û–ü–û–õ–Ü–Ø ==========
function switchMT(t) {
    document.querySelectorAll('.monopoly-tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.monopoly-section').forEach(s => s.classList.remove('active'));
    if (t === 'my') {
        document.querySelectorAll('.monopoly-tab-btn')[0].classList.add('active');
        $('m-my').classList.add('active');
        renderMyBiz();
    } else {
        document.querySelectorAll('.monopoly-tab-btn')[1].classList.add('active');
        $('m-open').classList.add('active');
        renderCat();
    }
}

function calcBInc(b, t) {
    let inc = t.baseInc, bon = 0;
    (b.upgrades || []).forEach(u => {
        const up = bizUp[u];
        if (up) bon += up.bonus;
    });
    return Math.floor(inc * (1 + bon));
}

function getTotalInc() {
    let t = 0;
    P.businesses.forEach(b => {
        const tp = bizCat.find(x => x.id === b.id);
        if (tp) t += calcBInc(b, tp);
    });
    Object.entries(P.cb).forEach(([id]) => {
        t += calcBI(id);
    });
    return t;
}

function renderCat() {
    const g = $('biz-cat');
    if (!g) return;
    g.innerHTML = '';
    bizCat.forEach(b => {
        const o = P.businesses.find(x => x.id === b.id);
        const l = P.level < b.reqLvl;
        const p = P.balance < b.cost;
        let badge = o ? '<div class="biz-catalog-badge owned">‚úÖ</div>' : (l ? '<div class="biz-catalog-badge lock">üîí</div>' : '');
        g.innerHTML += `<div class="biz-catalog-card ${l && !o ? 'locked' : ''}">
            <div class="biz-catalog-lvl-badge">LVL ${b.reqLvl}+</div>
            ${badge}
            <div class="biz-catalog-icon">${b.icon}</div>
            <div class="biz-catalog-name">${b.name}</div>
            <div class="biz-catalog-desc">${b.desc}</div>
            <div class="biz-catalog-stats">
                <div class="biz-catalog-stat"><span class="biz-catalog-stat-label">–¶—ñ–Ω–∞</span><span class="biz-catalog-stat-value req">${b.cost.toLocaleString()}</span></div>
                <div class="biz-catalog-stat"><span class="biz-catalog-stat-label">–î–æ—Ö—ñ–¥</span><span class="biz-catalog-stat-value">${b.baseInc}</span></div>
            </div>
            <button class="biz-catalog-buy-btn" ${(l || o || p) ? 'disabled' : ''} onclick="buyBiz('${b.id}')">${o ? '‚úÖ –í—ñ–¥–∫—Ä–∏—Ç–æ' : (l ? 'üîí LVL ' + b.reqLvl : '–í—ñ–¥–∫—Ä–∏—Ç–∏')}</button>
        </div>`;
    });
}

function buyBiz(id) {
    const t = bizCat.find(x => x.id === id);
    if (!t || P.level < t.reqLvl || P.balance < t.cost || P.businesses.find(x => x.id === id)) return;
    P.balance -= t.cost;
    P.businesses.push({ id, purchaseTime: Date.now(), upgrades: [], totalEarned: 0 });
    save();
    renderCat();
    renderMyBiz();
    playCash();
    toast('üéâ', `<strong>${t.name}</strong> –≤—ñ–¥–∫—Ä–∏—Ç–æ!`);
    setTimeout(() => switchMT('my'), 500);
}

function renderMyBiz() {
    const c = $('my-biz-c');
    const tb = $('biz-total');
    if (!c) return;
    
    if (!P.businesses || !P.businesses.length) {
        c.innerHTML = '<div class="my-biz-empty"><div class="my-biz-empty-icon">üèóÔ∏è</div><div style="font-size:20px;font-weight:700">–ù–µ–º–∞—î –±—ñ–∑–Ω–µ—Å—ñ–≤</div></div>';
        if (tb) tb.style.display = 'none';
        return;
    }
    
    if (tb) {
        tb.style.display = 'block';
        $('biz-total-v').innerText = getTotalInc().toLocaleString() + ' LGX/10—Å';
    }
    
    c.innerHTML = '<div class="my-biz-grid">' + 
        P.businesses.map(b => {
            const t = bizCat.find(x => x.id === b.id);
            if (!t) return '';
            return `<div class="my-biz-card" onclick="openBP('${b.id}')">
                <div class="my-biz-card-header">
                    <div class="my-biz-avatar" style="background:${t.bg}">${t.icon}</div>
                    <div>
                        <div class="my-biz-name">${t.name}</div>
                        <div class="my-biz-category">${t.cat}</div>
                    </div>
                </div>
                <div class="my-biz-card-body">
                    <div class="my-biz-stat-row"><span class="my-biz-stat-label">–î–æ—Ö—ñ–¥</span><span class="my-biz-stat-value">${calcBInc(b, t)}</span></div>
                    <div class="my-biz-stat-row"><span class="my-biz-stat-label">–í—Å—å–æ–≥–æ</span><span class="my-biz-stat-value gold">${(b.totalEarned || 0).toLocaleString()}</span></div>
                    <div class="my-biz-income-bar"><div class="my-biz-income-fill" id="bar-${b.id}" style="width:0%"></div></div>
                </div>
            </div>`;
        }).join('') + 
    '</div>';
}

function openBP(id) {
    const b = P.businesses.find(x => x.id === id);
    const t = bizCat.find(x => x.id === id);
    if (!b || !t) return;
    
    const inc = calcBInc(b, t);
    const ups = Object.entries(bizUp).map(([uid, up]) => {
        const ow = (b.upgrades || []).includes(uid);
        const af = P.balance >= up.price;
        return `<button class="modal-upgrade-btn" ${(ow || !af) ? 'disabled' : ''} onclick="buyBU('${id}','${uid}')">
            <span class="upgrade-label">${up.icon} ${up.name} ${ow ? '‚úÖ' : ''}</span>
            <span>${ow ? '' : `<span class="upgrade-price">${up.price}</span>`} <span style="color:#666">${up.desc}</span></span>
        </button>`;
    }).join('');
    
    $('biz-modal-c').innerHTML = `<div class="modal-banner" style="${t.bg}"><div class="modal-banner-icon">${t.icon}</div><button class="modal-close" onclick="$('biz-modal').classList.remove('open');renderMyBiz()">‚úï</button></div>
    <div class="modal-body">
        <div class="modal-title" style="color:${t.color}">${t.name}</div>
        <div class="modal-subtitle">${t.cat}</div>
        <div class="modal-stats-grid">
            <div class="modal-stat"><div class="modal-stat-label">–î–æ—Ö—ñ–¥</div><div class="modal-stat-value green">${inc}</div></div>
            <div class="modal-stat"><div class="modal-stat-label">–í—Å—å–æ–≥–æ</div><div class="modal-stat-value gold">${(b.totalEarned || 0).toLocaleString()}</div></div>
        </div>
        <div class="modal-divider"></div>
        <div class="modal-upgrade-title">üîß –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è</div>
        ${ups}
        <button class="modal-action-btn red" onclick="if(confirm('–ü—Ä–æ–¥–∞—Ç–∏?')){P.businesses=P.businesses.filter(x=>x.id!=='${id}');P.balance+=${Math.floor(t.cost * 0.5)};save();$('biz-modal').classList.remove('open');renderMyBiz();renderCat()}">üóëÔ∏è –ü—Ä–æ–¥–∞—Ç–∏</button>
    </div>`;
    
    $('biz-modal').classList.add('open');
}

function buyBU(bid, uid) {
    const b = P.businesses.find(x => x.id === bid);
    const up = bizUp[uid];
    if (!b || !up || (b.upgrades || []).includes(uid) || P.balance < up.price) return;
    P.balance -= up.price;
    if (!b.upgrades) b.upgrades = [];
    b.upgrades.push(uid);
    save();
    playCash();
    toast('üîß', `<strong>${up.name}</strong> –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!`);
    openBP(bid);
}

// ========== –ú–Ü–°–¢–û (–í–ò–ü–†–ê–í–õ–ï–ù–û) ==========
function buildCity() {
    const map = $('cmap');
    if (!map) return;
    
    map.innerHTML = '';
    
    // –î–æ—Ä–æ–≥–∏
    const roads = [
        { x: 0, y: 170, w: 1800, h: 30 },
        { x: 0, y: 400, w: 1800, h: 30 },
        { x: 0, y: 640, w: 1800, h: 30 },
        { x: 0, y: 890, w: 1800, h: 30 },
        { x: 0, y: 1160, w: 1800, h: 30 },
        { x: 0, y: 1430, w: 1800, h: 30 },
        { x: 60, y: 0, w: 30, h: 1800 },
        { x: 450, y: 0, w: 30, h: 1800 },
        { x: 850, y: 0, w: 30, h: 1800 },
        { x: 1250, y: 0, w: 30, h: 1800 }
    ];
    
    roads.forEach(r => {
        const d = document.createElement('div');
        d.className = r.w > r.h ? 'road-h' : 'road-v';
        d.style.cssText = `left:${r.x}px;top:${r.y}px;width:${r.w}px;height:${r.h}px`;
        map.appendChild(d);
    });
    
    // –ö–≤–∞—Ä—Ç–∞–ª–∏
    quarters.forEach(q => {
        const d = document.createElement('div');
        d.className = 'quarter';
        d.style.cssText = `left:${q.x}px;top:${q.y}px;width:${q.w}px;height:${q.h}px;background:${q.color}`;
        d.innerHTML = `<div class="quarter-label">${q.name}</div>`;
        map.appendChild(d);
    });
    
    // –ë—É–¥—ñ–≤–ª—ñ
    CB.forEach(b => {
        const d = document.createElement('div');
        d.className = `building ${b.cls}`;
        d.id = `bld-${b.id}`;
        d.style.cssText = `left:${b.x}px;top:${b.y}px;width:${b.w}px;height:${b.h}px`;
        
        const s = P.cb[b.id];
        let sc = 'available';
        if (s) sc = s.type === 'own' ? 'owned' : 'rented';
        else if (P.level < b.reqLvl) sc = 'locked';
        
        d.innerHTML = `<div class="building-status ${sc}"></div>
            <div class="building-icon">${b.icon}</div>
            <div class="building-name">${b.name}</div>
            ${s ? `<div class="building-level-badge">LV${s.level || 1}</div>` : ''}
            ${s ? `<div class="building-income-float">+${calcBI(b.id)}</div>` : ''}`;
        
        d.onclick = () => openBM(b.id);
        map.appendChild(d);
    });
    
    // –ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–∞—Ä—Ç–∏
    const w = $('cmw');
    let drag = false, sx, sy, sl, st2;
    
    w.onmousedown = e => {
        drag = true;
        sx = e.pageX;
        sy = e.pageY;
        sl = w.scrollLeft;
        st2 = w.scrollTop;
        w.style.cursor = 'grabbing';
    };
    
    w.onmouseup = w.onmouseleave = () => {
        drag = false;
        w.style.cursor = 'grab';
    };
    
    w.onmousemove = e => {
        if (!drag) return;
        e.preventDefault();
        w.scrollLeft = sl - (e.pageX - sx);
        w.scrollTop = st2 - (e.pageY - sy);
    };
}

function calcBI(id) {
    const b = CB.find(x => x.id === id);
    const d = P.cb[id];
    if (!b || !d) return 0;
    return Math.floor(b.income * (d.level || 1) * (d.type === 'own' ? 1 : 0.6));
}

function openBM(id) {
    const b = CB.find(x => x.id === id);
    if (!b) return;
    
    const s = P.cb[id];
    const locked = P.level < b.reqLvl;
    const inc = calcBI(id);
    
    let officeBonus = '';
    if (b.isOffice) {
        const owned = getOwnedOffices();
        officeBonus = `<div class="bm-office-bonus">
            <div class="bm-office-bonus-label">üè¢ ELITE –î–û–°–¢–£–ü</div>
            <div class="bm-office-bonus-value">${owned}/3 ${owned >= 3 ? '‚úÖ' : 'üîí'}</div>
        </div>`;
    }
    
    let acts = '';
    if (locked) {
        acts = `<div style="text-align:center;color:#EF5350;padding:20px">üîí –ü–æ—Ç—Ä—ñ–±–µ–Ω —Ä—ñ–≤–µ–Ω—å ${b.reqLvl}</div>`;
    } else if (!s) {
        acts = `${b.buyCost > 0 ? `<button class="bm-action-btn buy" onclick="cA('${id}','buy')" ${P.balance < b.buyCost ? 'disabled' : ''}><span class="bm-action-left">üè† –ö—É–ø–∏—Ç–∏</span><span class="bm-action-price">${b.buyCost.toLocaleString()}</span></button>` : ''}
                ${b.rentCost > 0 ? `<button class="bm-action-btn rent" onclick="cA('${id}','rent')" ${P.balance < b.rentCost ? 'disabled' : ''}><span class="bm-action-left">üìã –û—Ä–µ–Ω–¥—É–≤–∞—Ç–∏</span><span class="bm-action-price">${b.rentCost.toLocaleString()}</span></button>` : ''}`;
    } else {
        const uc = Math.floor((b.buyCost || 5000) * (s.level || 1) * 0.5);
        acts = `<button class="bm-action-btn upgrade" onclick="cA('${id}','upgrade')" ${P.balance < uc ? 'disabled' : ''}>
                    <span class="bm-action-left">‚¨ÜÔ∏è LV${(s.level || 1) + 1}</span>
                    <span class="bm-action-price">${uc.toLocaleString()}</span>
                </button>
                <button class="bm-action-btn collect" onclick="cA('${id}','collect')" ${(s.accInc || 0) <= 0 ? 'disabled' : ''}>
                    <span class="bm-action-left">üí∞ –ó—ñ–±—Ä–∞—Ç–∏</span>
                    <span class="bm-action-price">${(s.accInc || 0).toLocaleString()}</span>
                </button>
                <button class="bm-action-btn sell" onclick="cA('${id}','sell')">
                    <span class="bm-action-left">üóëÔ∏è ${s.type === 'own' ? '–ü—Ä–æ–¥–∞—Ç–∏' : '–†–æ–∑—ñ—Ä–≤–∞—Ç–∏'}</span>
                </button>`;
    }
    
    const tl = {
        residential: 'üèòÔ∏è –ñ–∏—Ç–ª–æ',
        commercial: 'üõí –ö–æ–º–µ—Ä—Ü—ñ—è',
        industrial: 'üè≠ –ü—Ä–æ–º–∏—Å–ª–æ–≤—ñ—Å—Ç—å',
        entertainment: 'üé≠ –†–æ–∑–≤–∞–≥–∏',
        government: 'üèõÔ∏è –î–µ—Ä–∂',
        education: 'üéì –û—Å–≤—ñ—Ç–∞',
        medical: 'üè• –ú–µ–¥–∏—Ü–∏–Ω–∞',
        office: 'üè¢ –û—Ñ—ñ—Å',
        special: '‚≠ê –û—Å–æ–±–ª–∏–≤–µ'
    };
    
    $('bld-modal-c').innerHTML = `<div class="bm-header">
        <div class="bm-header-icon ${b.cls}">${b.icon}</div>
        <div style="flex:1">
            <div class="bm-header-name">${b.name}</div>
            <div class="bm-header-type">${tl[b.type] || b.type}</div>
            <div class="bm-header-status" style="background:${s ? 'rgba(76,175,80,.15)' : 'rgba(255,255,255,.06)'};color:${s ? '#66BB6A' : '#888'}">${s ? '‚úÖ –í–ª–∞—Å–Ω—ñ—Å—Ç—å' : 'üè∑Ô∏è –î–æ—Å—Ç—É–ø–Ω–æ'}</div>
        </div>
        <button class="modal-close" onclick="$('bld-modal').classList.remove('open')">‚úï</button>
    </div>
    <div class="bm-body">
        <div class="bm-desc">${b.desc}</div>
        ${officeBonus}
        <div class="bm-stats">
            <div class="bm-stat"><div class="bm-stat-label">–î–û–•–Ü–î</div><div class="bm-stat-value" style="color:#4CAF50">${s ? inc : '‚Äî'}</div></div>
            <div class="bm-stat"><div class="bm-stat-label">–ù–ê–°–ï–õ–ï–ù–ù–Ø</div><div class="bm-stat-value" style="color:#42A5F5">+${b.pop}</div></div>
            <div class="bm-stat"><div class="bm-stat-label">–©–ê–°–¢–Ø</div><div class="bm-stat-value" style="color:${b.happy >= 0 ? '#FFD700' : '#EF5350'}">${b.happy >= 0 ? '+' : ''}${b.happy}</div></div>
        </div>
        <div class="bm-actions">${acts}</div>
    </div>`;
    
    $('bld-modal').classList.add('open');
}

function cA(id, a) {
    const b = CB.find(x => x.id === id);
    if (!b) return;
    
    let s = P.cb[id];
    
    switch (a) {
        case 'buy':
            if (P.balance < b.buyCost) return;
            P.balance -= b.buyCost;
            P.cb[id] = { type: 'own', level: 1, accInc: 0 };
            toast('üè†', `<strong>${b.name}</strong> –∫—É–ø–ª–µ–Ω–æ!`);
            playCash();
            break;
            
        case 'rent':
            if (P.balance < b.rentCost) return;
            P.balance -= b.rentCost;
            P.cb[id] = { type: 'rent', level: 1, accInc: 0, lastRent: Date.now() };
            toast('üìã', `<strong>${b.name}</strong> –æ—Ä–µ–Ω–¥–æ–≤–∞–Ω–æ!`);
            playCash();
            break;
            
        case 'upgrade':
            s = P.cb[id];
            if (!s) return;
            const c = Math.floor((b.buyCost || 5000) * (s.level || 1) * 0.5);
            if (P.balance < c) return;
            P.balance -= c;
            s.level = (s.level || 1) + 1;
            toast('‚¨ÜÔ∏è', `LV${s.level}!`);
            playCash();
            break;
            
        case 'collect':
            s = P.cb[id];
            if (!s || (s.accInc || 0) <= 0) return;
            P.balance += (s.accInc || 0);
            toast('üí∞', `+${(s.accInc || 0).toLocaleString()}`);
            s.accInc = 0;
            playCash();
            break;
            
        case 'sell':
            s = P.cb[id];
            if (!s || !confirm('–í–ø–µ–≤–Ω–µ–Ω—ñ?')) return;
            if (s.type === 'own') P.balance += Math.floor(b.buyCost * 0.5);
            delete P.cb[id];
            toast('üóëÔ∏è', `${b.name} –ø—Ä–æ–¥–∞–Ω–æ`);
            break;
    }
    
    save();
    buildCity();
    openBM(id);
}

// ========== –¶–ò–ö–õ–ò ==========
function startLoops() {
    setInterval(() => {
        let e = 0;
        
        P.businesses.forEach(b => {
            const t = bizCat.find(x => x.id === b.id);
            if (!t) return;
            const inc = calcBInc(b, t);
            b.totalEarned = (b.totalEarned || 0) + inc;
            e += inc;
        });
        
        Object.entries(P.cb).forEach(([id, d]) => {
            const inc = calcBI(id);
            d.accInc = (d.accInc || 0) + inc;
            e += inc;
        });
        
        P.balance += e;
        P.xp += 10;
        
        if (P.xp >= P.level * 1000) {
            P.level++;
            P.xp -= P.level * 1000;
            setTimeout(() => toast('üéä', `LVL ${P.level}!`), 500);
        }
        
        save();
        renderMyBiz();
    }, 10000);
    
    let bp = 0;
    setInterval(() => {
        bp = (bp + 10) % 100;
        P.businesses.forEach(b => {
            const bar = $('bar-' + b.id);
            if (bar) bar.style.width = bp + '%';
        });
    }, 1000);
}

// ========== –†–£–õ–ï–¢–ö–ê ==========
function spin(type, price) {
    if (spinning) return;
    
    if (type === 'blue' && P.level < 3 && !P.hasLicense) return toast('üîí', '–ü–æ—Ç—Ä—ñ–±–µ–Ω LVL 3');
    if (type === 'red' && !hasEliteAccess()) return toast('üîí', '–ü–æ—Ç—Ä—ñ–±–Ω–æ 3 –æ—Ñ—ñ—Å–∏');
    if (P.balance < price) return toast('üí∞', '–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ!');
    
    initAudio();
    P.balance -= price;
    P.opened++;
    save();
    
    spinning = true;
    const wm = $('win-message');
    wm.innerText = '';
    wm.classList.remove('win-animated');
    
    const win = getCar(type);
    let html = '';
    
    for (let i = 0; i < 60; i++) {
        if (i === 45) html += cardH(win.car, win.tier);
        else {
            const r = getCar(type);
            html += cardH(r.car, r.tier);
        }
    }
    
    const t = $('track');
    t.innerHTML = html;
    t.style.transition = 'none';
    t.style.transform = 'translateX(0)';
    
    const tx = -((45 * 192) - 460 + 96 + (Math.random() - 0.5) * 192 * 0.6);
    const dur = 6000;
    let last = -1;
    const st = performance.now();
    
    function tk() {
        if (!spinning) return;
        const el = performance.now() - st;
        const p = Math.min(el / dur, 1);
        const e = 1 - Math.pow(1 - p, 3);
        const cx = tx * e;
        const ci = Math.floor(Math.abs(cx) / 192);
        
        if (ci !== last) {
            last = ci;
            playTick(600 + (1 - p) * 600, 0.02 + p * 0.03);
        }
        
        if (p < 1) requestAnimationFrame(tk);
    }
    
    requestAnimationFrame(() => requestAnimationFrame(() => {
        t.style.transition = `transform ${dur}ms cubic-bezier(0.15,0.85,0.2,1)`;
        t.style.transform = `translateX(${tx}px)`;
    }));
    
    setTimeout(() => {
        spinning = false;
        const cards = t.querySelectorAll('.car-card');
        if (cards[45]) cards[45].classList.add('winner');
        
        playWin();
        const profit = win.car.price;
        P.balance += profit;
        P.xp += 100;
        
        if (P.xp >= P.level * 1000) {
            P.level++;
            P.xp -= P.level * 1000;
            setTimeout(() => toast('üéä', `LVL ${P.level}!`), 500);
        }
        
        wm.innerHTML = `üéâ <span style="color:${tierC(win.tier)}">${win.car.name}</span> +${profit.toLocaleString()}`;
        wm.style.color = tierC(win.tier);
        wm.classList.add('win-animated');
        save();
    }, dur + 300);
}

function getCar(t) {
    let p = ['yellow'];
    if (t === 'green') p = ['green', 'yellow'];
    if (t === 'blue') p = ['blue', 'green'];
    if (t === 'red') p = ['red', 'blue'];
    const tier = p[~~(Math.random() * p.length)];
    return { car: carDB[tier][~~(Math.random() * carDB[tier].length)], tier };
}

function cardH(c, t) {
    const tierNames = { yellow: 'BASIC', green: 'STANDARD', blue: 'PREMIUM', red: 'ELITE' };
    return `<div class="car-card rarity-${t}">
        <img src="${c.img}" loading="lazy">
        <div class="car-name">${c.name}</div>
        <div class="car-rarity-label ${t}">${tierNames[t]}</div>
        <div class="car-price ${t}">${c.price.toLocaleString()} LGX</div>
    </div>`;
}

function tierC(t) {
    return { yellow: '#FFD700', green: '#4CAF50', blue: '#2196F3', red: '#EF5350' }[t];
}

// ========== TOAST ==========
function toast(i, t) {
    const c = $('toast-container');
    const d = document.createElement('div');
    d.className = 'toast';
    d.innerHTML = `<span class="toast-icon">${i}</span><span class="toast-text">${t}</span>`;
    c.appendChild(d);
    setTimeout(() => d.remove(), 3100);
}

// ========== –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø ==========
function openSettings() { $('settings-overlay').classList.add('open'); }
function closeSettings() { $('settings-overlay').classList.remove('open'); }

$('settings-overlay').addEventListener('click', function(e) {
    if (e.target === this) closeSettings();
});

$('biz-modal').addEventListener('click', function(e) {
    if (e.target === this) { this.classList.remove('open'); renderMyBiz(); }
});

$('bld-modal').addEventListener('click', function(e) {
    if (e.target === this) this.classList.remove('open');
});

// ========== DEV MODE ==========
function chkDev() {
    if ($('dev-pw').value === '1122') {
        $('dev-auth').classList.remove('open');
        $('dev-con').classList.add('open');
        $('dev-st').innerText = '';
    } else {
        $('dev-err').innerText = '‚ùå';
        $('dev-pw').value = '';
    }
}

$('dev-pw').addEventListener('keydown', e => {
    if (e.key === 'Enter') chkDev();
});

$('dev-auth').addEventListener('click', function(e) {
    if (e.target === this) this.classList.remove('open');
});

$('dev-con').addEventListener('click', function(e) {
    if (e.target === this) this.classList.remove('open');
});

function dS(m) {
    $('dev-st').innerText = m;
    setTimeout(() => $('dev-st').innerText = '', 2500);
}
</script>
</body>
</html>
