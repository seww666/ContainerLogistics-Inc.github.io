<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Container Logistics Inc - Final Version</title>
    <style>
        /* --- –ó–ê–ì–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #111116;
            color: white;
            overflow: hidden;
            user-select: none;
        }

        /* --- –§–û–ù –ì–†–ò --- */
        .bg-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.9)), 
                        url('https://ukr-china.com/wp-content/uploads/2023/09/gdansk-port-e1695421748375.jpg');
            background-size: cover;
            background-position: center;
            z-index: -1;
            transition: opacity 0.3s;
        }

        /* --- –ï–ö–†–ê–ù –í–•–û–î–£ --- */
        .login-wrapper {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #4b4b5e 0%, #2a2a35 40%, #111116 100%);
            z-index: 1000;
            transition: opacity 0.5s;
        }
        .hidden { display: none !important; }

        .logo-container {
            width: 150px; height: 150px;
            background-color: #0d0d10; border-radius: 35px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .logo-container img { width: 90%; object-fit: contain; }

        .login-card {
            background-color: #111115; padding: 40px; border-radius: 30px;
            width: 300px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        }
        input {
            width: 90%; padding: 12px; margin: 10px 0 20px 0;
            border-radius: 15px; border: none; text-align: center; font-size: 16px;
        }
        .btn {
            padding: 12px 30px; border-radius: 15px; border: none;
            font-size: 16px; font-weight: bold; cursor: pointer;
            transition: 0.2s; color: white;
        }
        .btn-green { background-color: #4CAF50; }
        .btn-green:hover { background-color: #45a049; }

        /* --- –ì–û–õ–û–í–ù–ò–ô –Ü–ù–¢–ï–†–§–ï–ô–° --- */
        #game-ui {
            display: none;
            width: 100%; height: 100%;
            flex-direction: column;
            position: relative;
            z-index: 10;
        }

        /* Header */
        .header-stats {
            height: 80px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px;
            background: rgba(20, 20, 25, 0.95);
            border-bottom: 1px solid #333;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .user-info { display: flex; flex-direction: column; }
        .user-name { font-size: 20px; font-weight: bold; }
        
        .balance-box { text-align: right; }
        .balance-amount { font-size: 28px; color: #9C27B0; font-weight: bold; }
        .currency-label { font-size: 12px; color: #777; }

        /* Navigation */
        .nav-tabs {
            display: flex; justify-content: center; gap: 20px;
            margin-top: 20px; margin-bottom: 20px;
        }
        .nav-btn {
            background: rgba(255,255,255,0.05);
            padding: 10px 30px; border-radius: 20px;
            cursor: pointer; transition: 0.3s;
            border: 1px solid transparent; color: #aaa;
        }
        .nav-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-btn.active {
            background: #9C27B0; color: white;
            box-shadow: 0 0 15px rgba(156, 39, 176, 0.4);
        }

        /* --- –õ–û–ì–Ü–ö–ê –í–ö–õ–ê–î–û–ö --- */
        .tab-content {
            flex: 1;
            display: none;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            padding-bottom: 20px;
            width: 100%;
        }
        
        .tab-content.active {
            display: flex !important;
        }

        /* Roulette & Shop */
        .roulette-wrapper { position: relative; margin: 20px 0; transform: scale(0.9); }
        .indicator {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; 
            border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 20px solid #9C27B0;
            z-index: 20; filter: drop-shadow(0 2px 4px black);
        }
        .roulette-container {
            width: 900px; height: 240px;
            background: #1a1a20; border: 4px solid #333; border-radius: 20px;
            position: relative; overflow: hidden; box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }
        .center-line {
            position: absolute; left: 50%; top: 0; bottom: 0; width: 4px;
            background: rgba(156, 39, 176, 0.5); z-index: 10; transform: translateX(-50%);
        }
        .roulette-track { display: flex; height: 100%; align-items: center; position: absolute; left: 0; }
        
        .car-card {
            width: 180px; height: 210px; margin: 0 5px;
            background: #252530; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            border: 2px solid #444; flex-shrink: 0; padding: 10px; box-sizing: border-box;
        }
        .car-card img { width: 100%; height: 110px; object-fit: cover; border-radius: 8px; background: #000; }
        .car-name { font-size: 13px; font-weight: bold; margin-top:5px; color: #ddd; text-align: center; }
        .car-price { font-size: 16px; color: #9C27B0; font-weight: bold; }
        
        .container-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; max-width: 1000px; }
        .container-item {
            background: rgba(30,30,35,0.9); padding: 15px; border-radius: 15px;
            text-align: center; cursor: pointer; transition: 0.2s; position: relative;
            border: 2px solid transparent;
        }
        .container-item:hover { transform: translateY(-5px); background: rgba(40,40,45,1); }
        .container-item img { width: 80px; height: 80px; object-fit: contain; }
        .container-price { font-size: 18px; font-weight: bold; color: #9C27B0; margin-top: 5px; }
        .locked-overlay {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.7); border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #aaa; font-size: 12px;
        }

        .shop-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 900px; }
        .shop-card {
            background: #1e1e24; padding: 20px; border-radius: 15px; text-align: center;
            border: 1px solid #333; transition: 0.2s;
        }
        .shop-card:hover { border-color: #9C27B0; }
        .shop-icon { font-size: 40px; margin-bottom: 10px; }
        .shop-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: white; }
        .shop-desc { font-size: 12px; color: #aaa; margin-bottom: 15px; height: 40px; }
        .shop-btn {
            background: #9C27B0; color: white; border: none; padding: 8px 20px;
            border-radius: 10px; cursor: pointer; width: 100%;
        }
        .shop-btn:disabled { background: #444; cursor: not-allowed; }
        .owned-tag { color: #4CAF50; font-weight: bold; margin-top: 10px; display: none; }
        #win-message { font-size: 20px; font-weight: bold; height: 30px; margin-top: 10px; text-align: center; }

        /* ========================================= */
        /* --- –ü–†–û–§–Ü–õ–¨ --- */
        /* ========================================= */
        
        #tab-profile {
            background-color: #000000;
            padding-top: 50px;
        }

        .profile-card-new {
            background-color: #7a8fa6;
            width: 400px;
            padding: 40px;
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 10px 40px rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }

        .avatar-circle {
            width: 120px; height: 120px;
            background-color: #d1d5db;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 20px; cursor: pointer; overflow: hidden;
            border: 4px solid rgba(255,255,255,0.2); transition: 0.3s;
        }
        .avatar-circle:hover { transform: scale(1.05); border-color: white; }
        .avatar-circle img { width: 100%; height: 100%; object-fit: cover; }
        .avatar-text { color: #333; font-size: 12px; text-align: center; font-weight: bold; }

        .profile-nick-text { font-size: 24px; color: white; font-weight: 500; margin-bottom: 15px; }
        .profile-divider { width: 100%; height: 1px; background-color: rgba(255,255,255,0.5); margin-bottom: 15px; }
        .profile-lvl-text { font-size: 28px; font-weight: bold; color: white; margin-bottom: 10px; text-transform: uppercase; }
        
        .profile-xp-container {
            width: 100%; height: 12px;
            background-color: #b0b8c1; border-radius: 10px; overflow: hidden;
        }
        .profile-xp-fill {
            height: 100%; width: 0%;
            background-color: #c9d060; border-radius: 10px; transition: width 0.5s ease;
        }

        .profile-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 600px;
        }
        .stat-box {
            background: #1e1e24;
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #333;
            text-align: center;
        }
        .stat-title { color: #aaa; font-size: 14px; margin-bottom: 5px; }
        .stat-value { font-size: 20px; font-weight: bold; color: white; }
        .val-green { color: #4CAF50; }
        .val-red { color: #F44336; }
        .val-gold { color: #FFD700; }

        /* ========================================= */
        /* --- –ì–û–†–û–î (–Ω–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞) --- */
        /* ========================================= */
        #tab-city {
            background-color: #000000;
            justify-content: center;
            align-items: center;
        }
        
        .city-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0.3;
        }
        
        .city-placeholder-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .city-placeholder-text {
            font-size: 24px;
            color: #555;
            font-weight: bold;
        }
        
        .city-placeholder-sub {
            font-size: 14px;
            color: #333;
            margin-top: 10px;
        }

    </style>
</head>
<body class="loading">
    <div class="bg-layer" id="main-bg"></div>

    <!-- –ï–ö–†–ê–ù –í–•–û–î–£ -->
    <div class="login-wrapper" id="login-screen">
        <div class="logo-container">
            <img src="C:\Users\tisvi\OneDrive\–†–æ–±–æ—á–∏–π —Å—Ç—ñ–ª\Container Logistics Inc\Image\Logo\Logo-–≤–∏–¥–∞–ª–µ–Ω–∏–π-—Ñ–æ–Ω.png" alt="Logo">
        </div>
        <div class="login-card">
            <label>–í–≤–µ–¥—ñ—Ç—å –≤–∞—à –Ω—ñ–∫</label>
            <input type="text" id="nickname" autocomplete="off">
            <label>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å</label>
            <input type="password" id="password" autocomplete="off">
            <button class="btn btn-green" id="login-btn" style="display:none;">–£–≤—ñ–π—Ç–∏</button>
        </div>
    </div>

    <!-- –ì–û–õ–û–í–ù–ò–ô –Ü–ù–¢–ï–†–§–ï–ô–° -->
    <div id="game-ui">
        
        <!-- HEADER -->
        <div class="header-stats">
            <div class="user-info">
                <div class="user-name" id="ui-nickname">Player</div>
                <div class="currency-label">LVL <span id="ui-mini-lvl">1</span></div>
            </div>
            <div class="balance-box">
                <div class="balance-amount"><span id="ui-balance">0</span> LGX</div>
                <div class="currency-label">–ö—É—Ä—Å: 1 LGX = 10$</div>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="nav-tabs">
            <div class="nav-btn active" onclick="switchTab('auction')">–ê—É–∫—Ü—ñ–æ–Ω</div>
            <div class="nav-btn" onclick="switchTab('shop')">–ú–∞–≥–∞–∑–∏–Ω –ë—ñ–∑–Ω–µ—Å—É</div>
            <div class="nav-btn" onclick="switchTab('city')">–ì–æ—Ä–æ–¥</div>
            <div class="nav-btn" onclick="switchTab('profile')">–ü—Ä–æ—Ñ—ñ–ª—å</div>
        </div>

        <!-- TAB: AUCTION -->
        <div id="tab-auction" class="tab-content active">
            <div class="roulette-wrapper">
                <div class="indicator"></div>
                <div class="roulette-container">
                    <div class="center-line"></div>
                    <div class="roulette-track" id="track"></div>
                </div>
            </div>
            <div id="win-message"></div>

            <h3 style="color:#aaa; font-weight: normal; margin-bottom: 20px;">–î–æ—Å—Ç—É–ø–Ω—ñ –ª–æ—Ç–∏</h3>
            
            <div class="container-grid">
                <!-- Yellow -->
                <div class="container-item border-yellow" onclick="buyContainer('yellow', 100)">
                    <img src="C:\Users\tisvi\OneDrive\–†–æ–±–æ—á–∏–π —Å—Ç—ñ–ª\Container Logistics Inc\Image\Container\yellow_con.jpg">
                    <div style="color:#FFD700">Basic</div>
                    <div class="container-price">100 LGX</div>
                </div>
                <!-- Green -->
                <div class="container-item border-green" onclick="buyContainer('green', 1500)">
                    <img src="C:\Users\tisvi\OneDrive\–†–æ–±–æ—á–∏–π —Å—Ç—ñ–ª\Container Logistics Inc\Image\Container\green_con.jpg">
                    <div style="color:#4CAF50">Standard</div>
                    <div class="container-price">1,500 LGX</div>
                </div>
                <!-- Blue -->
                <div class="container-item border-blue" id="btn-blue" onclick="buyContainer('blue', 7000)">
                    <img src="C:\Users\tisvi\OneDrive\–†–æ–±–æ—á–∏–π —Å—Ç—ñ–ª\Container Logistics Inc\Image\Container\blue_con.jpg">
                    <div style="color:#2196F3">Premium</div>
                    <div class="container-price">7,000 LGX</div>
                    <div class="locked-overlay" id="lock-blue">
                        <div class="lock-icon">üîí</div>
                        <div>–ü–æ—Ç—Ä—ñ–±–µ–Ω LVL 3</div>
                        <div>–∞–±–æ –õ—ñ—Ü–µ–Ω–∑—ñ—è</div>
                    </div>
                </div>
                <!-- Red -->
                <div class="container-item border-red" id="btn-red" onclick="buyContainer('red', 30000)">
                    <img src="C:\Users\tisvi\OneDrive\–†–æ–±–æ—á–∏–π —Å—Ç—ñ–ª\Container Logistics Inc\Image\Container\red_con.jpg">
                    <div style="color:#F44336">Elite</div>
                    <div class="container-price">30,000 LGX</div>
                    <div class="locked-overlay" id="lock-red">
                        <div class="lock-icon">üè¢</div>
                        <div>–ü–æ—Ç—Ä—ñ–±–µ–Ω –û—Ñ—ñ—Å</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: SHOP -->
        <div id="tab-shop" class="tab-content">
            <h2 style="margin-bottom: 30px;">–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ë—ñ–∑–Ω–µ—Å—É</h2>
            <div class="shop-grid">
                <div class="shop-card">
                    <div class="shop-icon">üìú</div>
                    <div class="shop-title">–õ—ñ—Ü–µ–Ω–∑—ñ—è –Ü–º–ø–æ—Ä—Ç–µ—Ä–∞</div>
                    <div class="shop-desc">–í—ñ–¥–∫—Ä–∏–≤–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –°–∏–Ω—ñ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –±–µ–∑ —Ä—ñ–≤–Ω—è.</div>
                    <button class="shop-btn" id="buy-license-btn" onclick="buyUpgrade('license', 5000)">–ö—É–ø–∏—Ç–∏ 5,000 LGX</button>
                    <div class="owned-tag" id="owned-license">–ö–£–ü–õ–ï–ù–û</div>
                </div>
                <div class="shop-card">
                    <div class="shop-icon">üè¢</div>
                    <div class="shop-title">–í–ª–∞—Å–Ω–∏–π –û—Ñ—ñ—Å</div>
                    <div class="shop-desc">–î–æ–∑–≤–æ–ª—è—î –±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å –≤ –ï–ª—ñ—Ç–Ω–∏—Ö (–ß–µ—Ä–≤–æ–Ω–∏—Ö) –∞—É–∫—Ü—ñ–æ–Ω–∞—Ö.</div>
                    <button class="shop-btn" id="buy-office-btn" onclick="buyUpgrade('office', 50000)">–ö—É–ø–∏—Ç–∏ 50,000 LGX</button>
                    <div class="owned-tag" id="owned-office">–ö–£–ü–õ–ï–ù–û</div>
                </div>
                <div class="shop-card">
                    <div class="shop-icon">üè≠</div>
                    <div class="shop-title">–†–æ–∑—à–∏—Ä–∏—Ç–∏ –°–∫–ª–∞–¥</div>
                    <div class="shop-desc">–î–æ–¥–∞—î +5 –º—ñ—Å—Ü—å –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è.</div>
                    <button class="shop-btn" onclick="buyUpgrade('slots', 2000)">–ö—É–ø–∏—Ç–∏ 2,000 LGX</button>
                </div>
            </div>
        </div>

        <!-- TAB: CITY (–ù–û–í–ê) -->
        <div id="tab-city" class="tab-content">
            <div class="city-placeholder">
                <div class="city-placeholder-icon">üèôÔ∏è</div>
                <div class="city-placeholder-text">–ì–æ—Ä–æ–¥</div>
                <div class="city-placeholder-sub">–°–∫–æ—Ä–æ —Ç—É—Ç –∑'—è–≤–∏—Ç—å—Å—è —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ...</div>
            </div>
        </div>

        <!-- TAB: PROFILE -->
        <div id="tab-profile" class="tab-content">
            
            <div class="profile-card-new">
                <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                <div class="avatar-circle" onclick="document.getElementById('avatar-input').click()">
                    <img id="profile-avatar-img" src="" style="display:none;">
                    <div id="profile-avatar-placeholder" class="avatar-text">–ù–ê–¢–ò–°–ù–ò<br>–î–õ–Ø –§–û–¢–û</div>
                </div>
                <div class="profile-nick-text">–ù—ñ–∫ : <span id="prof-nick">***</span></div>
                <div class="profile-divider"></div>
                <div class="profile-lvl-text">LVL : <span id="prof-lvl">1</span></div>
                <div class="profile-xp-container">
                    <div class="profile-xp-fill" id="prof-xp-bar"></div>
                </div>
            </div>

            <div class="profile-stats-grid">
                <div class="stat-box">
                    <div class="stat-title">–ë–∞–ª–∞–Ω—Å</div>
                    <div class="stat-value val-gold"><span id="stat-bal">0</span> LGX</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">–í—ñ–¥–∫—Ä–∏—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤</div>
                    <div class="stat-value"><span id="stat-opened">0</span></div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">–û—Ñ—ñ—Å</div>
                    <div class="stat-value" id="stat-office">–ù–µ–º–∞—î</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">–õ—ñ—Ü–µ–Ω–∑—ñ—è</div>
                    <div class="stat-value" id="stat-license">–ù–µ–º–∞—î</div>
                </div>
            </div>

        </div>

    </div>

    <script>
        // --- –î–ê–ù–Ü –ú–ê–®–ò–ù ---
        const carDatabase = {
            yellow: [
                { name: "Lada 2107", price: 150, img: "https://avtodiski.net.ua/images/news/2019-01-08/Istoriya%20avtomobilya%20VAZ%202107.jpg" },
                { name: "Daewoo Lanos", price: 200, img: "https://upload.wikimedia.org/wikipedia/commons/e/ec/Daewoo_Lanos_front_20080110.jpg" },
                { name: "VW Golf 2", price: 250, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Golf_II_jaslo.jpg/330px-Golf_II_jaslo.jpg" },
                { name: "Audi 80", price: 300, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Audi80-1992.JPG/330px-Audi80-1992.JPG" },
                { name: "Opel Astra", price: 350, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Opel_Astra_F_front_20071019.jpg/250px-Opel_Astra_F_front_20071019.jpg" }
            ],
            green: [
                { name: "Skoda Octavia", price: 1800, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Skoda_Octavia_I_front_20080213.jpg/250px-Skoda_Octavia_I_front_20080213.jpg" },
                { name: "Toyota Camry", price: 2500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/2010_Toyota_Camry_base_--_11-25-2009.jpg/250px-2010_Toyota_Camry_base_--_11-25-2009.jpg" },
                { name: "VW Passat B8", price: 2200, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG/250px-VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG" },
                { name: "Mazda 6", price: 2100, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg/330px-2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg" },
                { name: "Honda Accord", price: 2300, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Honda_Accord_%282008%29_front.JPG/250px-Honda_Accord_%282008%29_front.JPG" }
            ],
            blue: [
                { name: "BMW M5 F90", price: 11000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/2021_BMW_M5_CS_F90.jpg/330px-2021_BMW_M5_CS_F90.jpg" },
                { name: "Mercedes G-Class", price: 15000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Mercedes-Benz_W465_450_d_DSC_0679.jpg/250px-Mercedes-Benz_W465_450_d_DSC_0679.jpg" },
                { name: "Porsche 911", price: 12500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg/250px-GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg" },
                { name: "Tesla Model S", price: 9000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg/330px-2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg" },
                { name: "Range Rover", price: 13000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg/330px-Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg" }
            ],
            red: [
                { name: "Bugatti Chiron", price: 350000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/2016-03-01_Geneva_Motor_Show_0853.JPG/960px-2016-03-01_Geneva_Motor_Show_0853.JPG?20160302172418" },
                { name: "Lamborghini Aventador", price: 50000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Lamborghini_Aventador_Front_View.jpg/320px-Lamborghini_Aventador_Front_View.jpg" },
                { name: "Ferrari LaFerrari", price: 300000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/LaFerrari_in_Schenzhen.JPG/320px-LaFerrari_in_Schenzhen.JPG" },
                { name: "McLaren P1", price: 150000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/McLaren_P1.jpg/320px-McLaren_P1.jpg" },
                { name: "Rolls-Royce Phantom", price: 80000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Rolls-Royce_Phantom_VIII_IMG_4576.jpg/320px-Rolls-Royce_Phantom_VIII_IMG_4576.jpg" }
            ]
        };

        const XP_PER_LEVEL = 1000;
        const XP_PER_SPIN = 100;

        let player = {
            nick: "Player", balance: 500, level: 1, xp: 0, loginTime: 0,
            hasLicense: false, hasOffice: false, containersOpened: 0, avatarData: null
        };

        let isSpinning = false;
        const STORAGE_KEY = 'container_logistics_final';

        // DOM
        const uiBalance = document.getElementById('ui-balance');
        const uiNick = document.getElementById('ui-nickname');
        const track = document.getElementById('track');
        const winMsg = document.getElementById('win-message');
        const bgLayer = document.getElementById('main-bg');
        const nickInput = document.getElementById('nickname');
        const passInput = document.getElementById('password');
        const loginBtn = document.getElementById('login-btn');
        
        function checkInputs() {
            if (nickInput.value.trim() !== "" && passInput.value.trim() !== "") {
                loginBtn.style.display = "inline-block";
            } else {
                loginBtn.style.display = "none";
            }
        }
        nickInput.addEventListener('input', checkInputs);
        passInput.addEventListener('input', checkInputs);

        loginBtn.addEventListener('click', () => {
            player.nick = nickInput.value;
            player.loginTime = Date.now();
            saveData();
            startGame();
        });

        window.onload = function() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if(saved) {
                const data = JSON.parse(saved);
                if (Date.now() - data.loginTime < 7 * 24 * 60 * 60 * 1000) {
                    player = { ...player, ...data };
                    startGame();
                } else {
                    localStorage.removeItem(STORAGE_KEY);
                }
            }
        }

        function saveData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(player));
            updateUI();
        }

        function startGame() {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('game-ui').style.display = 'flex';
            
            track.innerHTML = '';
            for(let i=0; i<8; i++) track.innerHTML += createCardHTML(carDatabase.yellow[0], 'yellow');
            track.style.transform = 'translateX(350px)';
            
            updateUI();
        }

        function updateUI() {
            uiNick.innerText = player.nick;
            uiBalance.innerText = player.balance.toLocaleString();
            document.getElementById('ui-mini-lvl').innerText = player.level;
            
            // Profile Tab
            document.getElementById('prof-nick').innerText = player.nick;
            document.getElementById('prof-lvl').innerText = player.level;
            
            // Stats Block
            document.getElementById('stat-bal').innerText = player.balance.toLocaleString();
            document.getElementById('stat-opened').innerText = player.containersOpened;
            
            const officeEl = document.getElementById('stat-office');
            officeEl.innerText = player.hasOffice ? "–Ñ" : "–ù–µ–º–∞—î";
            officeEl.className = player.hasOffice ? "stat-value val-green" : "stat-value val-red";
            
            const licEl = document.getElementById('stat-license');
            licEl.innerText = player.hasLicense ? "–Ñ" : "–ù–µ–º–∞—î";
            licEl.className = player.hasLicense ? "stat-value val-green" : "stat-value val-red";

            // XP
            const nextLevelXp = player.level * XP_PER_LEVEL;
            const xpPercentage = (player.xp / nextLevelXp) * 100;
            document.getElementById('prof-xp-bar').style.width = `${Math.min(xpPercentage, 100)}%`;

            // Avatar
            const avImg = document.getElementById('profile-avatar-img');
            const avPlaceholder = document.getElementById('profile-avatar-placeholder');
            if(player.avatarData) {
                avImg.src = player.avatarData;
                avImg.style.display = 'block';
                avPlaceholder.style.display = 'none';
            } else {
                avImg.style.display = 'none';
                avPlaceholder.style.display = 'block';
            }

            // Locks & Buttons
            const blueLock = document.getElementById('lock-blue');
            if (player.level >= 3 || player.hasLicense) blueLock.style.display = 'none';
            else blueLock.style.display = 'flex';

            const redLock = document.getElementById('lock-red');
            if (player.hasOffice) redLock.style.display = 'none';
            else redLock.style.display = 'flex';

            if(player.hasLicense) {
                document.getElementById('buy-license-btn').style.display = 'none';
                document.getElementById('owned-license').style.display = 'block';
            }
            if(player.hasOffice) {
                document.getElementById('buy-office-btn').style.display = 'none';
                document.getElementById('owned-office').style.display = 'block';
            }
        }

        document.getElementById('avatar-input').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    player.avatarData = e.target.result;
                    saveData();
                };
                reader.readAsDataURL(file);
            }
        });

        function switchTab(tabName) {
            // –°–∫–∏–¥–∞—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π –∫–ª–∞—Å —É –≤—Å—ñ—Ö
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∞–±
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É
            const btns = document.querySelectorAll('.nav-btn');
            if(tabName === 'auction') btns[0].classList.add('active');
            if(tabName === 'shop') btns[1].classList.add('active');
            if(tabName === 'city') btns[2].classList.add('active');
            if(tabName === 'profile') btns[3].classList.add('active');

            // –ó–º—ñ–Ω—é—î–º–æ —Ñ–æ–Ω
            if(tabName === 'profile' || tabName === 'city') bgLayer.style.opacity = '0';
            else bgLayer.style.opacity = '1';
        }

        function buyUpgrade(type, price) {
            if(player.balance < price) { alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≥—Ä–æ—à–µ–π!"); return; }
            if(type === 'license') player.hasLicense = true;
            if(type === 'office') player.hasOffice = true;
            if(type === 'slots') alert("–°–∫–ª–∞–¥ —Ä–æ–∑—à–∏—Ä–µ–Ω–æ!");
            player.balance -= price;
            saveData();
        }

        function buyContainer(type, price) {
            if(isSpinning) return;
            if(type === 'blue' && player.level < 3 && !player.hasLicense) { alert("–ü–æ—Ç—Ä—ñ–±–µ–Ω –†—ñ–≤–µ–Ω—å 3 –∞–±–æ –õ—ñ—Ü–µ–Ω–∑—ñ—è!"); return; }
            if(type === 'red' && !player.hasOffice) { alert("–ü–æ—Ç—Ä—ñ–±–µ–Ω –û—Ñ—ñ—Å!"); return; }
            if(player.balance < price) { alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ LGX!"); return; }

            player.balance -= price;
            player.containersOpened++;
            saveData();
            
            isSpinning = true;
            winMsg.innerText = "";
            const winRes = getCarForContainer(type);
            const track = document.getElementById('track');
            let html = '';
            const winIndex = 40;
            
            for(let i=0; i<50; i++) {
                if(i===winIndex) html += createCardHTML(winRes.car, winRes.tier);
                else {
                    const rnd = getCarForContainer(type);
                    html += createCardHTML(rnd.car, rnd.tier);
                }
            }
            track.innerHTML = html;
            track.style.transition = 'none';
            track.style.transform = 'translateX(0)';
            
            const cardW = 190;
            const offset = 450 - 95; 
            const target = -((winIndex * cardW) - offset + (Math.random()*60-30));

            setTimeout(() => {
                track.style.transition = 'transform 5s cubic-bezier(0.1, 1, 0.1, 1)';
                track.style.transform = `translateX(${target}px)`;
            }, 50);

            setTimeout(() => {
                isSpinning = false;
                const profit = winRes.car.price;
                player.balance += profit;
                player.xp += XP_PER_SPIN;
                const reqXp = player.level * XP_PER_LEVEL;
                if(player.xp >= reqXp) {
                    player.level++;
                    player.xp -= reqXp;
                    alert("–†–Ü–í–ï–ù–¨ –ü–Ü–î–í–ò–©–ï–ù–û! –¢–µ–ø–µ—Ä –≤–∏ LVL " + player.level);
                }
                winMsg.innerText = `–í–∏–ø–∞–ª–æ: ${winRes.car.name}! (+${profit} LGX)`;
                winMsg.style.color = getTierColor(winRes.tier);
                saveData();
            }, 5000);
        }

        function getCarForContainer(type) {
            let pool = ['yellow'];
            if(type === 'green') pool = ['green', 'yellow'];
            if(type === 'blue') pool = ['blue', 'green'];
            if(type === 'red') pool = ['red', 'blue'];
            const tier = pool[Math.floor(Math.random()*pool.length)];
            const cars = carDatabase[tier];
            const car = cars[Math.floor(Math.random()*cars.length)];
            return { car, tier };
        }

        function createCardHTML(car, tier) {
            return `
            <div class="car-card rarity-${tier}">
                <img src="${car.img}">
                <div class="car-name">${car.name}</div>
                <div class="car-price">${car.price} LGX</div>
            </div>`;
        }
        
        function getTierColor(t) {
            if(t=='yellow') return '#FFD700';
            if(t=='green') return '#4CAF50';
            if(t=='blue') return '#2196F3';
            if(t=='red') return '#F44336';
        }
    </script>
</body>
</html>
