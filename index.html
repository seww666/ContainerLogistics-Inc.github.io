<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Container Logistics Inc - Full Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        *{box-sizing:border-box}
        body{margin:0;padding:0;font-family:'Inter','Segoe UI',sans-serif;height:100vh;display:flex;flex-direction:column;background:#08080c;color:white;overflow:hidden;user-select:none}
        .bg-layer{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(0,0,0,.82),rgba(0,0,0,.88)),url('https://images.unsplash.com/photo-1578575437130-527eed3abbec?w=1920');background-size:cover;background-position:center;z-index:-1;transition:opacity .5s}
        .hidden{display:none!important}

        .login-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0f0c29,#302b63 50%,#24243e);z-index:1000}
        .login-wrapper::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 30% 40%,rgba(156,39,176,.15),transparent 50%),radial-gradient(circle at 70% 60%,rgba(33,150,243,.1),transparent 50%)}
        .logo-container{width:140px;height:140px;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:32px;display:flex;align-items:center;justify-content:center;margin-bottom:35px;box-shadow:0 20px 60px rgba(0,0,0,.5);position:relative;z-index:1}
        .logo-container::after{content:'';position:absolute;inset:-2px;border-radius:34px;background:linear-gradient(135deg,#9C27B0,#2196F3,#9C27B0);z-index:-1;opacity:.5;filter:blur(8px)}
        .logo-text{font-size:48px;font-weight:900;background:linear-gradient(135deg,#CE93D8,#64B5F6);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .login-card{background:rgba(15,15,25,.9);padding:45px;border-radius:28px;width:340px;text-align:center;position:relative;z-index:1;box-shadow:0 25px 60px rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.06);backdrop-filter:blur(20px)}
        .login-card label{font-size:12px;color:#888;letter-spacing:.5px;font-weight:600;text-transform:uppercase}
        .login-card input{width:90%;padding:14px 18px;margin:8px 0 22px 0;border-radius:14px;border:1px solid rgba(255,255,255,.08);text-align:center;font-size:15px;background:rgba(255,255,255,.05);color:white;transition:.3s;font-family:'Inter'}
        .login-card input:focus{outline:none;border-color:#9C27B0;background:rgba(156,39,176,.05)}
        .login-error{color:#EF5350;font-size:12px;min-height:20px;margin-bottom:10px;font-weight:500}
        .login-mode-toggle{color:#888;font-size:12px;margin-top:15px;cursor:pointer;transition:.3s}
        .login-mode-toggle:hover{color:#CE93D8}
        .btn{padding:14px 35px;border-radius:14px;border:none;font-size:15px;font-weight:700;cursor:pointer;transition:.3s;color:white;font-family:'Inter';letter-spacing:.5px}
        .btn-green{background:linear-gradient(135deg,#4CAF50,#2E7D32);box-shadow:0 8px 25px rgba(76,175,80,.3)}
        .btn-green:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(76,175,80,.4)}
        .btn-purple{background:linear-gradient(135deg,#9C27B0,#7B1FA2);box-shadow:0 8px 25px rgba(156,39,176,.3)}
        .btn-purple:hover{transform:translateY(-2px)}

        #game-ui{display:none;width:100%;height:100%;flex-direction:column;position:relative;z-index:10}
        .header-stats{height:72px;display:flex;justify-content:space-between;align-items:center;padding:0 35px;background:rgba(10,10,18,.98);border-bottom:1px solid rgba(255,255,255,.06);box-shadow:0 4px 30px rgba(0,0,0,.4);flex-shrink:0;backdrop-filter:blur(20px)}
        .user-info{display:flex;align-items:center;gap:15px}
        .user-avatar-mini{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,#9C27B0,#7B1FA2);display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800;border:2px solid rgba(156,39,176,.3);overflow:hidden}
        .user-avatar-mini img{width:100%;height:100%;object-fit:cover}
        .user-details{display:flex;flex-direction:column}
        .user-name{font-size:16px;font-weight:700;letter-spacing:.3px}
        .user-meta{font-size:11px;color:#666;display:flex;gap:10px;margin-top:2px}
        .user-meta span{display:flex;align-items:center;gap:3px}
        .balance-box{display:flex;align-items:center;gap:20px}
        .income-badge{background:rgba(76,175,80,.1);border:1px solid rgba(76,175,80,.2);padding:6px 14px;border-radius:10px;font-size:12px;color:#4CAF50;font-weight:600}
        .balance-main{text-align:right}
        .balance-amount{font-size:24px;font-weight:800;background:linear-gradient(135deg,#CE93D8,#9C27B0);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .balance-sub{font-size:10px;color:#555;margin-top:2px;letter-spacing:.5px}

        .nav-tabs{display:flex;justify-content:center;gap:8px;padding:12px 20px;flex-shrink:0;background:rgba(10,10,18,.6);border-bottom:1px solid rgba(255,255,255,.03)}
        .nav-btn{background:rgba(255,255,255,.03);padding:10px 28px;border-radius:12px;cursor:pointer;transition:.3s;border:1px solid rgba(255,255,255,.04);color:#666;font-size:13px;font-weight:600;letter-spacing:.3px}
        .nav-btn:hover{background:rgba(255,255,255,.06);color:#aaa;border-color:rgba(255,255,255,.08)}
        .nav-btn.active{background:linear-gradient(135deg,rgba(156,39,176,.2),rgba(156,39,176,.1));color:#CE93D8;border-color:rgba(156,39,176,.3);box-shadow:0 0 20px rgba(156,39,176,.1)}

        .tab-content{flex:1;display:none;flex-direction:column;align-items:center;overflow-y:auto;padding-bottom:30px;width:100%}
        .tab-content.active{display:flex!important}
        .tab-content::-webkit-scrollbar{width:5px}
        .tab-content::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}

        /* ROULETTE */
        .roulette-section{display:flex;flex-direction:column;align-items:center;margin:20px 0 15px 0;width:100%}
        .roulette-frame{position:relative;width:920px}
        .roulette-pointer{position:absolute;top:-3px;left:50%;transform:translateX(-50%);z-index:30;filter:drop-shadow(0 4px 12px rgba(156,39,176,.5))}
        .roulette-viewport{width:920px;height:260px;background:linear-gradient(180deg,#0a0a12,#12121c 50%,#0a0a12);border:2px solid rgba(255,255,255,.06);border-radius:20px;position:relative;overflow:hidden;box-shadow:inset 0 0 100px rgba(0,0,0,.8),0 15px 50px rgba(0,0,0,.4)}
        .roulette-viewport::before,.roulette-viewport::after{content:'';position:absolute;top:0;bottom:0;width:140px;z-index:15;pointer-events:none}
        .roulette-viewport::before{left:0;background:linear-gradient(to right,#0a0a12,transparent)}
        .roulette-viewport::after{right:0;background:linear-gradient(to left,#0a0a12,transparent)}
        .roulette-center-line{position:absolute;left:50%;top:0;bottom:0;width:2px;background:linear-gradient(180deg,transparent,rgba(156,39,176,.5) 20%,rgba(156,39,176,.5) 80%,transparent);z-index:12;transform:translateX(-50%)}
        .roulette-track{display:flex;height:100%;align-items:center;position:absolute;left:0;will-change:transform}

        .car-card{width:180px;height:220px;margin:0 6px;border-radius:14px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;flex-shrink:0;padding:12px;position:relative;overflow:hidden}
        .car-card.rarity-yellow{background:linear-gradient(180deg,#1e1c14,#14130e);border:1.5px solid rgba(255,215,0,.2)}
        .car-card.rarity-green{background:linear-gradient(180deg,#141e14,#0e140e);border:1.5px solid rgba(76,175,80,.2)}
        .car-card.rarity-blue{background:linear-gradient(180deg,#14141e,#0e0e1a);border:1.5px solid rgba(33,150,243,.2)}
        .car-card.rarity-red{background:linear-gradient(180deg,#1e1414,#1a0e0e);border:1.5px solid rgba(244,67,54,.2)}
        .car-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px}
        .car-card.rarity-yellow::before{background:linear-gradient(to right,transparent,#FFD700,transparent)}
        .car-card.rarity-green::before{background:linear-gradient(to right,transparent,#4CAF50,transparent)}
        .car-card.rarity-blue::before{background:linear-gradient(to right,transparent,#2196F3,transparent)}
        .car-card.rarity-red::before{background:linear-gradient(to right,transparent,#F44336,transparent)}
        .car-card img{width:100%;height:110px;object-fit:cover;border-radius:10px;background:#000;position:relative;z-index:2}
        .car-name{font-size:12px;font-weight:600;margin-top:6px;color:#bbb;text-align:center;z-index:2;line-height:1.2}
        .car-rarity-label{font-size:9px;text-transform:uppercase;letter-spacing:2px;font-weight:700;z-index:2}
        .car-rarity-label.yellow{color:#FFD700}.car-rarity-label.green{color:#4CAF50}.car-rarity-label.blue{color:#2196F3}.car-rarity-label.red{color:#F44336}
        .car-price{font-size:15px;font-weight:700;z-index:2}
        .car-price.yellow{color:#FFD700}.car-price.green{color:#4CAF50}.car-price.blue{color:#2196F3}.car-price.red{color:#F44336}
        @keyframes winPulse{0%,100%{box-shadow:0 0 0 rgba(156,39,176,0)}50%{box-shadow:0 0 50px rgba(156,39,176,.5)}}
        @keyframes winScale{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
        .car-card.winner{animation:winPulse 1s ease infinite,winScale 1s ease infinite;z-index:20}
        #win-message{font-size:20px;font-weight:700;height:35px;margin-top:15px;text-align:center;letter-spacing:.3px}
        @keyframes winText{0%{opacity:0;transform:translateY(10px) scale(.9)}100%{opacity:1;transform:translateY(0) scale(1)}}
        .win-animated{animation:winText .5s ease forwards}

        .container-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;max-width:900px;padding:0 20px}
        .container-item{background:rgba(20,20,28,.8);padding:20px 15px;border-radius:16px;text-align:center;cursor:pointer;transition:.3s;position:relative;border:1px solid rgba(255,255,255,.04)}
        .container-item:hover{transform:translateY(-5px);background:rgba(30,30,40,.9);border-color:rgba(255,255,255,.08);box-shadow:0 15px 40px rgba(0,0,0,.3)}
        .container-item .c-icon{font-size:44px;margin-bottom:8px}
        .container-item .c-tier{font-size:13px;font-weight:700;letter-spacing:1px}
        .container-price{font-size:17px;font-weight:800;color:#CE93D8;margin-top:8px}
        .locked-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.75);border-radius:16px;backdrop-filter:blur(3px);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888;font-size:11px;gap:5px;font-weight:600;text-align:center;padding:10px}

        /* MONOPOLY */
        #tab-monopoly{background:linear-gradient(180deg,#08080c,#0a0a10);padding-top:25px}
        .monopoly-header{text-align:center;margin-bottom:25px}
        .monopoly-header h1{font-size:32px;margin:0;font-weight:900;background:linear-gradient(135deg,#FFD700,#FFA726,#FF7043);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .monopoly-header p{color:#555;font-size:13px;margin-top:5px}
        .monopoly-tabs{display:flex;gap:10px;margin-bottom:25px;justify-content:center}
        .monopoly-tab-btn{padding:11px 30px;border-radius:12px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);color:#666;font-size:14px;font-weight:600;cursor:pointer;transition:.3s}
        .monopoly-tab-btn:hover{border-color:rgba(156,39,176,.3);color:#aaa}
        .monopoly-tab-btn.active{background:linear-gradient(135deg,rgba(156,39,176,.15),rgba(156,39,176,.08));border-color:rgba(156,39,176,.3);color:#CE93D8}
        .monopoly-section{display:none;width:100%;max-width:1100px}
        .monopoly-section.active{display:block}
        .my-biz-empty{text-align:center;padding:60px 20px;color:#444}
        .my-biz-empty-icon{font-size:70px;margin-bottom:15px;opacity:.2}
        .biz-total-income{text-align:center;background:rgba(76,175,80,.06);border:1px solid rgba(76,175,80,.12);border-radius:14px;padding:14px;margin:0 auto 20px auto;max-width:450px}
        .biz-total-income-label{font-size:11px;color:#666;margin-bottom:4px;letter-spacing:.5px}
        .biz-total-income-value{font-size:22px;font-weight:800;color:#4CAF50}
        .my-biz-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;padding:0 20px}
        .my-biz-card{background:rgba(18,18,26,.8);border:1px solid rgba(255,255,255,.05);border-radius:18px;overflow:hidden;cursor:pointer;transition:.3s}
        .my-biz-card:hover{border-color:rgba(156,39,176,.25);transform:translateY(-3px)}
        .my-biz-card-header{display:flex;align-items:center;gap:14px;padding:18px;border-bottom:1px solid rgba(255,255,255,.04)}
        .my-biz-avatar{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:26px;flex-shrink:0}
        .my-biz-name{font-size:16px;font-weight:700}
        .my-biz-category{font-size:11px;color:#666;margin-top:2px}
        .my-biz-card-body{padding:14px 18px}
        .my-biz-stat-row{display:flex;justify-content:space-between;margin-bottom:7px;font-size:12px}
        .my-biz-stat-label{color:#555}
        .my-biz-stat-value{color:#4CAF50;font-weight:600}
        .my-biz-stat-value.gold{color:#FFD700}
        .my-biz-income-bar{width:100%;height:3px;background:rgba(255,255,255,.04);border-radius:2px;margin-top:10px;overflow:hidden}
        .my-biz-income-fill{height:100%;background:linear-gradient(to right,#4CAF50,#81C784);border-radius:2px;transition:width 1s linear;width:0%}
        .biz-catalog-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;padding:0 20px}
        .biz-catalog-card{background:rgba(18,18,26,.8);border:1px solid rgba(255,255,255,.05);border-radius:18px;padding:22px;text-align:center;transition:.3s;position:relative;overflow:hidden}
        .biz-catalog-card:hover{border-color:rgba(255,255,255,.1);transform:translateY(-3px)}
        .biz-catalog-card.locked{opacity:.45}
        .biz-catalog-icon{font-size:44px;margin-bottom:12px}
        .biz-catalog-name{font-size:18px;font-weight:700;margin-bottom:4px}
        .biz-catalog-desc{font-size:11px;color:#666;margin-bottom:14px;min-height:30px}
        .biz-catalog-stats{background:rgba(0,0,0,.25);border-radius:12px;padding:10px;margin-bottom:14px}
        .biz-catalog-stat{display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px}
        .biz-catalog-stat:last-child{margin-bottom:0}
        .biz-catalog-stat-label{color:#555}
        .biz-catalog-stat-value{color:#4CAF50;font-weight:600}
        .biz-catalog-stat-value.req{color:#FFD700}
        .biz-catalog-buy-btn{width:100%;padding:11px;border-radius:12px;border:none;font-size:14px;font-weight:700;cursor:pointer;background:linear-gradient(135deg,rgba(156,39,176,.8),rgba(123,31,162,.8));color:white;transition:.3s;font-family:'Inter'}
        .biz-catalog-buy-btn:hover{box-shadow:0 8px 25px rgba(156,39,176,.3)}
        .biz-catalog-buy-btn:disabled{background:rgba(255,255,255,.05);color:#555;cursor:not-allowed;box-shadow:none}
        .biz-catalog-badge{position:absolute;top:14px;right:14px;padding:3px 9px;border-radius:7px;font-size:10px;font-weight:700}
        .biz-catalog-badge.lock{background:rgba(244,67,54,.15);color:#EF5350}
        .biz-catalog-badge.owned{background:rgba(76,175,80,.15);color:#66BB6A}
        .biz-catalog-lvl-badge{position:absolute;top:14px;left:14px;background:rgba(156,39,176,.15);color:#CE93D8;padding:3px 9px;border-radius:7px;font-size:10px;font-weight:700}

        /* MODALS */
        .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.88);z-index:9998;display:none;justify-content:center;align-items:center;backdrop-filter:blur(12px)}
        .modal-overlay.open{display:flex!important}
        .modal-panel{background:#111118;width:550px;max-height:88vh;border-radius:24px;border:1px solid rgba(255,255,255,.06);overflow-y:auto;box-shadow:0 30px 80px rgba(0,0,0,.6);animation:slideIn .3s ease}
        @keyframes slideIn{from{transform:translateY(30px) scale(.96);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}
        .modal-banner{height:110px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
        .modal-banner-icon{font-size:50px;position:relative;z-index:2}
        .modal-close{position:absolute;top:14px;right:14px;width:34px;height:34px;background:rgba(255,255,255,.08);border:none;border-radius:10px;color:#888;font-size:16px;cursor:pointer;z-index:3;display:flex;align-items:center;justify-content:center;transition:.2s}
        .modal-close:hover{background:#EF5350;color:white}
        .modal-body{padding:22px 28px}
        .modal-title{font-size:24px;font-weight:800;margin-bottom:4px}
        .modal-subtitle{font-size:12px;color:#666;margin-bottom:18px}
        .modal-divider{height:1px;background:rgba(255,255,255,.04);margin:18px 0}
        .modal-stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:18px}
        .modal-stat{background:rgba(255,255,255,.03);padding:14px;border-radius:12px;text-align:center}
        .modal-stat-label{font-size:10px;color:#555;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
        .modal-stat-value{font-size:18px;font-weight:800}
        .modal-stat-value.green{color:#4CAF50}
        .modal-stat-value.gold{color:#FFD700}
        .modal-upgrade-title{font-size:13px;color:#777;margin-bottom:10px;font-weight:700}
        .modal-upgrade-btn{width:100%;padding:12px 14px;border-radius:11px;border:1px solid rgba(255,255,255,.05);background:rgba(255,255,255,.03);color:white;font-size:13px;cursor:pointer;transition:.2s;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;font-family:'Inter'}
        .modal-upgrade-btn:hover{background:rgba(255,255,255,.06);border-color:rgba(76,175,80,.3)}
        .modal-upgrade-btn:disabled{opacity:.35;cursor:not-allowed}
        .modal-upgrade-btn:disabled:hover{background:rgba(255,255,255,.03);border-color:rgba(255,255,255,.05)}
        .upgrade-label{display:flex;align-items:center;gap:8px;font-weight:500}
        .upgrade-price{color:#4CAF50;font-weight:700}
        .modal-action-btn{width:100%;padding:14px;border-radius:13px;border:none;font-size:16px;font-weight:700;cursor:pointer;transition:.3s;margin-top:12px;font-family:'Inter'}
        .modal-action-btn:hover{transform:scale(1.02)}
        .modal-action-btn:disabled{background:rgba(255,255,255,.05)!important;color:#444;cursor:not-allowed;transform:none}
        .modal-action-btn.green{background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white}
        .modal-action-btn.red{background:rgba(244,67,54,.1);color:#EF5350;border:1px solid rgba(244,67,54,.15);margin-top:8px;font-size:13px;padding:11px}

        /* CITY */
        #tab-city{background:#050508;padding:0;overflow:hidden;position:relative}
        .city-hud{position:absolute;top:0;left:0;right:0;z-index:100;background:linear-gradient(180deg,rgba(5,5,8,.95),rgba(5,5,8,.7) 70%,transparent);padding:14px 25px 35px 25px;display:flex;justify-content:space-between;align-items:flex-start;pointer-events:none}
        .city-hud>*{pointer-events:auto}
        .city-hud-left h2{margin:0;font-size:20px;font-weight:800}
        .city-hud-left h2 span{background:linear-gradient(135deg,#FFD700,#FFA726);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .city-hud-left p{margin:3px 0 0 0;font-size:11px;color:#555}
        .city-hud-right{display:flex;gap:10px}
        .city-hud-stat{background:rgba(255,255,255,.05);padding:8px 14px;border-radius:10px;text-align:center;min-width:75px;border:1px solid rgba(255,255,255,.04)}
        .city-hud-stat-label{font-size:9px;color:#666;font-weight:600;letter-spacing:.5px}
        .city-hud-stat-value{font-size:15px;font-weight:800;margin-top:2px}
        .city-hud-stat-value.pop{color:#42A5F5}
        .city-hud-stat-value.happy{color:#FFD700}
        .city-hud-stat-value.tax{color:#4CAF50}
        .city-hud-stat-value.stars{color:#FFA726}

        .city-map-wrapper{width:100%;height:100%;overflow:auto;cursor:grab;position:relative}
        .city-map-wrapper:active{cursor:grabbing}
        .city-map{width:3200px;height:2400px;position:relative;background:#1a3d12;background-image:radial-gradient(circle at 20% 30%,rgba(30,80,20,.5),transparent 40%),radial-gradient(circle at 70% 60%,rgba(20,60,15,.4),transparent 35%),linear-gradient(rgba(255,255,255,.015) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.015) 1px,transparent 1px);background-size:100%,100%,50px 50px,50px 50px}

        .road-h{position:absolute;background:#2a2a2a;border-top:1px dashed rgba(255,200,0,.3);border-bottom:1px dashed rgba(255,200,0,.3)}
        .road-v{position:absolute;background:#2a2a2a;border-left:1px dashed rgba(255,200,0,.3);border-right:1px dashed rgba(255,200,0,.3)}
        .water{position:absolute;background:linear-gradient(135deg,#0D47A1,#1565C0,#1976D2);border-radius:15px;opacity:.7;animation:waterA 5s ease-in-out infinite}
        @keyframes waterA{0%,100%{opacity:.6}50%{opacity:.8}}
        .park{position:absolute;background:linear-gradient(135deg,#1B5E20,#2E7D32);border-radius:12px;border:1px solid rgba(56,142,60,.3);display:flex;align-items:center;justify-content:center;font-size:28px}
        .quarter{position:absolute;border:2px dashed rgba(255,255,255,.08);border-radius:20px;pointer-events:none}
        .quarter-label{position:absolute;top:8px;left:12px;font-size:10px;font-weight:700;color:rgba(255,255,255,.15);letter-spacing:1px;text-transform:uppercase}

        .building{position:absolute;border-radius:8px;cursor:pointer;transition:.25s;display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 4px 20px rgba(0,0,0,.5);overflow:hidden}
        .building:hover{transform:scale(1.1);z-index:50;filter:brightness(1.25)}
        .building-icon{font-size:24px;z-index:2;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}
        .building-name{font-size:7px;color:rgba(255,255,255,.9);text-align:center;margin-top:1px;z-index:2;text-shadow:0 1px 4px rgba(0,0,0,.9);font-weight:600;max-width:90%;overflow:hidden}
        .building-status{position:absolute;top:3px;right:3px;width:8px;height:8px;border-radius:50%;z-index:3}
        .building-status.owned{background:#4CAF50;box-shadow:0 0 8px #4CAF50}
        .building-status.rented{background:#FFA726;box-shadow:0 0 8px #FFA726}
        .building-status.available{background:#555}
        .building-status.locked{background:#EF5350}
        .building-level-badge{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#FFD700;font-size:7px;padding:1px 4px;border-radius:3px;z-index:3;font-weight:700}
        .building-income-float{position:absolute;top:-4px;left:50%;transform:translateX(-50%);color:#4CAF50;font-size:8px;font-weight:800;z-index:3;animation:floatUp 2.5s ease-in-out infinite}
        @keyframes floatUp{0%,100%{opacity:.4;transform:translateX(-50%) translateY(0)}50%{opacity:1;transform:translateX(-50%) translateY(-10px)}}

        .b-residential{background:linear-gradient(180deg,#3F51B5,#303F9F);border:1.5px solid rgba(63,81,181,.4)}
        .b-commercial{background:linear-gradient(180deg,#E64A19,#BF360C);border:1.5px solid rgba(230,74,25,.4)}
        .b-industrial{background:linear-gradient(180deg,#546E7A,#37474F);border:1.5px solid rgba(84,110,122,.4)}
        .b-entertainment{background:linear-gradient(180deg,#8E24AA,#6A1B9A);border:1.5px solid rgba(142,36,170,.4)}
        .b-government{background:linear-gradient(180deg,#00897B,#00695C);border:1.5px solid rgba(0,137,123,.4)}
        .b-special{background:linear-gradient(180deg,#F57C00,#E65100);border:1.5px solid rgba(245,124,0,.4)}
        .b-education{background:linear-gradient(180deg,#1E88E5,#1565C0);border:1.5px solid rgba(30,136,229,.4)}
        .b-medical{background:linear-gradient(180deg,#E53935,#C62828);border:1.5px solid rgba(229,57,53,.4)}
        .b-office{background:linear-gradient(180deg,#5C6BC0,#3949AB);border:1.5px solid rgba(92,107,192,.4)}

        .bm-header{padding:22px;display:flex;align-items:center;gap:18px;border-bottom:1px solid rgba(255,255,255,.04);position:relative}
        .bm-header-icon{width:62px;height:62px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;flex-shrink:0}
        .bm-header-name{font-size:20px;font-weight:800}
        .bm-header-type{font-size:11px;color:#666;margin-top:2px}
        .bm-header-status{font-size:11px;margin-top:5px;padding:3px 10px;border-radius:7px;display:inline-block;font-weight:600}
        .bm-body{padding:18px 22px}
        .bm-desc{font-size:12px;color:#888;margin-bottom:18px;line-height:1.6}
        .bm-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:18px}
        .bm-stat{background:rgba(255,255,255,.03);padding:11px;border-radius:10px;text-align:center}
        .bm-stat-label{font-size:9px;color:#555;text-transform:uppercase;letter-spacing:1px;font-weight:600}
        .bm-stat-value{font-size:16px;font-weight:800;margin-top:3px}
        .bm-actions{display:flex;flex-direction:column;gap:8px}
        .bm-action-btn{width:100%;padding:13px 16px;border-radius:12px;border:none;font-size:14px;font-weight:700;cursor:pointer;transition:.3s;display:flex;justify-content:space-between;align-items:center;font-family:'Inter'}
        .bm-action-btn:hover{transform:scale(1.02)}
        .bm-action-btn:disabled{opacity:.35;cursor:not-allowed;transform:none}
        .bm-action-btn.buy{background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white}
        .bm-action-btn.rent{background:linear-gradient(135deg,#FF9800,#E65100);color:white}
        .bm-action-btn.upgrade{background:linear-gradient(135deg,#9C27B0,#6A1B9A);color:white}
        .bm-action-btn.sell{background:rgba(244,67,54,.1);color:#EF5350;border:1px solid rgba(244,67,54,.15)}
        .bm-action-btn.collect{background:linear-gradient(135deg,#2196F3,#1565C0);color:white}
        .bm-action-price{font-size:13px;opacity:.9}
        .bm-action-left{display:flex;align-items:center;gap:8px}
        .bm-office-bonus{background:rgba(92,107,192,.1);border:1px solid rgba(92,107,192,.2);border-radius:12px;padding:12px;margin-bottom:15px;text-align:center}
        .bm-office-bonus-label{font-size:10px;color:#7986CB}
        .bm-office-bonus-value{font-size:14px;font-weight:700;color:#9FA8DA;margin-top:3px}

        /* PROFILE */
        #tab-profile{background:linear-gradient(180deg,#08080c,#0a0a10);padding-top:40px}
        .profile-card-new{background:linear-gradient(135deg,#546E7A,#37474F);width:420px;padding:35px;border-radius:24px;display:flex;flex-direction:column;align-items:center;box-shadow:0 15px 50px rgba(0,0,0,.4);margin-bottom:25px;border:1px solid rgba(255,255,255,.05)}
        .avatar-circle{width:110px;height:110px;background:rgba(255,255,255,.1);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:18px;cursor:pointer;overflow:hidden;border:3px solid rgba(255,255,255,.15);transition:.3s}
        .avatar-circle:hover{transform:scale(1.05);border-color:rgba(255,255,255,.3)}
        .avatar-circle img{width:100%;height:100%;object-fit:cover}
        .avatar-text{color:rgba(255,255,255,.4);font-size:11px;text-align:center;font-weight:600}
        .profile-nick-text{font-size:22px;font-weight:700;margin-bottom:12px}
        .profile-divider{width:100%;height:1px;background:rgba(255,255,255,.15);margin-bottom:12px}
        .profile-lvl-text{font-size:26px;font-weight:900;margin-bottom:8px}
        .profile-xp-container{width:100%;height:8px;background:rgba(0,0,0,.3);border-radius:4px;overflow:hidden}
        .profile-xp-fill{height:100%;width:0%;background:linear-gradient(to right,#c9d060,#a0b030);border-radius:4px;transition:width .5s ease}

        /* Daily reward */
        .daily-reward-card{background:rgba(18,18,26,.8);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:25px;width:420px;margin-bottom:20px;text-align:center}
        .daily-reward-title{font-size:16px;font-weight:800;margin-bottom:5px;color:#FFD700}
        .daily-reward-sub{font-size:12px;color:#666;margin-bottom:15px}
        .daily-streak{display:flex;gap:8px;justify-content:center;margin-bottom:18px;flex-wrap:wrap}
        .daily-day{width:48px;height:55px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:10px;color:#666;transition:.3s}
        .daily-day.claimed{background:rgba(76,175,80,.15);border-color:rgba(76,175,80,.3);color:#4CAF50}
        .daily-day.current{background:rgba(255,215,0,.1);border-color:rgba(255,215,0,.3);color:#FFD700;animation:dailyPulse 2s ease-in-out infinite}
        .daily-day.locked{opacity:.3}
        .daily-day-num{font-size:9px;font-weight:700;letter-spacing:.5px}
        .daily-day-reward{font-size:14px;margin-top:2px}
        .daily-day-amount{font-size:8px;font-weight:700}
        @keyframes dailyPulse{0%,100%{box-shadow:0 0 0 rgba(255,215,0,0)}50%{box-shadow:0 0 15px rgba(255,215,0,.2)}}
        .daily-claim-btn{padding:12px 40px;border-radius:12px;border:none;font-size:15px;font-weight:700;cursor:pointer;transition:.3s;font-family:'Inter'}
        .daily-claim-btn.available{background:linear-gradient(135deg,#FFD700,#FFA000);color:#000;box-shadow:0 8px 25px rgba(255,215,0,.3)}
        .daily-claim-btn.available:hover{transform:translateY(-2px)}
        .daily-claim-btn.claimed-btn{background:rgba(255,255,255,.05);color:#555;cursor:not-allowed}

        /* Time played */
        .time-played-card{background:rgba(18,18,26,.8);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:20px;width:420px;margin-bottom:20px;text-align:center}
        .time-played-label{font-size:11px;color:#666;margin-bottom:5px;font-weight:600;letter-spacing:.5px}
        .time-played-value{font-size:28px;font-weight:900;background:linear-gradient(135deg,#42A5F5,#1E88E5);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .time-played-session{font-size:11px;color:#555;margin-top:5px}

        .profile-stats-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;width:650px}
        .stat-box{background:rgba(18,18,26,.8);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,.04);text-align:center}
        .stat-title{color:#555;font-size:11px;margin-bottom:5px;font-weight:600;letter-spacing:.5px}
        .stat-value{font-size:18px;font-weight:800}
        .val-green{color:#4CAF50}.val-red{color:#EF5350}.val-gold{color:#FFD700}
        .settings-btn-profile{margin-top:25px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);color:#666;padding:11px 35px;border-radius:12px;font-size:14px;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:8px;font-weight:600}
        .settings-btn-profile:hover{background:rgba(255,255,255,.08);color:#aaa;border-color:rgba(156,39,176,.3)}

        /* SETTINGS */
        .settings-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.88);z-index:9999;display:none;justify-content:center;align-items:center;backdrop-filter:blur(12px)}
        .settings-overlay.open{display:flex!important}
        .settings-panel{background:#111118;width:440px;max-height:80vh;border-radius:24px;border:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;overflow:hidden;animation:slideIn .3s ease}
        .settings-header{display:flex;justify-content:space-between;align-items:center;padding:22px 25px;border-bottom:1px solid rgba(255,255,255,.04)}
        .settings-header h2{margin:0;font-size:20px;font-weight:800}
        .settings-close{width:34px;height:34px;background:rgba(255,255,255,.06);border:none;border-radius:10px;color:#888;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .settings-close:hover{background:#EF5350;color:white}
        .settings-body{padding:22px 25px;overflow-y:auto;flex:1}
        .settings-section{margin-bottom:22px}
        .settings-section-title{font-size:11px;color:#555;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;font-weight:700}
        .settings-row{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:rgba(255,255,255,.03);border-radius:11px;margin-bottom:6px}
        .settings-row-label{font-size:14px;color:#ccc;font-weight:500}
        .toggle-switch{position:relative;width:44px;height:24px;background:rgba(255,255,255,.1);border-radius:12px;cursor:pointer;transition:.3s}
        .toggle-switch.active{background:#9C27B0}
        .toggle-switch::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;background:white;border-radius:50%;transition:.3s}
        .toggle-switch.active::after{left:23px}
        .settings-action-btn{width:100%;padding:11px;border-radius:11px;border:none;font-size:14px;font-weight:700;cursor:pointer;margin-bottom:6px;font-family:'Inter'}
        .btn-reset{background:rgba(244,67,54,.1);color:#EF5350;border:1px solid rgba(244,67,54,.15)}
        .btn-logout-s{background:rgba(255,255,255,.04);color:#888;border:1px solid rgba(255,255,255,.06)}
        .dev-mode-trigger{margin-top:25px;padding-top:18px;border-top:1px solid rgba(255,255,255,.04);text-align:center}
        .dev-mode-btn{background:none;border:none;color:#333;font-size:10px;cursor:pointer;font-family:'Inter'}
        .dev-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.92);z-index:10001;display:none;justify-content:center;align-items:center}
        .dev-overlay.open{display:flex!important}
        .dev-password-card{background:#0e0e14;padding:35px;border-radius:20px;border:1px solid rgba(244,67,54,.2);text-align:center;width:300px}
        .dev-password-card h3{color:#EF5350;font-weight:800}
        .dev-password-card p{color:#555;font-size:11px;margin-bottom:18px}
        .dev-password-card input{width:80%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);color:white;font-size:16px;letter-spacing:5px;margin-bottom:12px;font-family:'Inter'}
        .dev-enter-btn{background:linear-gradient(135deg,#EF5350,#C62828);color:white;border:none;padding:10px 35px;border-radius:10px;font-weight:700;cursor:pointer;margin-right:8px;font-family:'Inter'}
        .dev-cancel-btn{background:rgba(255,255,255,.05);color:#888;border:none;padding:10px 25px;border-radius:10px;cursor:pointer;font-family:'Inter'}
        .dev-error{color:#EF5350;font-size:11px;margin-top:8px;height:16px}
        .dev-console-panel{background:#0a0a0e;width:460px;border-radius:20px;border:1px solid rgba(244,67,54,.2);overflow:hidden;animation:slideIn .3s ease}
        .dev-console-header{background:linear-gradient(135deg,#EF5350,#C62828);padding:18px 22px;display:flex;justify-content:space-between;align-items:center}
        .dev-console-header h2{margin:0;font-size:16px;font-weight:800}
        .dev-console-body{padding:22px}
        .dev-console-section{margin-bottom:18px}
        .dev-console-section-title{font-size:10px;color:#EF5350;text-transform:uppercase;letter-spacing:2px;margin-bottom:10px;font-weight:700}
        .dev-btn{width:100%;padding:12px;border-radius:11px;border:1px solid rgba(255,255,255,.05);background:rgba(255,255,255,.03);color:white;font-size:13px;font-weight:700;cursor:pointer;margin-bottom:6px;font-family:'Inter';display:flex;align-items:center;gap:8px;justify-content:center}
        .dev-btn:hover{background:rgba(255,255,255,.06)}
        .dev-input-row{display:flex;gap:8px;margin-bottom:6px}
        .dev-input-row input{flex:1;padding:11px;border-radius:10px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);color:white;font-size:13px;margin:0;font-family:'Inter'}
        .dev-input-row button{padding:11px 18px;border-radius:10px;border:none;background:#4CAF50;color:white;font-weight:700;cursor:pointer;font-family:'Inter'}
        .dev-status{text-align:center;color:#4CAF50;font-size:12px;height:18px;margin-top:5px}
        .dev-footer{padding:12px 22px;border-top:1px solid rgba(255,255,255,.04);text-align:center}
        .dev-footer-text{color:#333;font-size:9px}

        .toast-container{position:fixed;top:90px;right:20px;z-index:9997;display:flex;flex-direction:column;gap:8px}
        .toast{background:rgba(15,15,22,.95);border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px 18px;min-width:260px;max-width:350px;box-shadow:0 12px 40px rgba(0,0,0,.5);animation:toastIn .3s ease,toastOut .3s ease 2.7s forwards;display:flex;align-items:center;gap:10px}
        .toast-icon{font-size:22px;flex-shrink:0}
        .toast-text{font-size:13px;color:#ccc;font-weight:500;line-height:1.3}
        .toast-text strong{color:#4CAF50;font-weight:700}
        @keyframes toastIn{from{transform:translateX(80px);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes toastOut{from{opacity:1}to{opacity:0;transform:translateX(40px)}}
    </style>
</head>
<body>
    <div class="bg-layer" id="main-bg"></div>
    <div class="toast-container" id="toast-container"></div>

    <div class="login-wrapper" id="login-screen">
        <div class="logo-container"><div class="logo-text">CL</div></div>
        <div class="login-card">
            <div id="login-title" style="font-size:20px;font-weight:800;margin-bottom:20px">–í–•–Ü–î</div>
            <label>–ù–Ü–ö–ù–ï–ô–ú</label><input type="text" id="nickname" autocomplete="off" placeholder="–í–∞—à –Ω—ñ–∫...">
            <label>–ü–ê–†–û–õ–¨</label><input type="password" id="password" autocomplete="off" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <div class="login-error" id="login-error"></div>
            <button class="btn btn-green" id="login-btn" style="display:none" onclick="doLogin()">–£–≤—ñ–π—Ç–∏</button>
            <button class="btn btn-purple" id="register-btn" style="display:none" onclick="doRegister()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <div class="login-mode-toggle" id="login-toggle" onclick="toggleLoginMode()"></div>
        </div>
    </div>

    <div class="settings-overlay" id="settings-overlay"><div class="settings-panel">
        <div class="settings-header"><h2>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2><button class="settings-close" onclick="closeSettings()">‚úï</button></div>
        <div class="settings-body">
            <div class="settings-section"><div class="settings-section-title">–ó–≤—É–∫</div>
                <div class="settings-row"><div class="settings-row-label">üîä –ó–≤—É–∫–∏</div><div class="toggle-switch active" onclick="this.classList.toggle('active')"></div></div>
            </div>
            <div class="settings-section"><div class="settings-section-title">–ê–∫–∞—É–Ω—Ç</div>
                <button class="settings-action-btn btn-reset" onclick="if(confirm('–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å? –ê–∫–∞—É–Ω—Ç –∑–∞–ª–∏—à–∏—Ç—å—Å—è.')){resetProgress()}">üóëÔ∏è –°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
                <button class="settings-action-btn btn-logout-s" onclick="logoutAcc()">üö™ –í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</button>
            </div>
            <div class="dev-mode-trigger"><button class="dev-mode-btn" onclick="closeSettings();$('dev-auth').classList.add('open');$('dev-pw').value='';$('dev-err').innerText='';setTimeout(()=>$('dev-pw').focus(),100)">Developer Mode</button></div>
        </div>
    </div></div>
    <div class="dev-overlay" id="dev-auth"><div class="dev-password-card"><h3>üîê</h3><p>Developer Access</p><input type="password" id="dev-pw" maxlength="10" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><div class="dev-error" id="dev-err"></div><div style="margin-top:12px"><button class="dev-enter-btn" onclick="chkDev()">Enter</button><button class="dev-cancel-btn" onclick="$('dev-auth').classList.remove('open')">‚úï</button></div></div></div>
    <div class="dev-overlay" id="dev-con"><div class="dev-console-panel">
        <div class="dev-console-header"><h2>üõ†Ô∏è Dev Console</h2><button class="settings-close" onclick="$('dev-con').classList.remove('open')">‚úï</button></div>
        <div class="dev-console-body">
            <div class="dev-console-section"><div class="dev-console-section-title">üí∞ Balance</div>
                <div class="dev-input-row"><input type="number" id="dev-money" placeholder="LGX"><button onclick="let a=parseInt($('dev-money').value);if(a>0){P.balance+=a;save();dS('‚úÖ +'+a)}">Add</button></div>
                <button class="dev-btn" onclick="P.balance+=999999999;save();dS('‚úÖ +999M')">üíé +999,999,999</button>
            </div>
            <div class="dev-console-section"><div class="dev-console-section-title">‚≠ê Level</div>
                <button class="dev-btn" onclick="P.level=99;P.xp=0;save();dS('‚úÖ LVL 99')">üèÜ LVL 99</button>
                <button class="dev-btn" onclick="P.level=10;P.xp=0;save();dS('‚úÖ LVL 10')">üìä LVL 10</button>
            </div>
            <div class="dev-console-section"><div class="dev-console-section-title">üîì</div>
                <button class="dev-btn" onclick="P.hasLicense=true;save();dS('‚úÖ')">üîë Unlock License</button>
            </div>
            <div class="dev-status" id="dev-st"></div>
        </div><div class="dev-footer"><div class="dev-footer-text">CLI Dev v4.0</div></div>
    </div></div>

    <div class="modal-overlay" id="biz-modal"><div class="modal-panel" id="biz-modal-c"></div></div>
    <div class="modal-overlay" id="bld-modal"><div class="modal-panel" id="bld-modal-c"></div></div>

    <div id="game-ui">
        <div class="header-stats">
            <div class="user-info">
                <div class="user-avatar-mini" id="ui-av">C</div>
                <div class="user-details">
                    <div class="user-name" id="ui-nick">Player</div>
                    <div class="user-meta"><span>‚≠ê LVL <b id="ui-lvl">1</b></span><span>üè¢ <b id="ui-biz">0</b></span><span>üèôÔ∏è <b id="ui-bld">0</b></span></div>
                </div>
            </div>
            <div class="balance-box">
                <div class="income-badge">üí∞ +<span id="ui-inc">0</span>/10—Å</div>
                <div class="balance-main"><div class="balance-amount"><span id="ui-bal">0</span> LGX</div><div class="balance-sub">1 LGX = 10 USD</div></div>
            </div>
        </div>
        <div class="nav-tabs">
            <div class="nav-btn active" onclick="switchTab('auction')">üé∞ –ê—É–∫—Ü—ñ–æ–Ω</div>
            <div class="nav-btn" onclick="switchTab('monopoly')">üè¢ –ú–æ–Ω–æ–ø–æ–ª—ñ—è</div>
            <div class="nav-btn" onclick="switchTab('city')">üèôÔ∏è –†—ñ–≤–Ω–µ</div>
            <div class="nav-btn" onclick="switchTab('profile')">üë§ –ü—Ä–æ—Ñ—ñ–ª—å</div>
        </div>

        <div id="tab-auction" class="tab-content active">
            <div class="roulette-section"><div class="roulette-frame">
                <div class="roulette-pointer"><svg width="40" height="28" viewBox="0 0 40 28"><defs><linearGradient id="pg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" style="stop-color:#CE93D8"/><stop offset="100%" style="stop-color:#9C27B0"/></linearGradient></defs><polygon points="20,28 0,0 40,0" fill="url(#pg)"/></svg></div>
                <div class="roulette-viewport"><div class="roulette-center-line"></div><div class="roulette-track" id="track"></div></div>
            </div></div>
            <div id="win-message"></div>
            <h3 style="color:#555;font-weight:600;margin:15px 0;font-size:14px;letter-spacing:1px;text-transform:uppercase">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏</h3>
            <div class="container-grid">
                <div class="container-item" onclick="spin('yellow',100)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#FFD700">BASIC</div><div class="container-price">100 LGX</div></div>
                <div class="container-item" onclick="spin('green',1500)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#4CAF50">STANDARD</div><div class="container-price">1,500 LGX</div></div>
                <div class="container-item" onclick="spin('blue',7000)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#2196F3">PREMIUM</div><div class="container-price">7,000 LGX</div><div class="locked-overlay" id="lock-blue">üîí LVL 3 –∞–±–æ –õ—ñ—Ü–µ–Ω–∑—ñ—è</div></div>
                <div class="container-item" onclick="spin('red',30000)"><div class="c-icon">üì¶</div><div class="c-tier" style="color:#EF5350">ELITE</div><div class="container-price">30,000 LGX</div><div class="locked-overlay" id="lock-red">üè¢ –ö—É–ø—ñ—Ç—å –≤—Å—ñ 3 –æ—Ñ—ñ—Å–∏<br>—É –º—ñ—Å—Ç—ñ –†—ñ–≤–Ω–µ</div></div>
            </div>
        </div>

        <div id="tab-monopoly" class="tab-content">
            <div class="monopoly-header"><h1>üè¢ –ú–û–ù–û–ü–û–õ–Ü–Ø</h1><p>–ë—ñ–∑–Ω–µ—Å-—ñ–º–ø–µ—Ä—ñ—è</p></div>
            <div class="monopoly-tabs">
                <div class="monopoly-tab-btn active" onclick="switchMT('my')">üè¢ –ú–æ—ó –ë—ñ–∑–Ω–µ—Å–∏</div>
                <div class="monopoly-tab-btn" onclick="switchMT('open')">‚ûï –í—ñ–¥–∫—Ä–∏—Ç–∏</div>
            </div>
            <div class="monopoly-section active" id="m-my">
                <div class="biz-total-income" id="biz-total" style="display:none"><div class="biz-total-income-label">–ü–ê–°–ò–í–ù–ò–ô –î–û–•–Ü–î</div><div class="biz-total-income-value" id="biz-total-v">0</div></div>
                <div id="my-biz-c"><div class="my-biz-empty"><div class="my-biz-empty-icon">üèóÔ∏è</div><div style="font-size:18px;font-weight:600">–ù–µ–º–∞—î –±—ñ–∑–Ω–µ—Å—ñ–≤</div></div></div>
            </div>
            <div class="monopoly-section" id="m-open"><div class="biz-catalog-grid" id="biz-cat"></div></div>
        </div>

        <div id="tab-city" class="tab-content">
            <div class="city-hud">
                <div class="city-hud-left"><h2>üèôÔ∏è <span>–†–Ü–í–ù–ï</span></h2><p>–ö—É–ø—ñ—Ç—å 3 –æ—Ñ—ñ—Å–∏ ‚Üí Elite –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏</p></div>
                <div class="city-hud-right">
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–ù–ê–°–ï–õ–ï–ù–ù–Ø</div><div class="city-hud-stat-value pop" id="city-pop">0</div></div>
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–©–ê–°–¢–Ø</div><div class="city-hud-stat-value happy" id="city-happy">0%</div></div>
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–ü–û–î–ê–¢–ö–ò</div><div class="city-hud-stat-value tax" id="city-tax">0</div></div>
                    <div class="city-hud-stat"><div class="city-hud-stat-label">–û–§–Ü–°–ò</div><div class="city-hud-stat-value" style="color:#7986CB" id="city-offices">0/3</div></div>
                </div>
            </div>
            <div class="city-map-wrapper" id="cmw"><div class="city-map" id="cmap"></div></div>
        </div>

        <div id="tab-profile" class="tab-content">
            <!-- Daily Reward -->
            <div class="daily-reward-card" id="daily-card">
                <div class="daily-reward-title">üéÅ –©–û–î–ï–ù–ù–ê –ù–ê–ì–û–†–û–î–ê</div>
                <div class="daily-reward-sub">–ó–∞—Ö–æ–¥—å –∫–æ–∂–µ–Ω –¥–µ–Ω—å —Ç–∞ –æ—Ç—Ä–∏–º—É–π –±–æ–Ω—É—Å–∏!</div>
                <div class="daily-streak" id="daily-streak"></div>
                <button class="daily-claim-btn" id="daily-btn" onclick="claimDaily()">–ó–∞–±—Ä–∞—Ç–∏</button>
            </div>

            <!-- Time Played -->
            <div class="time-played-card">
                <div class="time-played-label">‚è±Ô∏è –ß–ê–° –£ –ì–†–Ü</div>
                <div class="time-played-value" id="time-total">00:00:00</div>
                <div class="time-played-session">–¶—è —Å–µ—Å—ñ—è: <span id="time-session">00:00</span></div>
            </div>

            <div class="profile-card-new">
                <input type="file" id="av-in" accept="image/*" style="display:none">
                <div class="avatar-circle" onclick="$('av-in').click()"><img id="av-img" src="" style="display:none"><div id="av-ph" class="avatar-text">–ù–ê–¢–ò–°–ù–ò<br>–î–õ–Ø –§–û–¢–û</div></div>
                <div class="profile-nick-text"><span id="p-nick">***</span></div><div class="profile-divider"></div>
                <div class="profile-lvl-text">LVL <span id="p-lvl">1</span></div>
                <div class="profile-xp-container"><div class="profile-xp-fill" id="p-xp"></div></div>
            </div>
            <div class="profile-stats-grid">
                <div class="stat-box"><div class="stat-title">–ë–ê–õ–ê–ù–°</div><div class="stat-value val-gold"><span id="s-bal">0</span></div></div>
                <div class="stat-box"><div class="stat-title">–ö–û–ù–¢–ï–ô–ù–ï–†–Ü–í</div><div class="stat-value"><span id="s-opened">0</span></div></div>
                <div class="stat-box"><div class="stat-title">–ë–Ü–ó–ù–ï–°–Ü–í</div><div class="stat-value val-green" id="s-biz">0</div></div>
                <div class="stat-box"><div class="stat-title">–ë–£–î–Ü–í–õ–Ü</div><div class="stat-value val-green" id="s-bld">0</div></div>
                <div class="stat-box"><div class="stat-title">–ù–ê–°–ï–õ–ï–ù–ù–Ø</div><div class="stat-value" style="color:#42A5F5" id="s-pop">0</div></div>
                <div class="stat-box"><div class="stat-title">–î–û–•–Ü–î/10–°</div><div class="stat-value val-green" id="s-inc">0</div></div>
            </div>
            <button class="settings-btn-profile" onclick="openSettings()">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
        </div>
    </div>

<script>
const $=id=>document.getElementById(id);
let audioCtx=null;
function initAudio(){if(!audioCtx)audioCtx=new(window.AudioContext||window.webkitAudioContext)()}
function playTick(f=800,d=.03){if(!audioCtx)return;try{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.value=f;o.type='sine';g.gain.setValueAtTime(.06,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+d);o.start(audioCtx.currentTime);o.stop(audioCtx.currentTime+d)}catch(e){}}
function playWin(){if(!audioCtx)return;[0,.1,.2,.35].forEach((d,i)=>{const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.value=[523,659,784,1047][i];o.type='sine';g.gain.setValueAtTime(.1,audioCtx.currentTime+d);g.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+d+.3);o.start(audioCtx.currentTime+d);o.stop(audioCtx.currentTime+d+.3)})}
function playCash(){if(!audioCtx)return;const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.connect(g);g.connect(audioCtx.destination);o.frequency.value=1200;o.type='sine';g.gain.setValueAtTime(.08,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.001,audioCtx.currentTime+.15);o.start(audioCtx.currentTime);o.stop(audioCtx.currentTime+.15)}

const carDB={yellow:[{name:"Lada 2107",price:150,img:"https://avtodiski.net.ua/images/news/2019-01-08/Istoriya%20avtomobilya%20VAZ%202107.jpg"},{name:"Daewoo Lanos",price:200,img:"https://upload.wikimedia.org/wikipedia/commons/e/ec/Daewoo_Lanos_front_20080110.jpg"},{name:"VW Golf 2",price:250,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Golf_II_jaslo.jpg/330px-Golf_II_jaslo.jpg"},{name:"Audi 80",price:300,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Audi80-1992.JPG/330px-Audi80-1992.JPG"},{name:"Opel Astra",price:350,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Opel_Astra_F_front_20071019.jpg/250px-Opel_Astra_F_front_20071019.jpg"}],green:[{name:"Skoda Octavia",price:1800,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Skoda_Octavia_I_front_20080213.jpg/250px-Skoda_Octavia_I_front_20080213.jpg"},{name:"Toyota Camry",price:2500,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/2010_Toyota_Camry_base_--_11-25-2009.jpg/250px-2010_Toyota_Camry_base_--_11-25-2009.jpg"},{name:"VW Passat",price:2200,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG/250px-VW_Passat_B8_Limousine_2.0_TDI_Highline.JPG"},{name:"Mazda 6",price:2100,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg/330px-2005-2007_Mazda_6_%28GG_Series_2%29_Luxury_Sports_hatchback_%282011-01-13%29.jpg"},{name:"Honda Accord",price:2300,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Honda_Accord_%282008%29_front.JPG/250px-Honda_Accord_%282008%29_front.JPG"}],blue:[{name:"BMW M5",price:11000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/2021_BMW_M5_CS_F90.jpg/330px-2021_BMW_M5_CS_F90.jpg"},{name:"Mercedes G",price:15000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Mercedes-Benz_W465_450_d_DSC_0679.jpg/250px-Mercedes-Benz_W465_450_d_DSC_0679.jpg"},{name:"Porsche 911",price:12500,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg/250px-GIMS_2019%2C_Le_Grand-Saconnex_%28GIMS9988%29.jpg"},{name:"Tesla S",price:9000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg/330px-2021_Tesla_Model_S_P2_Long_Range_front_right_view.jpg"},{name:"Range Rover",price:13000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg/330px-Land_Rover_Range_Rover_LWB_Autobiography_L460_Santorini_Black_%281%29.jpg"}],red:[{name:"Bugatti Chiron",price:350000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/2016-03-01_Geneva_Motor_Show_0853.JPG/960px-2016-03-01_Geneva_Motor_Show_0853.JPG"},{name:"Lamborghini",price:50000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Lamborghini_Aventador_Front_View.jpg/320px-Lamborghini_Aventador_Front_View.jpg"},{name:"Ferrari",price:300000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/LaFerrari_in_Schenzhen.JPG/320px-LaFerrari_in_Schenzhen.JPG"},{name:"McLaren P1",price:150000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/McLaren_P1.jpg/320px-McLaren_P1.jpg"},{name:"Rolls-Royce",price:80000,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Rolls-Royce_Phantom_VIII_IMG_4576.jpg/320px-Rolls-Royce_Phantom_VIII_IMG_4576.jpg"}]};

const bizCat=[{id:'kiosk',name:'–ì–∞–∑–µ—Ç–Ω–∏–π –∫—ñ–æ—Å–∫',icon:'üì∞',cat:'–¢–æ—Ä–≥—ñ–≤–ª—è',desc:'–ì–∞–∑–µ—Ç–∏ —Ç–∞ —Å–Ω–µ–∫–∏',cost:500,baseInc:10,reqLvl:5,color:'#FFD700',bg:'linear-gradient(135deg,#2a2520,#1a1815)'},{id:'cafe',name:'–ö–∞—Ñ–µ',icon:'‚òï',cat:'–•–∞—Ä—á—É–≤–∞–Ω–Ω—è',desc:'–ö–∞–≤–∞ —Ç–∞ –≤–∏–ø—ñ—á–∫–∞',cost:3000,baseInc:50,reqLvl:10,color:'#8D6E63',bg:'linear-gradient(135deg,#2a2018,#1a1510)'},{id:'carwash',name:'–ê–≤—Ç–æ–º–∏–π–∫–∞',icon:'üöó',cat:'–°–µ—Ä–≤—ñ—Å',desc:'–ë–µ–∑–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞ –º–∏–π–∫–∞',cost:15000,baseInc:200,reqLvl:15,color:'#42A5F5',bg:'linear-gradient(135deg,#1a2030,#101828)'},{id:'rest',name:'–†–µ—Å—Ç–æ—Ä–∞–Ω',icon:'üçΩÔ∏è',cat:'–•–∞—Ä—á—É–≤–∞–Ω–Ω—è',desc:'–ï–ª—ñ—Ç–Ω–∞ –∫—É—Ö–Ω—è',cost:75000,baseInc:800,reqLvl:25,color:'#AB47BC',bg:'linear-gradient(135deg,#2a1a30,#1a1020)'},{id:'hotel',name:'–ì–æ—Ç–µ–ª—å',icon:'üè®',cat:'–ù–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å',desc:'5-–∑—ñ—Ä–∫–æ–≤–∏–π',cost:500000,baseInc:5000,reqLvl:40,color:'#FFA726',bg:'linear-gradient(135deg,#302a18,#201a10)'},{id:'tech',name:'TechCorp',icon:'üè≠',cat:'IT',desc:'–ú—ñ–∫—Ä–æ—á—ñ–ø–∏',cost:2000000,baseInc:25000,reqLvl:60,color:'#EF5350',bg:'linear-gradient(135deg,#301818,#201010)'}];
const bizUp={wb:{name:'–°–∞–π—Ç',icon:'üåê',price:100,bonus:.1,desc:'+10%'},wp:{name:'PRO –°–∞–π—Ç',icon:'üíª',price:1000,bonus:.25,desc:'+25%',req:'wb'},ad:{name:'–†–µ–∫–ª–∞–º–∞',icon:'üì¢',price:500,bonus:.15,desc:'+15%'},mg:{name:'–ú–µ–Ω–µ–¥–∂–µ—Ä',icon:'üëî',price:2000,bonus:.2,desc:'+20%'},au:{name:'–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è',icon:'ü§ñ',price:5000,bonus:.3,desc:'+30%',req:'mg'},lo:{name:'–ü—Ä–µ–º—ñ—É–º',icon:'üìç',price:10000,bonus:.5,desc:'+50%'}};

const CB=[
    {id:'h1',name:'–ñ–∏–ª–∏–π –±—É–¥–∏–Ω–æ–∫',icon:'üè†',type:'residential',cls:'b-residential',desc:'–ë—É–¥–∏–Ω–æ–∫ –Ω–∞ 20 –º–µ—à–∫–∞–Ω—Ü—ñ–≤.',x:120,y:220,w:75,h:75,buyCost:2000,rentCost:200,income:30,pop:20,happy:5,reqLvl:1},
    {id:'h2',name:'–ë–∞–≥–∞—Ç–æ–ø–æ–≤–µ—Ä—Ö—ñ–≤–∫–∞',icon:'üè¢',type:'residential',cls:'b-residential',desc:'150 –º–µ—à–∫–∞–Ω—Ü—ñ–≤.',x:230,y:220,w:85,h:95,buyCost:25000,rentCost:2500,income:300,pop:150,happy:3,reqLvl:8},
    {id:'h3',name:'–ñ–ö "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π"',icon:'üèôÔ∏è',type:'residential',cls:'b-residential',desc:'500 –º–µ—à–∫–∞–Ω—Ü—ñ–≤.',x:350,y:200,w:100,h:115,buyCost:150000,rentCost:15000,income:2000,pop:500,happy:10,reqLvl:20},
    {id:'shop1',name:'–ü—Ä–æ–¥—É–∫—Ç–æ–≤–∏–π',icon:'üè™',type:'commercial',cls:'b-commercial',desc:'–ú–∞–≥–∞–∑–∏–Ω.',x:500,y:230,w:70,h:70,buyCost:5000,rentCost:500,income:80,pop:5,happy:8,reqLvl:3},
    {id:'church',name:'–°–æ–±–æ—Ä',icon:'‚õ™',type:'special',cls:'b-special',desc:'–°–æ–±–æ—Ä –†—ñ–≤–Ω–æ–≥–æ.',x:620,y:210,w:80,h:90,buyCost:0,rentCost:0,income:0,pop:0,happy:20,reqLvl:1},
    // –û–§–Ü–° 1
    {id:'office1',name:'–û—Ñ—ñ—Å "–¶–µ–Ω—Ç—Ä"',icon:'üèõÔ∏è',type:'office',cls:'b-office',desc:'Elite –¥–æ—Å—Ç—É–ø (1/3). –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –±—ñ–∑–Ω–µ—Å-–æ—Ñ—ñ—Å.',x:750,y:220,w:90,h:85,buyCost:50000,rentCost:0,income:500,pop:25,happy:5,reqLvl:10,isOffice:true},
    {id:'mall',name:'–¢–†–¶ "–†—ñ–≤–Ω–µ"',icon:'üõí',type:'commercial',cls:'b-commercial',desc:'–¢–æ—Ä–≥–æ–≤–∏–π —Ü–µ–Ω—Ç—Ä.',x:120,y:450,w:120,h:105,buyCost:200000,rentCost:20000,income:3000,pop:30,happy:15,reqLvl:15},
    {id:'market',name:'–†–∏–Ω–æ–∫',icon:'üè¨',type:'commercial',cls:'b-commercial',desc:'–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Ä–∏–Ω–æ–∫.',x:280,y:460,w:95,h:85,buyCost:50000,rentCost:5000,income:800,pop:20,happy:10,reqLvl:10},
    {id:'bank',name:'–ë–∞–Ω–∫',icon:'üè¶',type:'commercial',cls:'b-commercial',desc:'–ë–∞–Ω–∫.',x:420,y:450,w:80,h:80,buyCost:300000,rentCost:30000,income:5000,pop:15,happy:5,reqLvl:20},
    // –û–§–Ü–° 2
    {id:'office2',name:'–ë—ñ–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä "–°—ñ—Ç—ñ"',icon:'üè¢',type:'office',cls:'b-office',desc:'Elite –¥–æ—Å—Ç—É–ø (2/3). –¢–æ—Ä–≥–æ–≤–∏–π –±—ñ–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä.',x:550,y:460,w:95,h:90,buyCost:100000,rentCost:0,income:1000,pop:40,happy:3,reqLvl:18,isOffice:true},
    {id:'cinema',name:'–ö—ñ–Ω–æ—Ç–µ–∞—Ç—Ä',icon:'üé¨',type:'entertainment',cls:'b-entertainment',desc:'6 –∑–∞–ª—ñ–≤.',x:120,y:700,w:85,h:75,buyCost:30000,rentCost:3000,income:500,pop:10,happy:20,reqLvl:7},
    {id:'stadium',name:'–°—Ç–∞–¥—ñ–æ–Ω',icon:'üèüÔ∏è',type:'entertainment',cls:'b-entertainment',desc:'15000 –º—ñ—Å—Ü—å.',x:240,y:680,w:130,h:120,buyCost:500000,rentCost:50000,income:8000,pop:50,happy:30,reqLvl:25},
    {id:'park1',name:'–ü–∞—Ä–∫',icon:'üå≥',type:'entertainment',cls:'b-entertainment',desc:'–ü–∞—Ä–∫ –≤—ñ–¥–ø–æ—á–∏–Ω–∫—É.',x:410,y:700,w:95,h:90,buyCost:15000,rentCost:1500,income:200,pop:0,happy:25,reqLvl:5},
    {id:'school',name:'–®–∫–æ–ª–∞',icon:'üè´',type:'education',cls:'b-education',desc:'–®–∫–æ–ª–∞ ‚Ññ1.',x:120,y:950,w:85,h:75,buyCost:25000,rentCost:2500,income:300,pop:30,happy:12,reqLvl:5},
    {id:'uni',name:'–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç',icon:'üéì',type:'education',cls:'b-education',desc:'–ù–£–í–ì–ü.',x:240,y:930,w:115,h:105,buyCost:200000,rentCost:20000,income:2500,pop:100,happy:20,reqLvl:18},
    {id:'hospital',name:'–õ—ñ–∫–∞—Ä–Ω—è',icon:'üè•',type:'medical',cls:'b-medical',desc:'–ú—ñ—Å—å–∫–∞ –ª—ñ–∫–∞—Ä–Ω—è.',x:400,y:940,w:100,h:95,buyCost:150000,rentCost:15000,income:2000,pop:50,happy:20,reqLvl:15},
    {id:'factory',name:'–ó–∞–≤–æ–¥',icon:'üè≠',type:'industrial',cls:'b-industrial',desc:'–ë—É–¥–º–∞—Ç–µ—Ä—ñ–∞–ª–∏.',x:120,y:1200,w:100,h:85,buyCost:80000,rentCost:8000,income:1500,pop:40,happy:-5,reqLvl:12},
    {id:'power',name:'–ï–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ—è',icon:'‚ö°',type:'industrial',cls:'b-industrial',desc:'–¢–ï–¶.',x:260,y:1200,w:95,h:85,buyCost:250000,rentCost:25000,income:4000,pop:20,happy:-3,reqLvl:22},
    {id:'police',name:'–ü–æ–ª—ñ—Ü—ñ—è',icon:'üöî',type:'government',cls:'b-government',desc:'–í—ñ–¥–¥—ñ–ª–æ–∫.',x:120,y:1440,w:75,h:70,buyCost:20000,rentCost:0,income:0,pop:15,happy:10,reqLvl:5},
    {id:'cityhall',name:'–ú–µ—Ä—ñ—è',icon:'üèõÔ∏è',type:'government',cls:'b-government',desc:'–ú–µ—Ä—ñ—è –†—ñ–≤–Ω–æ–≥–æ.',x:240,y:1430,w:95,h:85,buyCost:100000,rentCost:0,income:500,pop:25,happy:15,reqLvl:15},
    // –û–§–Ü–° 3
    {id:'office3',name:'–û—Ñ—ñ—Å "–î–µ—Ä–∂"',icon:'üèóÔ∏è',type:'office',cls:'b-office',desc:'Elite –¥–æ—Å—Ç—É–ø (3/3). –î–µ—Ä–∂–∞–≤–Ω–∏–π –±—ñ–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä.',x:380,y:1430,w:90,h:85,buyCost:200000,rentCost:0,income:2000,pop:50,happy:5,reqLvl:30,isOffice:true},
    {id:'villa',name:'–í—ñ–ª–ª–∞',icon:'üè°',type:'residential',cls:'b-residential',desc:'–ï–ª—ñ—Ç–Ω–∞ –≤—ñ–ª–ª–∞.',x:950,y:220,w:80,h:80,buyCost:500000,rentCost:50000,income:8000,pop:10,happy:15,reqLvl:30},
    {id:'golf',name:'–ì–æ–ª—å—Ñ-–∫–ª—É–±',icon:'‚õ≥',type:'entertainment',cls:'b-entertainment',desc:'18-–ª—É–Ω–∫–æ–≤–∏–π.',x:1070,y:210,w:110,h:100,buyCost:400000,rentCost:40000,income:6000,pop:5,happy:20,reqLvl:35},
    {id:'airport',name:'–ê–µ—Ä–æ–ø–æ—Ä—Ç',icon:'‚úàÔ∏è',type:'special',cls:'b-special',desc:'–ê–µ—Ä–æ–ø–æ—Ä—Ç –†—ñ–≤–Ω–µ.',x:950,y:450,w:160,h:130,buyCost:2000000,rentCost:200000,income:30000,pop:100,happy:25,reqLvl:50},
];

const quarters=[
    {id:'center',name:'–¶–ï–ù–¢–†',x:80,y:180,w:800,h:170,color:'rgba(255,215,0,.06)'},
    {id:'trade',name:'–¢–û–†–ì–û–í–ò–ô',x:80,y:410,w:600,h:170,color:'rgba(230,74,25,.05)'},
    {id:'fun',name:'–†–û–ó–í–ê–ì–ò',x:80,y:650,w:550,h:180,color:'rgba(142,36,170,.05)'},
    {id:'edu',name:'–û–°–í–Ü–¢–ê',x:80,y:900,w:550,h:170,color:'rgba(30,136,229,.05)'},
    {id:'ind',name:'–ü–†–û–ú–ó–û–ù–ê',x:80,y:1160,w:400,h:150,color:'rgba(84,110,122,.05)'},
    {id:'gov',name:'–î–ï–†–ñ–ê–í–ù–ò–ô',x:80,y:1390,w:430,h:160,color:'rgba(0,137,123,.05)'},
    {id:'elite',name:'–ï–õ–Ü–¢–ù–ò–ô',x:910,y:180,w:320,h:160,color:'rgba(255,152,0,.05)'},
];

// ===== ACCOUNTS SYSTEM =====
const ACC_KEY='cli_accounts'; // {nick: {password, data}}
const SESS_KEY='cli_session'; // {nick, loginTime}

function getAccounts(){return JSON.parse(localStorage.getItem(ACC_KEY)||'{}');}
function saveAccounts(acc){localStorage.setItem(ACC_KEY,JSON.stringify(acc))}
function getSession(){return JSON.parse(localStorage.getItem(SESS_KEY)||'null')}
function saveSession(s){localStorage.setItem(SESS_KEY,JSON.stringify(s))}

let loginMode='login'; // 'login' or 'register'
let sessionStart=Date.now();

function updateLoginUI(){
    const accs=getAccounts();
    const hasAny=Object.keys(accs).length>0;
    if(hasAny){loginMode='login';$('login-title').innerText='–í–•–Ü–î';$('login-btn').style.display='none';$('register-btn').style.display='none';$('login-toggle').innerText='–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É? –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è';$('login-toggle').style.display='block'}
    else{loginMode='register';$('login-title').innerText='–†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø';$('login-btn').style.display='none';$('register-btn').style.display='none';$('login-toggle').style.display='none'}
    chkLogin();
}
function toggleLoginMode(){loginMode=loginMode==='login'?'register':'login';$('login-title').innerText=loginMode==='login'?'–í–•–Ü–î':'–†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø';$('login-toggle').innerText=loginMode==='login'?'–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É? –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è':'–Ñ –∞–∫–∞—É–Ω—Ç? –£–≤—ñ–π—Ç–∏';$('login-error').innerText='';chkLogin()}
function chkLogin(){const n=$('nickname').value.trim(),p=$('password').value.trim();const ok=n&&p;if(loginMode==='login'){$('login-btn').style.display=ok?'inline-block':'none';$('register-btn').style.display='none'}else{$('register-btn').style.display=ok?'inline-block':'none';$('login-btn').style.display='none'}}
$('nickname').addEventListener('input',()=>{$('login-error').innerText='';chkLogin()});
$('password').addEventListener('input',()=>{$('login-error').innerText='';chkLogin()});

function doLogin(){
    const nick=$('nickname').value.trim(),pw=$('password').value;
    const accs=getAccounts();
    if(!accs[nick]){$('login-error').innerText='‚ùå –ê–∫–∞—É–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';return}
    if(accs[nick].password!==pw){$('login-error').innerText='‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å';return}
    P={...defaultPlayer(),...accs[nick].data,nick};
    if(!P.businesses)P.businesses=[];if(!P.cb)P.cb={};if(!P.daily)P.daily={streak:0,lastClaim:0};if(!P.totalTime)P.totalTime=0;
    saveSession({nick,loginTime:Date.now()});sessionStart=Date.now();
    go();
}
function doRegister(){
    const nick=$('nickname').value.trim(),pw=$('password').value;
    if(nick.length<2){$('login-error').innerText='‚ùå –ù—ñ–∫ –º—ñ–Ω. 2 —Å–∏–º–≤–æ–ª–∏';return}
    if(pw.length<3){$('login-error').innerText='‚ùå –ü–∞—Ä–æ–ª—å –º—ñ–Ω. 3 —Å–∏–º–≤–æ–ª–∏';return}
    const accs=getAccounts();
    if(accs[nick]){$('login-error').innerText='‚ùå –¢–∞–∫–∏–π –Ω—ñ–∫ –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π';return}
    P=defaultPlayer();P.nick=nick;
    accs[nick]={password:pw,data:{...P}};
    saveAccounts(accs);saveSession({nick,loginTime:Date.now()});sessionStart=Date.now();
    toast('üéâ',`–ê–∫–∞—É–Ω—Ç <strong>${nick}</strong> —Å—Ç–≤–æ—Ä–µ–Ω–æ!`);
    go();
}
function defaultPlayer(){return{nick:'Player',balance:500,level:1,xp:0,hasLicense:false,opened:0,avatarData:null,businesses:[],cb:{},daily:{streak:0,lastClaim:0},totalTime:0,firstLogin:Date.now()}}
function logoutAcc(){closeSettings();P.totalTime=(P.totalTime||0)+Math.floor((Date.now()-sessionStart)/1000);savePlayerData();localStorage.removeItem(SESS_KEY);location.reload()}
function resetProgress(){const accs=getAccounts();const nick=P.nick;const pw=accs[nick]?.password;P=defaultPlayer();P.nick=nick;accs[nick]={password:pw,data:{...P}};saveAccounts(accs);location.reload()}

let P=defaultPlayer();
let spinning=false;

function savePlayerData(){const accs=getAccounts();if(accs[P.nick]){accs[P.nick].data={...P};saveAccounts(accs)}}
function save(){savePlayerData();updateUI()}

window.onload=()=>{
    updateLoginUI();
    const sess=getSession();
    if(sess){const accs=getAccounts();if(accs[sess.nick]){P={...defaultPlayer(),...accs[sess.nick].data,nick:sess.nick};if(!P.businesses)P.businesses=[];if(!P.cb)P.cb={};if(!P.daily)P.daily={streak:0,lastClaim:0};if(!P.totalTime)P.totalTime=0;sessionStart=Date.now();go()}}
};

// Save time on close
window.addEventListener('beforeunload',()=>{P.totalTime=(P.totalTime||0)+Math.floor((Date.now()-sessionStart)/1000);savePlayerData()});

function go(){$('login-screen').classList.add('hidden');$('game-ui').style.display='flex';initAudio();buildIdle();updateUI();renderCat();renderMyBiz();buildCity();startLoops();updateDaily();startTimeTracker()}
function buildIdle(){const t=$('track');t.innerHTML='';const a=[...carDB.yellow,...carDB.green];for(let i=0;i<10;i++){const c=a[~~(Math.random()*a.length)];t.innerHTML+=cardH(c,carDB.yellow.includes(c)?'yellow':'green')}t.style.transition='none';t.style.transform=`translateX(${460-192*2}px)`}

function getOwnedOffices(){return CB.filter(b=>b.isOffice&&P.cb[b.id]&&P.cb[b.id].type==='own').length}
function hasEliteAccess(){return getOwnedOffices()>=3}

function updateUI(){
    $('ui-nick').innerText=P.nick;$('ui-bal').innerText=P.balance.toLocaleString();$('ui-lvl').innerText=P.level;$('ui-biz').innerText=P.businesses.length;
    let bc=Object.keys(P.cb).length;$('ui-bld').innerText=bc;
    $('p-nick').innerText=P.nick;$('p-lvl').innerText=P.level;$('s-bal').innerText=P.balance.toLocaleString();$('s-opened').innerText=P.opened;
    $('p-xp').style.width=Math.min((P.xp/(P.level*1000))*100,100)+'%';
    const ai=$('av-img'),ap=$('av-ph');
    if(P.avatarData){ai.src=P.avatarData;ai.style.display='block';ap.style.display='none';$('ui-av').innerHTML=`<img src="${P.avatarData}" style="width:100%;height:100%;object-fit:cover">`}
    else{ai.style.display='none';ap.style.display='block';$('ui-av').innerText=P.nick.charAt(0).toUpperCase()}
    $('lock-blue').style.display=(P.level>=3||P.hasLicense)?'none':'flex';
    P.hasOffice=hasEliteAccess();
    $('lock-red').style.display=P.hasOffice?'none':'flex';
    const ti=getTotalInc();$('ui-inc').innerText=ti.toLocaleString();$('s-biz').innerText=P.businesses.length;$('s-inc').innerText=ti.toLocaleString();
    let pop=0,hap=0,tax=0;
    Object.entries(P.cb).forEach(([id,d])=>{const b=CB.find(x=>x.id===id);if(!b)return;pop+=b.pop*(d.level||1);hap+=b.happy;tax+=calcBI(id)});
    $('city-pop').innerText=pop.toLocaleString();$('city-happy').innerText=Math.max(0,Math.min(100,50+hap))+'%';$('city-tax').innerText=tax.toLocaleString();
    $('s-bld').innerText=bc;$('s-pop').innerText=pop.toLocaleString();
    $('city-offices').innerText=getOwnedOffices()+'/3';
}

$('av-in').addEventListener('change',e=>{const f=e.target.files[0];if(f){const r=new FileReader();r.onload=e=>{P.avatarData=e.target.result;save()};r.readAsDataURL(f)}});
function switchTab(t){document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active'));$('tab-'+t).classList.add('active');const m={auction:0,monopoly:1,city:2,profile:3};document.querySelectorAll('.nav-btn')[m[t]].classList.add('active');$('main-bg').style.opacity=t==='auction'?'1':'0';if(t==='monopoly'){renderMyBiz();renderCat()}if(t==='profile')updateDaily()}

// ===== DAILY REWARD =====
const dailyRewards=[{day:1,icon:'ü™ô',amount:100},{day:2,icon:'üí∞',amount:250},{day:3,icon:'üíé',amount:500},{day:4,icon:'üéÅ',amount:1000},{day:5,icon:'üëë',amount:2500},{day:6,icon:'üèÜ',amount:5000},{day:7,icon:'üåü',amount:10000}];

function updateDaily(){
    if(!P.daily)P.daily={streak:0,lastClaim:0};
    const now=new Date();const today=new Date(now.getFullYear(),now.getMonth(),now.getDate()).getTime();
    const lastClaim=P.daily.lastClaim||0;
    const lastDay=new Date(lastClaim);const lastDayStart=new Date(lastDay.getFullYear(),lastDay.getMonth(),lastDay.getDate()).getTime();
    const diff=(today-lastDayStart)/(1000*60*60*24);
    if(diff>1&&P.daily.streak>0){P.daily.streak=0;save()} // Reset streak
    const canClaim=diff>=1||lastClaim===0;
    const streak=P.daily.streak||0;
    let html='';
    for(let i=0;i<7;i++){
        const r=dailyRewards[i];
        let cls='locked';
        if(i<streak)cls='claimed';
        else if(i===streak&&canClaim)cls='current';
        html+=`<div class="daily-day ${cls}"><div class="daily-day-num">–î–ï–ù–¨ ${r.day}</div><div class="daily-day-reward">${r.icon}</div><div class="daily-day-amount">${r.amount}</div></div>`;
    }
    $('daily-streak').innerHTML=html;
    if(canClaim&&streak<7){$('daily-btn').className='daily-claim-btn available';$('daily-btn').innerText=`üéÅ –ó–∞–±—Ä–∞—Ç–∏ ${dailyRewards[streak].amount} LGX`;$('daily-btn').disabled=false}
    else{$('daily-btn').className='daily-claim-btn claimed-btn';$('daily-btn').innerText=streak>=7?'‚úÖ –í—Å—ñ –¥–Ω—ñ –∑—ñ–±—Ä–∞–Ω–æ!':'‚úÖ –í–∂–µ –∑–∞–±—Ä–∞–Ω–æ —Å—å–æ–≥–æ–¥–Ω—ñ';$('daily-btn').disabled=true}
}
function claimDaily(){
    if(!P.daily)P.daily={streak:0,lastClaim:0};
    const now=new Date();const today=new Date(now.getFullYear(),now.getMonth(),now.getDate()).getTime();
    const streak=P.daily.streak||0;
    if(streak>=7)return;
    const reward=dailyRewards[streak];
    P.balance+=reward.amount;P.daily.streak=streak+1;P.daily.lastClaim=Date.now();
    save();playCash();toast('üéÅ',`–©–æ–¥–µ–Ω–Ω–∞ –Ω–∞–≥–æ—Ä–æ–¥–∞: <strong>+${reward.amount} LGX</strong> (–î–µ–Ω—å ${streak+1})`);updateDaily();
}

// ===== TIME TRACKER =====
function startTimeTracker(){
    setInterval(()=>{
        const totalSec=(P.totalTime||0)+Math.floor((Date.now()-sessionStart)/1000);
        const h=Math.floor(totalSec/3600);const m=Math.floor((totalSec%3600)/60);const s=totalSec%60;
        $('time-total').innerText=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        const sessSec=Math.floor((Date.now()-sessionStart)/1000);
        const sm=Math.floor(sessSec/60);const ss=sessSec%60;
        $('time-session').innerText=`${String(sm).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
    },1000);
}

// MONOPOLY
function switchMT(t){document.querySelectorAll('.monopoly-tab-btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('.monopoly-section').forEach(s=>s.classList.remove('active'));if(t==='my'){document.querySelectorAll('.monopoly-tab-btn')[0].classList.add('active');$('m-my').classList.add('active');renderMyBiz()}else{document.querySelectorAll('.monopoly-tab-btn')[1].classList.add('active');$('m-open').classList.add('active');renderCat()}}
function calcBInc(b,t){let inc=t.baseInc,bon=0;(b.upgrades||[]).forEach(u=>{const up=bizUp[u];if(up)bon+=up.bonus});return Math.floor(inc*(1+bon))}
function getTotalInc(){let t=0;P.businesses.forEach(b=>{const tp=bizCat.find(x=>x.id===b.id);if(tp)t+=calcBInc(b,tp)});Object.entries(P.cb).forEach(([id])=>{t+=calcBI(id)});return t}
function renderCat(){const g=$('biz-cat');g.innerHTML='';bizCat.forEach(b=>{const o=P.businesses.find(x=>x.id===b.id),l=P.level<b.reqLvl,p=P.balance<b.cost;let badge=o?'<div class="biz-catalog-badge owned">‚úÖ</div>':l?'<div class="biz-catalog-badge lock">üîí</div>':'';g.innerHTML+=`<div class="biz-catalog-card ${l&&!o?'locked':''}"><div class="biz-catalog-lvl-badge">LVL ${b.reqLvl}+</div>${badge}<div class="biz-catalog-icon">${b.icon}</div><div class="biz-catalog-name">${b.name}</div><div class="biz-catalog-desc">${b.desc}</div><div class="biz-catalog-stats"><div class="biz-catalog-stat"><span class="biz-catalog-stat-label">–¶—ñ–Ω–∞</span><span class="biz-catalog-stat-value req">${b.cost.toLocaleString()}</span></div><div class="biz-catalog-stat"><span class="biz-catalog-stat-label">–î–æ—Ö—ñ–¥/10—Å</span><span class="biz-catalog-stat-value">${b.baseInc.toLocaleString()}</span></div></div><button class="biz-catalog-buy-btn" ${(l||o||p)?'disabled':''} onclick="buyBiz('${b.id}')">${o?'‚úÖ –í—ñ–¥–∫—Ä–∏—Ç–æ':l?'üîí LVL '+b.reqLvl:'–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Äî '+b.cost.toLocaleString()}</button></div>`})}
function buyBiz(id){const t=bizCat.find(x=>x.id===id);if(!t||P.level<t.reqLvl||P.balance<t.cost||P.businesses.find(x=>x.id===id))return;P.balance-=t.cost;P.businesses.push({id,purchaseTime:Date.now(),upgrades:[],totalEarned:0});save();renderCat();renderMyBiz();playCash();toast('üéâ',`<strong>${t.name}</strong> –≤—ñ–¥–∫—Ä–∏—Ç–æ!`);setTimeout(()=>switchMT('my'),500)}
function renderMyBiz(){const c=$('my-biz-c'),tb=$('biz-total');if(!P.businesses.length){c.innerHTML='<div class="my-biz-empty"><div class="my-biz-empty-icon">üèóÔ∏è</div><div style="font-size:18px;font-weight:600">–ù–µ–º–∞—î –±—ñ–∑–Ω–µ—Å—ñ–≤</div></div>';tb.style.display='none';return}tb.style.display='block';$('biz-total-v').innerText=getTotalInc().toLocaleString()+' LGX/10—Å';c.innerHTML='<div class="my-biz-grid">'+P.businesses.map(b=>{const t=bizCat.find(x=>x.id===b.id);if(!t)return'';return`<div class="my-biz-card" onclick="openBP('${b.id}')"><div class="my-biz-card-header"><div class="my-biz-avatar" style="background:${t.bg};border:2px solid ${t.color}30">${t.icon}</div><div style="flex:1"><div class="my-biz-name">${t.name}</div><div class="my-biz-category">${t.cat}</div></div></div><div class="my-biz-card-body"><div class="my-biz-stat-row"><span class="my-biz-stat-label">–î–æ—Ö—ñ–¥/10—Å</span><span class="my-biz-stat-value">${calcBInc(b,t).toLocaleString()}</span></div><div class="my-biz-stat-row"><span class="my-biz-stat-label">–í—Å—å–æ–≥–æ</span><span class="my-biz-stat-value gold">${(b.totalEarned||0).toLocaleString()}</span></div><div class="my-biz-income-bar"><div class="my-biz-income-fill" id="bar-${b.id}"></div></div></div></div>`}).join('')+'</div>'}
function openBP(id){const b=P.businesses.find(x=>x.id===id),t=bizCat.find(x=>x.id===id);if(!b||!t)return;const inc=calcBInc(b,t);const ups=Object.entries(bizUp).map(([uid,up])=>{const ow=(b.upgrades||[]).includes(uid),rm=!up.req||(b.upgrades||[]).includes(up.req),af=P.balance>=up.price;return`<button class="modal-upgrade-btn" ${(ow||!rm||!af)?'disabled':''} onclick="buyBU('${id}','${uid}')"><span class="upgrade-label">${up.icon} ${up.name} ${ow?'‚úÖ':''}</span><span>${ow?'':`<span class="upgrade-price">${up.price.toLocaleString()}</span>`} <span style="color:#666;font-size:11px">${up.desc}</span></span></button>`}).join('');$('biz-modal-c').innerHTML=`<div class="modal-banner" style="${t.bg}"><div class="modal-banner-icon">${t.icon}</div><button class="modal-close" onclick="$('biz-modal').classList.remove('open');renderMyBiz()">‚úï</button></div><div class="modal-body"><div class="modal-title" style="color:${t.color}">${t.name}</div><div class="modal-subtitle">${t.cat}</div><div class="modal-stats-grid"><div class="modal-stat"><div class="modal-stat-label">–î–æ—Ö—ñ–¥/10—Å</div><div class="modal-stat-value green">${inc.toLocaleString()}</div></div><div class="modal-stat"><div class="modal-stat-label">–í—Å—å–æ–≥–æ</div><div class="modal-stat-value gold">${(b.totalEarned||0).toLocaleString()}</div></div></div><div class="modal-divider"></div><div class="modal-upgrade-title">üîß –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è</div>${ups}<button class="modal-action-btn red" onclick="if(confirm('–ü—Ä–æ–¥–∞—Ç–∏?')){P.businesses=P.businesses.filter(x=>x.id!=='${id}');P.balance+=${Math.floor(t.cost*.5)};save();$('biz-modal').classList.remove('open');renderMyBiz();renderCat()}">üóëÔ∏è –ü—Ä–æ–¥–∞—Ç–∏ –∑–∞ ${Math.floor(t.cost*.5).toLocaleString()}</button></div>`;$('biz-modal').classList.add('open')}
function buyBU(bid,uid){const b=P.businesses.find(x=>x.id===bid),up=bizUp[uid];if(!b||!up||(b.upgrades||[]).includes(uid))return;if(up.req&&!(b.upgrades||[]).includes(up.req))return;if(P.balance<up.price)return;P.balance-=up.price;if(!b.upgrades)b.upgrades=[];b.upgrades.push(uid);save();playCash();toast('üîß',`<strong>${up.name}</strong> –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!`);openBP(bid)}

// CITY
function buildCity(){
    const map=$('cmap');map.innerHTML='';
    [{x:0,y:170,w:3200,h:30},{x:0,y:400,w:3200,h:30},{x:0,y:640,w:3200,h:30},{x:0,y:890,w:3200,h:30},{x:0,y:1140,w:3200,h:30},{x:0,y:1380,w:3200,h:30},{x:60,y:0,w:30,h:2400},{x:870,y:0,w:30,h:2400}].forEach(r=>{const d=document.createElement('div');d.className=r.w>r.h?'road-h':'road-v';d.style.cssText=`left:${r.x}px;top:${r.y}px;width:${r.w}px;height:${r.h}px`;map.appendChild(d)});
    [{x:1500,y:200,w:250,h:400}].forEach(w=>{const d=document.createElement('div');d.className='water';d.style.cssText=`left:${w.x}px;top:${w.y}px;width:${w.w}px;height:${w.h}px`;d.innerHTML='<div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:35px;opacity:.4">üåä</div>';map.appendChild(d)});
    quarters.forEach(q=>{const d=document.createElement('div');d.className='quarter';d.style.cssText=`left:${q.x}px;top:${q.y}px;width:${q.w}px;height:${q.h}px;background:${q.color}`;d.innerHTML=`<div class="quarter-label">${q.name}</div>`;map.appendChild(d)});
    CB.forEach(b=>{const d=document.createElement('div');d.className=`building ${b.cls}`;d.id=`bld-${b.id}`;d.style.cssText=`left:${b.x}px;top:${b.y}px;width:${b.w}px;height:${b.h}px`;const s=P.cb[b.id];let sc='available';if(s)sc=s.type==='own'?'owned':'rented';else if(P.level<b.reqLvl)sc='locked';d.innerHTML=`<div class="building-status ${sc}"></div><div class="building-icon">${b.icon}</div><div class="building-name">${b.name}</div>${s?`<div class="building-level-badge">LV${s.level||1}</div>`:''}${s?`<div class="building-income-float">+${calcBI(b.id)}</div>`:''}`;d.onclick=()=>openBM(b.id);map.appendChild(d)});
    const w=$('cmw');let drag=false,sx,sy,sl,st2;w.onmousedown=e=>{drag=true;sx=e.pageX;sy=e.pageY;sl=w.scrollLeft;st2=w.scrollTop;w.style.cursor='grabbing'};w.onmouseup=w.onmouseleave=()=>{drag=false;w.style.cursor='grab'};w.onmousemove=e=>{if(!drag)return;e.preventDefault();w.scrollLeft=sl-(e.pageX-sx);w.scrollTop=st2-(e.pageY-sy)};
}
function calcBI(id){const b=CB.find(x=>x.id===id);const d=P.cb[id];if(!b||!d)return 0;return Math.floor(b.income*(d.level||1)*(d.type==='own'?1:.6))}

function openBM(id){
    const b=CB.find(x=>x.id===id);if(!b)return;const s=P.cb[id];const locked=P.level<b.reqLvl;const inc=calcBI(id);
    let officeBonus='';
    if(b.isOffice){const owned=getOwnedOffices();officeBonus=`<div class="bm-office-bonus"><div class="bm-office-bonus-label">üè¢ –û–§–Ü–° ‚Äî ELITE –ö–û–ù–¢–ï–ô–ù–ï–†–ò</div><div class="bm-office-bonus-value">–ö—É–ø—ñ—Ç—å –≤—Å—ñ 3 –æ—Ñ—ñ—Å–∏ –¥–ª—è Elite –¥–æ—Å—Ç—É–ø—É<br>–ü—Ä–æ–≥—Ä–µ—Å: ${owned}/3 ${owned>=3?'‚úÖ –†–û–ó–ë–õ–û–ö–û–í–ê–ù–û':'üîí'}</div></div>`}
    let acts='';
    if(locked){acts=`<div style="text-align:center;color:#EF5350;padding:20px;font-weight:600">üîí LVL ${b.reqLvl}<br><span style="color:#666;font-size:12px">–í–∞—à: ${P.level}</span></div>`}
    else if(!s){acts=`${b.buyCost>0?`<button class="bm-action-btn buy" onclick="cA('${id}','buy')" ${P.balance<b.buyCost?'disabled':''}><span class="bm-action-left">üè† –ö—É–ø–∏—Ç–∏</span><span class="bm-action-price">${b.buyCost.toLocaleString()} LGX</span></button>`:''}${b.rentCost>0?`<button class="bm-action-btn rent" onclick="cA('${id}','rent')" ${P.balance<b.rentCost?'disabled':''}><span class="bm-action-left">üìã –û—Ä–µ–Ω–¥—É–≤–∞—Ç–∏</span><span class="bm-action-price">${b.rentCost.toLocaleString()} LGX</span></button>`:''}${b.buyCost===0?`<button class="bm-action-btn buy" onclick="cA('${id}','buy')"><span class="bm-action-left">‚úÖ –ü–æ–±—É–¥—É–≤–∞—Ç–∏</span><span class="bm-action-price">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</span></button>`:''}`}
    else{const uc=Math.floor((b.buyCost||5000)*(s.level||1)*.5);acts=`<button class="bm-action-btn upgrade" onclick="cA('${id}','upgrade')" ${P.balance<uc?'disabled':''}><span class="bm-action-left">‚¨ÜÔ∏è LV${(s.level||1)+1}</span><span class="bm-action-price">${uc.toLocaleString()} LGX</span></button><button class="bm-action-btn collect" onclick="cA('${id}','collect')" ${(s.accInc||0)<=0?'disabled':''}><span class="bm-action-left">üí∞ –ó—ñ–±—Ä–∞—Ç–∏</span><span class="bm-action-price">${(s.accInc||0).toLocaleString()} LGX</span></button>${s.type==='rent'&&b.buyCost>0?`<button class="bm-action-btn buy" onclick="cA('${id}','buyR')" ${P.balance<b.buyCost?'disabled':''}><span class="bm-action-left">üè† –í–∏–∫—É–ø–∏—Ç–∏</span><span class="bm-action-price">${b.buyCost.toLocaleString()}</span></button>`:''}<button class="bm-action-btn sell" onclick="cA('${id}','sell')"><span class="bm-action-left">üóëÔ∏è ${s.type==='own'?'–ü—Ä–æ–¥–∞—Ç–∏':'–†–æ–∑—ñ—Ä–≤–∞—Ç–∏'}</span><span class="bm-action-price">${s.type==='own'?Math.floor(b.buyCost*.5).toLocaleString():'0'}</span></button>`}
    const tl={residential:'üèòÔ∏è –ñ–∏—Ç–ª–æ',commercial:'üõí –ö–æ–º–µ—Ä—Ü—ñ—è',industrial:'üè≠ –ü—Ä–æ–º–∏—Å–ª–æ–≤—ñ—Å—Ç—å',entertainment:'üé≠ –†–æ–∑–≤–∞–≥–∏',government:'üèõÔ∏è –î–µ—Ä–∂.',education:'üéì –û—Å–≤—ñ—Ç–∞',medical:'üè• –ú–µ–¥–∏—Ü–∏–Ω–∞',office:'üè¢ –û—Ñ—ñ—Å',special:'‚≠ê –û—Å–æ–±–ª–∏–≤–µ'};
    $('bld-modal-c').innerHTML=`<div class="bm-header"><div class="bm-header-icon ${b.cls}">${b.icon}</div><div style="flex:1"><div class="bm-header-name">${b.name}</div><div class="bm-header-type">${tl[b.type]||b.type}</div><div class="bm-header-status" style="background:${s?s.type==='own'?'rgba(76,175,80,.15)':'rgba(255,152,0,.15)':locked?'rgba(244,67,54,.15)':'rgba(255,255,255,.06)'};color:${s?s.type==='own'?'#66BB6A':'#FFA726':locked?'#EF5350':'#888'}">${s?s.type==='own'?'‚úÖ –í–ª–∞—Å–Ω—ñ—Å—Ç—å':'üìã –û—Ä–µ–Ω–¥–∞':locked?'üîí –ó–∞–∫—Ä–∏—Ç–æ':'üè∑Ô∏è –î–æ—Å—Ç—É–ø–Ω–æ'}</div></div><button class="modal-close" onclick="$('bld-modal').classList.remove('open')">‚úï</button></div><div class="bm-body"><div class="bm-desc">${b.desc}</div>${officeBonus}<div class="bm-stats"><div class="bm-stat"><div class="bm-stat-label">–î–û–•–Ü–î</div><div class="bm-stat-value" style="color:#4CAF50">${s?inc.toLocaleString():'‚Äî'}</div></div><div class="bm-stat"><div class="bm-stat-label">–ù–ê–°–ï–õ–ï–ù–ù–Ø</div><div class="bm-stat-value" style="color:#42A5F5">+${b.pop*(s?(s.level||1):1)}</div></div><div class="bm-stat"><div class="bm-stat-label">–©–ê–°–¢–Ø</div><div class="bm-stat-value" style="color:${b.happy>=0?'#FFD700':'#EF5350'}">${b.happy>=0?'+':''}${b.happy}</div></div></div><div class="bm-actions">${acts}</div></div>`;
    $('bld-modal').classList.add('open');
}
function cA(id,a){const b=CB.find(x=>x.id===id);if(!b)return;let s=P.cb[id];switch(a){case'buy':if(P.balance<b.buyCost)return;P.balance-=b.buyCost;P.cb[id]={type:'own',level:1,accInc:0};toast('üè†',`<strong>${b.name}</strong> –∫—É–ø–ª–µ–Ω–æ!`);playCash();break;case'rent':if(P.balance<b.rentCost)return;P.balance-=b.rentCost;P.cb[id]={type:'rent',level:1,accInc:0,lastRent:Date.now()};toast('üìã',`<strong>${b.name}</strong> –æ—Ä–µ–Ω–¥–æ–≤–∞–Ω–æ!`);playCash();break;case'upgrade':s=P.cb[id];if(!s)return;const c=Math.floor((b.buyCost||5000)*(s.level||1)*.5);if(P.balance<c)return;P.balance-=c;s.level=(s.level||1)+1;toast('‚¨ÜÔ∏è',`<strong>${b.name}</strong> LV${s.level}!`);playCash();break;case'collect':s=P.cb[id];if(!s||(s.accInc||0)<=0)return;toast('üí∞',`<strong>+${(s.accInc||0).toLocaleString()} LGX</strong>`);s.accInc=0;playCash();break;case'buyR':s=P.cb[id];if(!s||P.balance<b.buyCost)return;P.balance-=b.buyCost;s.type='own';toast('üè†',`<strong>${b.name}</strong> –≤–∏–∫—É–ø–ª–µ–Ω–æ!`);playCash();break;case'sell':s=P.cb[id];if(!s)return;if(!confirm('–í–ø–µ–≤–Ω–µ–Ω—ñ?'))return;if(s.type==='own')P.balance+=Math.floor(b.buyCost*.5);delete P.cb[id];toast('üóëÔ∏è',`<strong>${b.name}</strong> –ø—Ä–æ–¥–∞–Ω–æ`);break}save();buildCity();openBM(id)}

function startLoops(){setInterval(()=>{let e=0;P.businesses.forEach(b=>{const t=bizCat.find(x=>x.id===b.id);if(!t)return;const inc=calcBInc(b,t);b.totalEarned=(b.totalEarned||0)+inc;e+=inc});Object.entries(P.cb).forEach(([id,d])=>{const inc=calcBI(id);d.accInc=(d.accInc||0)+inc;e+=inc;if(d.type==='rent'){const b=CB.find(x=>x.id===id);if(b&&Date.now()-(d.lastRent||0)>3e5){d.lastRent=Date.now();if(P.balance>=b.rentCost)P.balance-=b.rentCost;else{delete P.cb[id];toast('‚ö†Ô∏è',`–û—Ä–µ–Ω–¥—É <strong>${b.name}</strong> —Ä–æ–∑—ñ—Ä–≤–∞–Ω–æ!`)}}}});P.balance+=e;save();renderMyBiz()},10000);let bp=0;setInterval(()=>{bp=(bp+10)%100;P.businesses.forEach(b=>{const bar=$('bar-'+b.id);if(bar)bar.style.width=bp+'%'})},1000)}

function spin(type,price){if(spinning)return;if(type==='blue'&&P.level<3&&!P.hasLicense)return toast('üîí','LVL 3 –∞–±–æ –õ—ñ—Ü–µ–Ω–∑—ñ—è!');if(type==='red'&&!hasEliteAccess())return toast('üîí','–ö—É–ø—ñ—Ç—å –≤—Å—ñ 3 –æ—Ñ—ñ—Å–∏ —É –º—ñ—Å—Ç—ñ –†—ñ–≤–Ω–µ!');if(P.balance<price)return toast('üí∞','–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ!');initAudio();P.balance-=price;P.opened++;save();spinning=true;const wm=$('win-message');wm.innerText='';wm.classList.remove('win-animated');const win=getCar(type);let html='';for(let i=0;i<60;i++){if(i===45)html+=cardH(win.car,win.tier);else{const r=getCar(type);html+=cardH(r.car,r.tier)}}const t=$('track');t.innerHTML=html;t.style.transition='none';t.style.transform='translateX(0)';const tx=-((45*192)-460+96+(Math.random()-.5)*192*.6),dur=6e3;let last=-1;const st=performance.now();(function tk(){if(!spinning)return;const el=performance.now()-st,p=Math.min(el/dur,1),e=1-Math.pow(1-p,3),cx=tx*e,ci=Math.floor(Math.abs(cx)/192);if(ci!==last){last=ci;playTick(600+(1-p)*600,.02+p*.03)}if(p<1)requestAnimationFrame(tk)})();requestAnimationFrame(()=>requestAnimationFrame(()=>{t.style.transition=`transform ${dur}ms cubic-bezier(0.15,0.85,0.2,1)`;t.style.transform=`translateX(${tx}px)`}));setTimeout(()=>{spinning=false;const cards=t.querySelectorAll('.car-card');if(cards[45])cards[45].classList.add('winner');playWin();const profit=win.car.price;P.balance+=profit;P.xp+=100;if(P.xp>=P.level*1000){P.level++;P.xp-=P.level*1000;setTimeout(()=>toast('üéä',`<strong>LVL UP!</strong> LVL ${P.level}`),500)}wm.innerHTML=`üéâ <span style="color:${tierC(win.tier)}">${win.car.name}</span> ‚Äî +${profit.toLocaleString()} LGX`;wm.style.color=tierC(win.tier);wm.classList.add('win-animated');save()},dur+300)}
function getCar(t){let p=['yellow'];if(t==='green')p=['green','yellow'];if(t==='blue')p=['blue','green'];if(t==='red')p=['red','blue'];const tier=p[~~(Math.random()*p.length)];return{car:carDB[tier][~~(Math.random()*carDB[tier].length)],tier}}
function cardH(c,t){return`<div class="car-card rarity-${t}"><img src="${c.img}" loading="lazy"><div class="car-name">${c.name}</div><div class="car-rarity-label ${t}">${{yellow:'BASIC',green:'STANDARD',blue:'PREMIUM',red:'ELITE'}[t]}</div><div class="car-price ${t}">${c.price.toLocaleString()} LGX</div></div>`}
function tierC(t){return{yellow:'#FFD700',green:'#4CAF50',blue:'#2196F3',red:'#EF5350'}[t]}
function toast(i,t){const c=$('toast-container'),d=document.createElement('div');d.className='toast';d.innerHTML=`<span class="toast-icon">${i}</span><span class="toast-text">${t}</span>`;c.appendChild(d);setTimeout(()=>d.remove(),3100)}
function openSettings(){$('settings-overlay').classList.add('open')}
function closeSettings(){$('settings-overlay').classList.remove('open')}
$('settings-overlay').addEventListener('click',function(e){if(e.target===this)closeSettings()});
$('biz-modal').addEventListener('click',function(e){if(e.target===this){this.classList.remove('open');renderMyBiz()}});
$('bld-modal').addEventListener('click',function(e){if(e.target===this)this.classList.remove('open')});
function chkDev(){if($('dev-pw').value===String.fromCharCode(49,49,50,50)){$('dev-auth').classList.remove('open');$('dev-con').classList.add('open');$('dev-st').innerText=''}else{$('dev-err').innerText='‚ùå';$('dev-pw').value='';$('dev-pw').focus()}}
$('dev-pw').addEventListener('keydown',e=>{if(e.key==='Enter')chkDev()});
$('dev-auth').addEventListener('click',function(e){if(e.target===this)this.classList.remove('open')});
$('dev-con').addEventListener('click',function(e){if(e.target===this)this.classList.remove('open')});
function dS(m){$('dev-st').innerText=m;setTimeout(()=>$('dev-st').innerText='',2500)}
</script>
</body>
</html>
